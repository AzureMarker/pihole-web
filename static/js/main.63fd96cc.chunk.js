(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){e.exports=a(414)},169:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),i=a(13),o=a.n(i),l=a(418),c=a(419),d=a(415),u=(a(161),a(163),a(165),a(167),a(169),a(16)),m=a(417),p=a(171),h=function(){document.body.classList.toggle("boxcontainer"),document.body.classList.toggle("background-image")},f=function(){return s.a.createElement("div",{className:"container-toggler"},s.a.createElement("button",{className:"container-toggler-button",title:"BOXED_LAYOUT_TEST_BUTTON",type:"button",onClick:h},s.a.createElement("i",{className:"fa fa-exchange"})))},g=function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized"),document.body.classList.toggle("brand-minimized")},b=function(){document.body.classList.toggle("sidebar-show")},v=function(){document.body.classList.remove("sidebar-show")},E=function(){return s.a.createElement("header",{className:"app-header navbar"},s.a.createElement("button",{className:"navbar-toggler d-lg-none",style:{marginLeft:"16px"},onClick:b,type:"button"},"\u2630"),s.a.createElement(p.a,{to:"/dashboard",className:"navbar-brand",style:{textAlign:"center"}},s.a.createElement("span",{style:{color:"white",lineHeight:"40px"}},s.a.createElement("span",{className:"navbar-brand-full"},"Pi-",s.a.createElement("b",null,"hole")),s.a.createElement("span",{className:"navbar-brand-minimized"},"P",s.a.createElement("b",null,"h")))),s.a.createElement("ul",{className:"nav navbar-nav d-md-down-none mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link navbar-toggler sidebar-toggler",type:"button",onClick:g},"\u2630"))),s.a.createElement(f,null))},y=a(4),k=a(416),O=a(3),j=a(56),w=a.n(j),N=a(17);(n={developmentMode:!1,fakeAPI:!1}).fakeAPI=!0;var C=n,I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(T(e),Object(N.a)({credentials:H()},t)).then(D).then(_).catch(_).then(R)},x=function(e,t){return fetch(T(e),{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:H()}).then(D).then(_).catch(_).then(R)},S=function(e,t){return fetch(T(e),{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:H()}).then(D).then(_).catch(_).then(R)},A=function(e){return fetch(T(e),{method:"DELETE",credentials:H()}).then(D).then(_).catch(_).then(R)},D=function(e){return P.loggedIn&&401===e.status?(document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload(),Promise.reject({isCanceled:!0})):Promise.resolve(e)},_=function(e){return e.isCanceled||e instanceof Error?Promise.reject(e):e.json()},R=function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)},T=function(e){return(C.fakeAPI?"/fakeAPI":"/admin/api")+"/"+e},H=function(){return C.developmentMode?"include":"same-origin"},P={loggedIn:!1,authenticate:function(e){return I("auth",{headers:new Headers({"X-Pi-hole-Authenticate":e})})},logout:function(){return A("auth")},getSummary:function(){return I("stats/summary")},getHistoryGraph:function(){return I("stats/overTime/history")},getClientsGraph:function(){return I("stats/overTime/clients")},getQueryTypes:function(){return I("stats/query_types")},getUpstreams:function(){return I("stats/upstreams")},getTopDomains:function(){return I("stats/top_domains")},getTopBlocked:function(){var e=C.fakeAPI?"stats/top_blocked":"stats/top_domains?blocked=true";return I(e)},getTopClients:function(){return I("stats/top_clients")},getHistory:function(e){return I("stats/history?"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&"))},getWhitelist:function(){return I("dns/whitelist")},getBlacklist:function(){return I("dns/blacklist")},getRegexlist:function(){return I("dns/regexlist")},addWhitelist:function(e){return x("dns/whitelist",{domain:e})},addBlacklist:function(e){return x("dns/blacklist",{domain:e})},addRegexlist:function(e){return x("dns/regexlist",{domain:e})},removeWhitelist:function(e){return A("dns/whitelist/"+e)},removeBlacklist:function(e){return A("dns/blacklist/"+e)},removeRegexlist:function(e){return A("dns/regexlist/"+encodeURIComponent(e))},getStatus:function(){return I("dns/status")},getNetworkInfo:function(){return I("settings/network")},getVersion:function(){return I("version")},getFTLdb:function(){return I("settings/ftldb")},getDNSInfo:function(){return I("settings/dns")},getDHCPInfo:function(){return I("settings/dhcp")},updateDHCPInfo:function(e){return S("settings/dhcp",e)},updateDNSInfo:function(e){return S("settings/dns",e)}},F=a(5),B=a(6),L=a(8),q=a(7),M=a(9),V=function(e){return("00"+e).substr(-2,2)},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.repeat,n=void 0===a?null:a,r=t.interval,s=void 0===r?0:r,i=!1,o=null,l=function(e,t,a,r){i?t({isCanceled:!0}):(r?t(a):e(a),n&&(o=setTimeout(n,s)))};return{promise:new Promise(function(t,a){e.then(function(e){return l(t,a,e,!1)},function(e){return l(t,a,e,!0)})}),cancel:function(){clearTimeout(o),i=!0}}},U=function(e){if(!e.isCanceled)throw e},z={Ok:function(e){return{type:"Ok",value:e}},Err:function(e){return{type:"Err",value:e}},isOk:function(e){return"Ok"===e.type},isErr:function(e){return"Err"===e.type}},W=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={apiResult:null},a.loadData=function(){var e={repeat:0!==a.props.repeatOptions.interval?a.loadData:null,interval:a.props.repeatOptions.interval};a.dataHandle=Q(a.props.apiCall(),e),a.dataHandle.promise.then(function(e){a.setState({apiResult:z.Ok(e)})}).catch(function(e){if(!a.props.repeatOptions.ignoreCancel)throw e;U(e)}).catch(function(e){a.setState({apiResult:z.Err(e)})})},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.dataHandle.cancel()}},{key:"render",value:function(){return this.state.apiResult?z.isOk(this.state.apiResult)?this.props.renderOk(this.state.apiResult.value,this.loadData):this.props.renderErr(this.state.apiResult.value,this.loadData):this.props.renderInitial()}}]),t}(r.Component);W.defaultProps={repeatOptions:{ignoreCancel:!0,interval:0}};var X=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return"enabled"===this.props.status?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-success"}),"\xa0",e("Enabled")):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-danger"}),"\xa0",e("Disabled"))}}]),t}(r.Component),G=Object(y.b)("common")(X),J=function(e){return s.a.createElement(W,{apiCall:P.getStatus,repeatOptions:{interval:5e3},renderInitial:function(){return s.a.createElement(G,Object.assign({status:"loading"},e))},renderOk:function(t){return s.a.createElement(G,Object.assign({status:t.status},e))},renderErr:function(){return s.a.createElement(G,Object.assign({status:"unknown"},e))}})},Y=function(e){e.preventDefault(),e.target.parentElement.classList.toggle("open")},Z=function(e,t){return e.map(function(e,a){return e.auth&&!P.loggedIn?null:e.authStrict&&e.auth!==P.loggedIn?null:e.children?function(e,t,a){return s.a.createElement("li",{key:t,className:function(e,t){return t.location.pathname.startsWith(e)?"nav-item nav-dropdown open":"nav-item nav-dropdown"}(e.url,a)},s.a.createElement("button",{className:"nav-link nav-dropdown-toggle",onClick:Y},s.a.createElement("i",{className:"nav-icon "+e.icon}),a.t(e.name)),s.a.createElement("ul",{className:"nav-dropdown-items"},Z(e.children,a)))}(e,a,t):function(e,t,a){return s.a.createElement(O.m,{key:t},s.a.createElement(k.a,{to:e.url,onClick:v,className:"nav-link",activeClassName:"active"},s.a.createElement("i",{className:"nav-icon "+e.icon}),a.t(e.name)))}(e,a,t)})},$=Object(y.b)(["common","location"])(function(e){var t=e.items,a=Object(u.a)(e,["items"]);return s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"sidebar-nav"},s.a.createElement(O.l,null,s.a.createElement("li",{className:"nav-title"},s.a.createElement("img",{src:w.a,className:"img-responsive pull-left",style:{height:"67px"},alt:""}),s.a.createElement("p",{className:"pull-left",style:{paddingLeft:"15px",textTransform:"initial",fontSize:"14px",marginBottom:"initial",lineHeight:"14px",color:"white"}},a.t("Status")),s.a.createElement("br",null),s.a.createElement("span",{style:{textTransform:"initial",paddingLeft:"15px"}},s.a.createElement(J,null))),Z(t,a))))}),K=Object(y.b)("footer")(function(e){e.t;return null}),ee=Object(y.b)(["common","footer"])(function(e){var t=e.t;return s.a.createElement("footer",{className:"app-footer"},s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-paypal"}),s.a.createElement("strong",null,s.a.createElement("a",{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3J2L3Z4DHW9UY"},"\xa0",t("Donate")))," ",t("if you found this useful")),s.a.createElement(K,e))}),te=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-success stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-globe fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.totalQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Total Queries ({{count}} clients)",{count:this.props.uniqueClients}))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-primary stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-hand-stop-o fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.blockedQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Queries Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-warning stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-pie-chart fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.percentBlocked),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Percent Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-danger stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-list-alt fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.gravityDomains),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Domains On Blocklist"))))))}}]),t}(r.Component),ae={totalQueries:"Lost",blockedQueries:"Connection",percentBlocked:"To",gravityDomains:"API",uniqueClients:""},ne={blockedQueries:"---",totalQueries:"---",percentBlocked:"---",gravityDomains:"---",uniqueClients:"---"},re=Object(y.b)(["common","dashboard"])(te),se=function(e){return s.a.createElement(W,{apiCall:P.getSummary,repeatOptions:{interval:5e3},renderInitial:function(){return s.a.createElement(re,Object.assign({},ne,e))},renderOk:function(t){return s.a.createElement(re,Object.assign({},function(e){return{totalQueries:Object.keys(e.total_queries).reduce(function(t,a){return t+e.total_queries[a]},0).toLocaleString(),blockedQueries:e.blocked_queries.toLocaleString(),percentBlocked:e.percent_blocked.toFixed(2).toLocaleString()+"%",gravityDomains:e.gravity_size.toLocaleString(),uniqueClients:e.total_clients}}(t),e))},renderErr:function(){return s.a.createElement(re,Object.assign({},ae,e))}})},ie=a(37),oe=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t,t={labels:this.props.labels,datasets:[{label:e("Total Queries"),data:this.props.domains_over_time,fill:!0,backgroundColor:"rgba(220,220,220,0.5)",borderColor:"rgba(0, 166, 90,.8)",pointBorderColor:"rgba(0, 166, 90,.8)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"},{label:e("Blocked Queries"),data:this.props.blocked_over_time,fill:!0,backgroundColor:"rgba(0,192,239,0.5)",borderColor:"rgba(0,192,239,1)",pointBorderColor:"rgba(0,192,239,1)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"}]},a={tooltips:{enabled:!0,mode:"x-axis",callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=V(n)+":"+V(r-5)+":00",i=V(n)+":"+V(r+4)+":59";return e("Queries from {{from}} to {{to}}",{from:s,to:i})},label:function(e,t){if(1===e.datasetIndex){var a=0,n=parseInt(t.datasets[0].data[e.index],10),r=parseInt(t.datasets[1].data[e.index],10);return n>0&&(a=100*r/n),t.datasets[e.datasetIndex].label+": "+e.yLabel+" ("+a.toFixed(1)+"%)"}return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1};return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Queries Over Last 24 Hours")),s.a.createElement("div",{className:"card-body"},s.a.createElement(ie.b,{width:970,height:170,data:t,options:a})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),le={loading:!0,labels:[],domains_over_time:[],blocked_over_time:[]},ce=Object(y.b)("dashboard")(oe),de=function(e){return s.a.createElement(W,{apiCall:P.getHistoryGraph,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(ce,Object.assign({},le,e))},renderOk:function(t){return s.a.createElement(ce,Object.assign({},function(e){return{loading:!1,labels:(e=e.slice(0,-1)).map(function(e){return new Date(1e3*e.timestamp)}),domains_over_time:e.map(function(e){return e.total_queries}),blocked_over_time:e.map(function(e){return e.blocked_queries})}}(t),e))},renderErr:function(){return s.a.createElement(ce,Object.assign({},le,e))}})},ue=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={tooltip:null},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tooltip,a=Date.now();if(this.props.handler.custom=function(t){0===t.opacity&&e.setState({tooltip:t});var n=Date.now();n-a<50||(a=n,e.setState({tooltip:t}))},null===t||0===t.opacity||null===this.props.chart.current)return null;var n=this.props.chart.current.chartInstance.canvas.getBoundingClientRect(),r=t.caretX;document.offsetWidth-t.caretX<400&&(r=document.offsetWidth-400),t.caretX<100&&(r=100);var i={opacity:1,left:n.left+r+"px",top:n.top+t.caretY+window.scrollY+"px",fontFamily:t._bodyFontFamily,fontSize:t.bodyFontSize+"px",fontStyle:t._bodyFontStyle,padding:t.yPadding+"px "+t.xPadding+"px"},o=[];return t.body&&(o=t.body.map(function(e){return e.lines}).map(function(e,a){return{data:e[0],colors:t.labelColors[a]}})),o.sort(function(e,t){return e.data.split(": ")[0].localeCompare(t.data.split(": ")[0])}),s.a.createElement("div",{className:"chartjs-tooltip",style:i},s.a.createElement("table",null,s.a.createElement("thead",null,t.title.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("th",null,e))})),s.a.createElement("tbody",null,o.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"chartjs-tooltip-key",style:{background:e.colors.backgroundColor,borderColor:e.colors.borderColor,borderWidth:"2px"}}),e.data))}))))}}]),t}(r.Component),me=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(L.a)(this,Object(q.a)(t).call(this,e))).graphRef=s.a.createRef(),a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t,t={tooltips:{enabled:!1,mode:"x-axis",custom:function(){return"placeholder"},itemSort:function(e,t){return t.yLabel-e.yLabel},callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=V(n)+":"+V(r-5)+":00",i=V(n)+":"+V(r+4)+":59";return e("Client activity from {{from}} to {{to}}",{from:s,to:i})},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]},maintainAspectRatio:!1};return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Clients Over Last 24 Hours")),s.a.createElement("div",{className:"card-body"},s.a.createElement(ie.b,{width:970,height:170,data:{labels:this.props.labels,datasets:this.props.datasets},options:t,ref:this.graphRef})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null,o.a.createPortal(s.a.createElement(ue,{chart:this.graphRef,handler:t.tooltips}),document.body))}}]),t}(r.Component),pe={loading:!0,labels:[],datasets:[]},he=Object(y.b)("dashboard")(me),fe=function(e){return s.a.createElement(W,{apiCall:P.getClientsGraph,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(he,Object.assign({},pe,e))},renderOk:function(t){return s.a.createElement(he,Object.assign({},function(e){var t=e.over_time.slice(0,-1),a=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],n=t.map(function(e){return new Date(1e3*e.timestamp)}),r=[],s=0,i=!0,o=!1,l=void 0;try{for(var c,d=e.clients[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;r.push({label:0!==u.name.length?u.name:u.ip,backgroundColor:s<a.length?a[s]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0"),pointRadius:0,pointHitRadius:5,pointHoverRadius:5,cubicInterpolationMode:"monotone",data:[]}),s++}}catch(E){o=!0,l=E}finally{try{i||null==d.return||d.return()}finally{if(o)throw l}}var m=!0,p=!1,h=void 0;try{for(var f,g=t[Symbol.iterator]();!(m=(f=g.next()).done);m=!0){var b=f.value;for(var v in r)r.hasOwnProperty(v)&&r[v].data.push(b.data[v])}}catch(E){p=!0,h=E}finally{try{m||null==g.return||g.return()}finally{if(p)throw h}}return r.sort(function(e,t){return e.label.localeCompare(t.label)}),{labels:n,datasets:r,loading:!1}}(t),e))},renderErr:function(){return s.a.createElement(he,Object.assign({},pe,e))}})},ge=a(151),be=a(61),ve=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(L.a)(this,Object(q.a)(t).call(this,e))).handleClick=function(e,t){var n=a.chartRef.current.chartInstance;n.legend.options.onClick.call(n,e,n.legend.legendItems[t]),a.forceUpdate()},a.chartRef=s.a.createRef(),a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t={legend:{display:!1},tooltips:{enabled:!0,callbacks:{title:function(){return e.props.title},label:function(e,t){var a=t.datasets[e.datasetIndex],n=t.labels[e.index];return n+": "+a.data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},a=null!==this.chartRef.current?this.chartRef.current.chartInstance.getDatasetMeta(0).data:this.props.data.map(function(){return{hidden:!1}});return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"float-left",style:{width:"67%"}},s.a.createElement(ie.a,{width:100,height:250,options:t,ref:this.chartRef,data:{datasets:[{data:Object(be.a)(this.props.data),backgroundColor:this.props.colors}],labels:this.props.labels}})),s.a.createElement("div",{className:"float-right",style:{width:"33%"}},s.a.createElement("ul",{className:"chart-legend"},this.props.labels.map(function(t,a){return[t,e.props.colors[a]]}).map(function(t,n){var r=Object(ge.a)(t,2),i=r[0],o=r[1];return s.a.createElement("li",{key:n,className:a[n]&&a[n].hidden?"strike":"",onClick:function(t){return e.handleClick(t,n)}},s.a.createElement("span",{style:{backgroundColor:o}}),i)})))),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Ee={loading:!0,data:[],colors:[],labels:[]},ye=function(e){var t=e.apiCall,a=e.title,n=e.apiHandler,r=Object(u.a)(e,["apiCall","title","apiHandler"]);return s.a.createElement(W,{apiCall:t,renderInitial:function(){return s.a.createElement(ve,Object.assign({title:a},Ee,r))},renderOk:function(e){return s.a.createElement(ve,Object.assign({title:a},function(e){var t=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],a=[],n=[],r=[],s=0,i=!0,o=!1,l=void 0;try{for(var c,d=e[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;a.push(u.percent),n.push(0!==u.name.length?u.name:u.ip),r.push(s<t.length?t[s]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0")),s++}}catch(m){o=!0,l=m}finally{try{i||null==d.return||d.return()}finally{if(o)throw l}}return{loading:!1,data:a,colors:r,labels:n}}(n(e)),r))},renderErr:function(){return s.a.createElement(ve,Object.assign({title:a},Ee,r))}})},ke=Object(y.b)("dashboard")(function(e){var t=e.t;return s.a.createElement(ye,{title:t("Query Types"),apiCall:P.getQueryTypes,apiHandler:function(e){var t=e.reduce(function(e,t){return e+t.count},0);return e.map(function(e){return{name:e.name,percent:t>0?100*e.count/t:0}})}})}),Oe=Object(y.b)("dashboard")(function(e){var t=e.t;return s.a.createElement(ye,{title:t("Queries Answered By Destination"),apiCall:P.getUpstreams,apiHandler:function(e){return e.upstreams.map(function(t){return{name:t.name,ip:t.ip,percent:100*t.count/e.total_queries}})}})}),je=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).generateTable=function(){return a.props.isEmpty(a.props.data)?a.props.emptyMessage:s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("tbody",null,s.a.createElement("tr",null,a.props.headers.map(function(e,t){return s.a.createElement("th",{key:t},e)})),a.props.generateRows(a.props.data)))},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{style:{overflowX:"auto"}},this.generateTable())),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component);je.defaultProps={loading:!0,title:"",data:{},headers:[],emptyMessage:"",isEmpty:function(){return!0},generateRows:function(){return null}};var we=function(e){var t=e.title,a=e.apiCall,n=e.initialData,r=e.headers,i=e.emptyMessage,o=e.isEmpty,l=e.apiHandler,c=e.generateRows,d=Object(u.a)(e,["title","apiCall","initialData","headers","emptyMessage","isEmpty","apiHandler","generateRows"]);return s.a.createElement(W,{apiCall:a,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(je,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:o,generateRows:c,data:n,loading:!0},d))},renderOk:function(e){return s.a.createElement(je,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:o,generateRows:c,data:l(e),loading:!1},d))},renderErr:function(){return s.a.createElement(je,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:o,generateRows:c,data:n,loading:!0},d))}})},Ne=function(e){return{totalQueries:e.total_queries,topDomains:e.top_domains}},Ce=Object(y.b)(["common","dashboard"])(function(e){var t=e.t,a=Object(u.a)(e,["t"]);return s.a.createElement(we,Object.assign({},a,{title:t("Top Permitted Domains"),initialData:{totalQueries:0,topDomains:[]},headers:[t("Domain"),t("Hits"),t("Frequency")],emptyMessage:t("No Domains Found"),isEmpty:function(e){return 0===e.topDomains.length},apiCall:P.getTopDomains,apiHandler:Ne,generateRows:function(e){return function(t){return t.topDomains.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-success",style:{width:n+"%"}}))))})}}(t)}))}),Ie=function(e){return{totalBlocked:e.blocked_queries,topBlocked:e.top_domains}},xe=Object(y.b)(["common","dashboard"])(function(e){var t=e.t,a=Object(u.a)(e,["t"]);return s.a.createElement(we,Object.assign({},a,{title:t("Top Blocked Domains"),initialData:{totalBlocked:0,topBlocked:[]},headers:[t("Domain"),t("Hits"),t("Frequency")],emptyMessage:t("No Domains Found"),isEmpty:function(e){return 0===e.topBlocked.length},apiCall:P.getTopBlocked,apiHandler:Ie,generateRows:function(e){return function(t){return t.topBlocked.map(function(a){var n=a.count/t.totalBlocked*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalBlocked.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-warning",style:{width:n+"%"}}))))})}}(t)}))}),Se=function(e){return{totalQueries:e.total_queries,topClients:e.top_clients}},Ae=Object(y.b)(["common","dashboard"])(function(e){var t=e.t,a=Object(u.a)(e,["t"]);return s.a.createElement(we,Object.assign({},a,{title:t("Top Clients"),initialData:{totalQueries:0,topClients:[]},headers:[t("Client"),t("Requests"),t("Frequency")],emptyMessage:t("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:P.getTopClients,apiHandler:Se,generateRows:function(e){return function(t){return t.topClients.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-primary",style:{width:n+"%"}}))))})}}(t)}))}),De=a(150),_e=a(60),Re=(a(317),function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).updateHandler=null,a.state={history:[],cursor:null,loading:!1,atEnd:!1},a.getRowProps=function(e,t){return t&&0!==t.row.status.code?{style:{color:[1,4,5,6].includes(t.row.status.code)?"red":"green"}}:{}},a.fetchQueries=function(e){a.state.atEnd||a.state.loading||a.state.history.length>=(e.page+2)*e.pageSize||(a.setState({loading:!0}),a.updateHandler=Q(P.getHistory({cursor:a.state.cursor})),a.updateHandler.promise.then(function(e){a.setState({loading:!1,atEnd:null===e.cursor,cursor:e.cursor,history:a.state.history.concat(e.history)})}).catch(U))},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(De.a,{className:"-striped",style:{background:"white",marginBottom:"24px",lineHeight:1},columns:Pe(e),showPaginationTop:!0,sortable:!1,filterable:!1,data:this.state.history,loading:this.state.loading,onFetchData:this.fetchQueries,getTrProps:this.getRowProps,ofText:this.state.atEnd?"of":"of at least",PadRowComponent:function(){return s.a.createElement("span",null,"\xa0",s.a.createElement("br",null),"\xa0")}})}}]),t}(r.Component)),Te=function(e){return[e("Unknown"),e("Blocked (gravity)"),e("Allowed (forwarded)"),e("Allowed (cached)"),e("Blocked (regex/wildcard)"),e("Blocked (blacklist)"),e("Blocked (external)")]},He=["ERROR","A","AAAA","ANY","SRV","SOA","PTR","TXT"],Pe=function(e){return[{Header:e("Time"),id:"time",accessor:function(e){return e.timestamp},width:70,Cell:function(e){var t=new Date(1e3*e.value),a=t.toLocaleDateString(_e.a.language,{month:"short"}),n=V(t.getDate()),i=V(t.getHours()),o=V(t.getMinutes()),l=V(t.getSeconds());return s.a.createElement(r.Fragment,null,a+", "+n,s.a.createElement("br",null),i+":"+o+":"+l)}},{Header:e("Type"),id:"type",accessor:function(e){return He[e.type]},width:50},{Header:e("Domain"),id:"domain",accessor:function(e){return e.domain},minWidth:150,className:"horizontal-scroll"},{Header:e("Client"),id:"client",accessor:function(e){return e.client},minWidth:120,className:"horizontal-scroll"},{Header:e("Status"),id:"status",accessor:function(e){return{code:e.status,dnssec:e.dnssec}},width:140,Cell:function(t){return s.a.createElement(r.Fragment,null,Te(e)[t.value.code],s.a.createElement("br",null),function(e){return["",e("Secure"),e("Insecure"),e("Bogus"),e("Abandoned"),e("Unknown")]}(e)[t.value.dnssec])},filterMethod:function(t,a){return Te(e)[a[t.id].code].toLowerCase().includes(t.value.toLowerCase())}},{Header:e("Reply"),id:"reply",accessor:function(e){return{type:e.reply,time:e.response_time}},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:"black"}},function(e){return[e("Unknown"),"NODATA","NXDOMAIN","CNAME","IP","DOMAIN","RRNAME"]}(e)[t.value.type],s.a.createElement("br",null),"("+(t.value.time/10).toLocaleString()+"ms)")}},{Header:e("Action"),width:100,filterable:!1,Cell:function(t){return[1,4,5].includes(t.row.status.code)?s.a.createElement("button",{type:"button",className:"btn btn-success full-width",onClick:function(){return P.addWhitelist(t.row.domain)}},e("Whitelist")):[2,3,6].includes(t.row.status.code)?s.a.createElement("button",{type:"button",className:"btn btn-danger full-width",onClick:function(){return P.addBlacklist(t.row.domain)}},e("Blacklist")):void 0}}]},Fe=Object(y.b)(["common","query-log"])(Re),Be=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={domain:"",isValid:!0},a.handleChange=function(e){return a.setState({domain:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.domain;if(0!==t.length){var n=a.props.isValid(t);a.setState({isValid:n}),n?(a.props.onEnter(t),a.setState({domain:""})):a.props.onValidationError()}},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.placeholder,n=e.onRefresh;return s.a.createElement("form",{className:"form-group input-group",onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.isValid?"":"is-invalid"),placeholder:a,value:this.state.domain,onChange:this.handleChange,disabled:!P.loggedIn}),s.a.createElement("span",{className:"btn-group input-group-append"},P.loggedIn?s.a.createElement("button",{className:"btn border-secondary",type:"submit"},t("Add")):null,s.a.createElement("button",{onClick:n,className:"btn border-secondary",type:"button"},s.a.createElement("i",{className:"fa fa-refresh"}))))}}]),t}(r.Component);Be.defaultProps={placeholder:""};var Le=Object(y.b)(["common","lists"])(Be),qe=function(e){return s.a.createElement("div",{className:"alert alert-"+e.type+" alert-dismissible fade show"},s.a.createElement("button",{type:"button",className:"close",onClick:e.onClick},"\xd7"),e.message)};qe.defaultProps={onClick:function(){}};var Me=qe,Ve=Object(y.b)(["common","lists"])(function(e){var t,a=e.domains,n=e.onRemove,r=e.t;return t=a.length>0?a.map(function(e){return s.a.createElement("li",{key:e,className:"list-group-item"},P.loggedIn?(t=e,s.a.createElement(O.a,{color:"danger",size:"sm",className:"pull-right",style:{marginTop:"2px"},onClick:function(){return n(t)}},s.a.createElement("span",{className:"fa fa-trash-o"}))):null,s.a.createElement("span",{style:{display:"table-cell",verticalAlign:"middle",height:"32px"}},e));var t}):s.a.createElement("div",{className:"alert alert-info",role:"alert"},r("There are no domains in this list")),s.a.createElement("ul",{className:"list-group"},t)}),Qe=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={domains:[],message:"",messageType:""},a.onEnter=function(e){if(a.state.domains.includes(e))a.onAlreadyAdded(e);else{var t=a.state.domains.slice();a.addHandler=Q(a.props.add(e)),a.addHandler.promise.then(function(){a.onAdded(e)}).catch(U).catch(function(){a.onAddFailed(e,t)}),a.onAdding(e)}},a.onAdding=function(e){return a.setState({message:a.props.t("Adding {{domain}}...",{domain:e}),messageType:"info"})},a.onAlreadyAdded=function(e){return a.setState({message:a.props.t("{{domain}} is already added",{domain:e}),messageType:"danger"})},a.onAdded=function(e){return a.setState(function(t){return{domains:Object(be.a)(t.domains).concat([e]),message:a.props.t("Successfully added {{domain}}",{domain:e}),messageType:"success"}})},a.onAddFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to add {{domain}}",{domain:e}),messageType:"danger"})},a.onRemoved=function(e){return a.setState(function(t){return{domains:t.domains.filter(function(t){return t!==e})}})},a.onRemoveFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to remove {{domain}}",{domain:e}),messageType:"danger"})},a.onRemove=function(e){if(a.state.domains.includes(e)){var t=a.state.domains.slice();a.removeHandler=Q(a.props.remove(e)),a.removeHandler.promise.catch(U).catch(function(){a.onRemoveFailed(e,t)}),a.onRemoved(e)}},a.onRefresh=function(){a.refreshHandler=Q(a.props.refresh()),a.refreshHandler.promise.then(function(e){a.setState({domains:e})}).catch(U)},a.handleValidationError=function(){a.setState({message:a.props.validationErrorMsg,messageType:"danger"})},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.onRefresh()}},{key:"componentWillUnmount",value:function(){this.addHandler&&this.addHandler.cancel(),this.removeHandler&&this.removeHandler.cancel(),this.refreshHandler&&this.refreshHandler.cancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{marginBottom:"24px"}},s.a.createElement("h2",{className:"text-center"},this.props.title),s.a.createElement("br",null),s.a.createElement(Le,{placeholder:this.props.placeholder,onEnter:this.onEnter,onRefresh:this.onRefresh,isValid:this.props.isValid,onValidationError:this.handleValidationError}),this.props.note,this.state.message?s.a.createElement(Me,{message:this.state.message,type:this.state.messageType,onClick:function(){return e.setState({message:""})}}):null,s.a.createElement(Ve,{domains:this.state.domains,onRemove:this.onRemove}))}}]),t}(r.Component);Qe.defaultProps={note:""};var Ue=Object(y.b)(["common","lists"])(Qe);function ze(e){if(e.length>253)return!1;var t=e.split(".");return!t.some(function(e){return e.length<1||e.length>63})&&(!Xe(t.join(""))&&/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)+(\.([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*$/.test(e))}function We(e){return!(e.split(".").length<2)&&ze(e)}function Xe(e){return/^[0-9]+$/.test(e)}function Ge(e){try{new RegExp(e)}catch(t){return!1}return!0}function Je(e){var t=e.split(".");return 4===t.length&&t.every(function(e){return Xe(e)&&parseInt(e)<256})}var Ye=Object(y.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(Ue,Object.assign({title:t("Whitelist"),placeholder:t("Add a domain (example.com or sub.example.com)"),add:P.addWhitelist,remove:P.removeWhitelist,refresh:P.getWhitelist,isValid:We,validationErrorMsg:t("Not a valid domain")},e))}),Ze=Object(y.b)("location")(function(e){var t=e.t;return s.a.createElement(Ue,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain (example.com or sub.example.com)"),add:P.addBlacklist,remove:P.removeBlacklist,refresh:P.getBlacklist,isValid:We,validationErrorMsg:t("Not a valid domain")},e))}),$e=Object(y.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(Ue,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),add:P.addRegexlist,remove:P.removeRegexlist,refresh:P.getRegexlist,isValid:Ge,validationErrorMsg:t("Not a valid regular expression")},e))}),Ke=a(0),et=a.n(Ke),tt=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement("div",{className:"card border-0 bg-primary"},s.a.createElement("div",{className:"card-block"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:this.props.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,this.props.name),s.a.createElement("p",null,t("Version"),":"," ","master"===this.props.branch?this.props.tag:"vDev"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},t("Details")),s.a.createElement(O.c,{isOpen:!this.state.collapsed},s.a.createElement("table",{className:"table table-borderless table-sm table-condensed",style:{marginTop:"1rem",marginBottom:"0"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t("Branch")),s.a.createElement("td",null,this.props.branch)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Tag")),s.a.createElement("td",null,this.props.tag)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Hash")),s.a.createElement("td",null,this.props.hash)))))))}}]),t}(r.Component),at=Object(y.b)(["common","settings"])(tt),nt=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(at,{name:e("Core"),icon:"fa fa-dot-circle-o fa-2x",branch:this.props.core.branch,hash:this.props.core.hash,tag:this.props.core.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(at,{name:e("FTL"),icon:"fa fa-industry fa-2x",branch:this.props.ftl.branch,hash:this.props.ftl.hash,tag:this.props.ftl.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(at,{name:e("API"),icon:"fa fa-bullseye fa-2x",branch:this.props.api.branch,hash:this.props.api.hash,tag:this.props.api.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(at,{name:e("Web"),icon:"fa fa-list-alt fa-2x",branch:this.props.web.branch,hash:this.props.web.hash,tag:this.props.web.tag})))}}]),t}(r.Component);nt.versionPropType=et.a.shape({branch:et.a.string.isRequired,hash:et.a.string.isRequired,tag:et.a.string.isRequired}).isRequired;var rt={api:{branch:"unknown",hash:"unknown",tag:"unknown"},core:{branch:"unknown",hash:"unknown",tag:"unknown"},ftl:{branch:"unknown",hash:"unknown",tag:"unknown"},web:{branch:"unknown",hash:"unknown",tag:"unknown"}},st=Object(y.b)(["common"])(nt),it=function(e){return s.a.createElement(W,{apiCall:P.getVersion,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(st,Object.assign({},rt,e))},renderOk:function(t){return s.a.createElement(st,Object.assign({},t,e))},renderErr:function(){return s.a.createElement(st,Object.assign({},rt,e))}})},ot=a(57),lt=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"",showAlert:!1,processing:!1,settings:{active:!1,ip_start:"",ip_end:"",router_ip:"",lease_time:"",domain:"",ipv6_support:!1}},a.loadDHCPInfo=function(){a.loadHandler=Q(P.getDHCPInfo()),a.loadHandler.promise.then(function(e){a.setState({settings:{active:e.active,ip_start:e.ip_start,ip_end:e.ip_end,router_ip:e.router_ip,lease_time:e.lease_time,domain:e.domain,ipv6_support:e.ipv6_support}})}).catch(U)},a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState(function(t){return{settings:Object(N.a)({},t.settings,Object(ot.a)({},e,r))}})}},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=Q(P.updateDHCPInfo(a.state.settings)),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(U).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isSettingValid=function(e,t){return!a.state.settings.active&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.loadDHCPInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isSettingValid(this.state.settings.ip_start,Je),a=this.isSettingValid(this.state.settings.ip_end,Je),n=this.isSettingValid(this.state.settings.router_ip,Je),r=this.isSettingValid(this.state.settings.lease_time,Xe),i=this.isSettingValid(this.state.settings.domain,ze),o=this.state.showAlert?s.a.createElement(Me,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(O.d,{onSubmit:this.saveSettings},o,s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",checked:this.state.settings.active,onChange:this.onChange("active","checked")}),e("Enabled"))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"startIP",sm:2},e("Start IP")),s.a.createElement(O.b,{sm:10},s.a.createElement(O.f,{id:"startIP",disabled:!this.state.settings.active,value:this.state.settings.ip_start,onChange:this.onChange("ip_start","value"),invalid:!t}))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"endIP",sm:2},e("End IP")),s.a.createElement(O.b,{sm:10},s.a.createElement(O.f,{id:"endIP",disabled:!this.state.settings.active,value:this.state.settings.ip_end,onChange:this.onChange("ip_end","value"),invalid:!a}))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"routerIP",sm:2},e("Router IP")),s.a.createElement(O.b,{sm:10},s.a.createElement(O.f,{id:"routerIP",disabled:!this.state.settings.active,value:this.state.settings.router_ip,onChange:this.onChange("router_ip","value"),invalid:!n}))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"leaseTime",sm:2},e("Lease Time")),s.a.createElement(O.b,{sm:10},s.a.createElement(O.g,null,s.a.createElement(O.f,{id:"leaseTime",disabled:!this.state.settings.active,value:this.state.settings.lease_time,onChange:this.onChange("lease_time","value"),invalid:!r}),s.a.createElement(O.h,{addonType:"append"},"Hours")))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"domain",sm:2},e("Domain")),s.a.createElement(O.b,{sm:10},s.a.createElement(O.f,{id:"domain",disabled:!this.state.settings.active,value:this.state.settings.domain,onChange:this.onChange("domain","value"),invalid:!i}))),s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.ipv6_support,onChange:this.onChange("ipv6_support","checked")}),e("IPv6 Support"))),s.a.createElement(O.a,{type:"submit",disabled:this.state.processing||!t||!a||!n||!r||!i},e("Apply")))}}]),t}(r.Component),ct=Object(y.b)(["common","settings","api-errors"])(lt),dt=function(e){var t=e.address,a=e.onRemove;return s.a.createElement(O.k,null,t,s.a.createElement(O.a,{color:"danger",size:"sm",className:"pull-right",onClick:a},s.a.createElement("span",{className:"fa fa-trash-o"})))},ut=a(146),mt=[{name:"OpenDNS (ECS)",primaryIpv4:"208.67.222.222",secondaryIpv4:"208.67.220.220",primaryIpv6:"2620:0:ccc::2",secondaryIpv6:"2620:0:ccd::2"},{name:"Google (ECS)",primaryIpv4:"8.8.8.8",secondaryIpv4:"8.8.4.4",primaryIpv6:"2001:4860:4860:0:0:0:0:8888",secondaryIpv6:"2001:4860:4860:0:0:0:0:8844"},{name:"Quad9 (filtered, DNSSEC)",primaryIpv4:"9.9.9.9",secondaryIpv4:"149.112.112.112",primaryIpv6:"2620:fe::fe",secondaryIpv6:"2620:fe::9"},{name:"Quad9 (unfiltered, no DNSSEC)",primaryIpv4:"9.9.9.10",secondaryIpv4:"149.112.112.10",primaryIpv6:"2620:fe::10",secondaryIpv6:"2620:fe::fe:10"},{name:"Quad9 (filtered + ECS)",primaryIpv4:"9.9.9.11",secondaryIpv4:"149.112.112.11",primaryIpv6:"2620:fe::11",secondaryIpv6:""},{name:"Cloudflare",primaryIpv4:"1.1.1.1",secondaryIpv4:"1.0.0.1",primaryIpv6:"2606:4700:4700::1111",secondaryIpv6:"2606:4700:4700::1001"},{name:"Level3",primaryIpv4:"4.2.2.1",secondaryIpv4:"4.2.2.2",primaryIpv6:"",secondaryIpv6:""},{name:"Comodo",primaryIpv4:"8.26.56.26",secondaryIpv4:"8.20.247.20",primaryIpv6:"",secondaryIpv6:""},{name:"DNS.WATCH",primaryIpv4:"84.200.69.80",secondaryIpv4:"84.200.70.40",primaryIpv6:"2001:1608:10:25:0:0:1c04:b12f",secondaryIpv6:"2001:1608:10:25:0:0:9249:d69b"}].flatMap(function(e){var t=function(t,a,n){return{label:e.name+" "+a+" "+n+" ("+t+")",address:t}},a=[];return e.primaryIpv4.length>0&&a.push(t(e.primaryIpv4,"Primary","IPv4")),e.secondaryIpv4.length>0&&a.push(t(e.secondaryIpv4,"Secondary","IPv4")),e.primaryIpv6.length>0&&a.push(t(e.primaryIpv6,"Primary","IPv6")),e.secondaryIpv6.length>0&&a.push(t(e.secondaryIpv6,"Secondary","IPv6")),a}),pt=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(L.a)(this,Object(q.a)(t).call(this,e))).state={address:"",selected:[]},a.getAddress=function(){return 0===a.state.selected.length?a.state.address:a.state.selected[0].address},a.typeahead=s.a.createRef(),a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.isValid(this.getAddress());return s.a.createElement(O.k,null,s.a.createElement(O.g,null,s.a.createElement(ut.Typeahead,{onInputChange:function(t){return e.setState({address:t})},onChange:function(t){return e.setState({selected:t})},options:mt.filter(function(t){return!e.props.upstreams.includes(t.address)}),selected:this.state.selected,emptyLabel:t("Detected custom upstream server"),bodyContainer:!0,ref:this.typeahead}),s.a.createElement(O.h,{addonType:"append"},s.a.createElement(O.a,{color:"success",size:"sm",onClick:function(){e.props.onAdd(e.getAddress()),e.setState({address:"",selected:[]}),e.typeahead.current.getInstance().clear()},disabled:!a},s.a.createElement("span",{className:"fa fa-plus"})))))}}]),t}(r.Component),ht=Object(y.b)("settings")(pt),ft=function(e,t){return!t.includes(e)&&function(e){var t=e.split("#");return!!Je(t[0])&&(1===t.length||2===t.length&&Xe(t[1]))}(e)},gt=function(e){var t=e.upstreams,a=e.onAdd,n=e.onRemove;return s.a.createElement(O.j,{style:{overflowY:"scroll",maxHeight:"350px"}},t.map(function(e){return s.a.createElement(dt,{key:e,onRemove:function(){return n(e)},address:e})}),s.a.createElement(ht,{onAdd:a,isValid:function(e){return ft(e,t)},upstreams:t}))},bt=function(e){var t=e.settings,a=e.onUpdate,n=e.isRouterIpValid,i=e.isDomainValid,o=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",checked:t.enabled,onChange:function(e){return a(Object(N.a)({},t,{enabled:e.target.checked}))}}),o("Enabled"))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"routerIP",sm:5},o("Router IP")),s.a.createElement(O.b,{sm:7},s.a.createElement(O.f,{id:"routerIP",disabled:!t.enabled,value:t.routerIp,onChange:function(e){return a(Object(N.a)({},t,{routerIp:e.target.value}))},invalid:!n}))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"localDomain",sm:5},o("Local Domain Name")),s.a.createElement(O.b,{sm:7},s.a.createElement(O.f,{id:"localDomain",disabled:!t.enabled,value:t.domain,onChange:function(e){return a(Object(N.a)({},t,{domain:e.target.value}))},invalid:!i}))))},vt=function(e){var t=e.settings,a=e.onUpdate,n=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{for:"listeningBehavior",sm:5},n("Interface listening behavior")),s.a.createElement(O.b,{sm:7},s.a.createElement(O.f,{id:"listeningBehavior",type:"select",value:t.listeningType,onChange:function(e){return a(Object(N.a)({},t,{listeningType:e.target.value}))}},s.a.createElement("option",null,"all"),s.a.createElement("option",null,"local"),s.a.createElement("option",null,"single")))),s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",checked:t.fqdnRequired,onChange:function(e){return a(Object(N.a)({},t,{fqdnRequired:e.target.checked}))}}),n("Forward FQDNs only"))),s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",checked:t.bogusPriv,onChange:function(e){return a(Object(N.a)({},t,{bogusPriv:e.target.checked}))}}),n("Only forward public reverse lookups"))),s.a.createElement(O.e,{check:!0},s.a.createElement(O.i,{check:!0},s.a.createElement(O.f,{type:"checkbox",checked:t.dnssec,onChange:function(e){return a(Object(N.a)({},t,{dnssec:e.target.checked}))}}),n("Use DNSSEC"))))},Et=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"",showAlert:!1,processing:!1,upstreamDns:[],conditionalForwarding:{enabled:!1,routerIp:"",domain:""},options:{fqdnRequired:!1,bogusPriv:!1,dnssec:!1,listeningType:"single"}},a.loadDNSInfo=function(){a.loadHandler=Q(P.getDNSInfo()),a.loadHandler.promise.then(function(e){var t=e.conditional_forwarding.domain,n=0===t.length?"lan":t;a.setState({upstreamDns:e.upstream_dns,conditionalForwarding:{enabled:e.conditional_forwarding.enabled,routerIp:e.conditional_forwarding.router_ip,domain:n},options:{fqdnRequired:e.options.fqdn_required,bogusPriv:e.options.bogus_priv,dnssec:e.options.dnssec,listeningType:e.options.listening_type}})}).catch(U)},a.handleUpstreamAdd=function(e){a.setState({upstreamDns:a.state.upstreamDns.concat(e)})},a.handleUpstreamRemove=function(e){a.setState({upstreamDns:a.state.upstreamDns.filter(function(t){return t!==e})})},a.handleConditionalForwardingUpdate=function(e){a.setState({conditionalForwarding:e})},a.handleDnsOptionsUpdate=function(e){a.setState({options:e})},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=Q(P.updateDNSInfo({upstream_dns:a.state.upstreamDns,conditional_forwarding:{enabled:a.state.conditionalForwarding.enabled,router_ip:a.state.conditionalForwarding.routerIp,domain:a.state.conditionalForwarding.domain},options:{fqdn_required:a.state.options.fqdnRequired,bogus_priv:a.state.options.bogusPriv,dnssec:a.state.options.dnssec,listening_type:a.state.options.listeningType}})),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(U).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isCFSettingValid=function(e,t){return!a.state.conditionalForwarding.enabled&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.loadDNSInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isCFSettingValid(this.state.conditionalForwarding.routerIp,Je),a=this.isCFSettingValid(this.state.conditionalForwarding.domain,ze),n=this.state.showAlert?s.a.createElement(Me,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(O.d,{onSubmit:this.saveSettings},n,s.a.createElement(O.e,{row:!0},s.a.createElement(O.b,{sm:6},s.a.createElement("h3",null,e("Upstream DNS Servers")),s.a.createElement(gt,{onAdd:this.handleUpstreamAdd,onRemove:this.handleUpstreamRemove,upstreams:this.state.upstreamDns})),s.a.createElement(O.b,{sm:6},s.a.createElement("h3",null,e("Conditional Forwarding")),s.a.createElement(bt,{settings:this.state.conditionalForwarding,onUpdate:this.handleConditionalForwardingUpdate,isRouterIpValid:t,isDomainValid:a,t:e}),s.a.createElement("h3",null,e("DNS Options")),s.a.createElement(vt,{settings:this.state.options,onUpdate:this.handleDnsOptionsUpdate,t:e}))),s.a.createElement(O.a,{type:"submit",disabled:this.state.processing||!t||!a},e("Apply")))}}]),t}(r.Component),yt=Object(y.b)(["common","settings"])(Et),kt=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(O.d,null,s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{className:"bold",for:"interface",sm:4},e("Interface")),s.a.createElement(O.b,{sm:8},s.a.createElement(O.f,{plaintext:!0,id:"interface"},this.props.interface))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{className:"bold",for:"ipv4_address",sm:4},e("IPv4 address")),s.a.createElement(O.b,{sm:8},s.a.createElement(O.f,{plaintext:!0,id:"ipv4_address"},this.props.ipv4Address))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{className:"bold",for:"ipv6_address",sm:4},e("IPv6 address")),s.a.createElement(O.b,{sm:8},s.a.createElement(O.f,{plaintext:!0,id:"ipv6_address"},this.props.ipv6Address))),s.a.createElement(O.e,{row:!0},s.a.createElement(O.i,{className:"bold",for:"hostname",sm:4},e("Hostname")),s.a.createElement(O.b,{sm:8},s.a.createElement(O.f,{plaintext:!0,id:"hostname"},this.props.hostname))))}}]),t}(r.Component),Ot=Object(y.b)(["common","settings"])(kt),jt=function(e){return s.a.createElement(W,{apiCall:P.getNetworkInfo,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(Ot,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))},renderOk:function(t){return s.a.createElement(Ot,Object.assign({},function(e){return{interface:e.interface,ipv4Address:e.ipv4_address,ipv6Address:e.ipv6_address,hostname:e.hostname}}(t),e))},renderErr:function(){return s.a.createElement(Ot,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))}})},wt=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("pre",null,e("Queries"),": ",this.props.queries,s.a.createElement("br",null),e("Filesize"),": ",this.props.fileSize.toLocaleString()," B",s.a.createElement("br",null),e("SQLite version"),": ",this.props.sqliteVersion.toLocaleString(),s.a.createElement("br",null))}}]),t}(r.Component),Nt={fileSize:0,queries:0,sqliteVersion:""},Ct=Object(y.b)(["settings"])(wt),It=function(e){return s.a.createElement(W,{apiCall:P.getFTLdb,repeatOptions:{interval:6e5},renderInitial:function(){return s.a.createElement(Ct,Object.assign({},Nt,e))},renderOk:function(t){return s.a.createElement(Ct,Object.assign({},function(e){return{fileSize:e.filesize,queries:e.queries,sqliteVersion:e.sqlite_version}}(t),e))},renderErr:function(){return s.a.createElement(Ct,Object.assign({},Nt,e))}})},xt=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"network"},a.setTab=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.tab=function(e,t){return s.a.createElement(O.m,null,s.a.createElement(O.n,{active:a.state.activeTab===e,onClick:function(){return a.setTab(e)}},t))},a.tabContent=function(e,t){return s.a.createElement(O.p,{tabId:e},t)},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(O.l,{tabs:!0},this.tab("network",e("Network")),this.tab("dhcp",e("DHCP")),this.tab("dns",e("DNS")),this.tab("ftl",e("FTL"))),s.a.createElement(O.o,{activeTab:this.state.activeTab},this.tabContent("network",s.a.createElement(jt,null)),this.tabContent("dhcp",s.a.createElement(ct,null)),this.tabContent("dns",s.a.createElement(yt,null)),this.tabContent("ftl",s.a.createElement(It,null))))}}]),t}(r.Component),St=Object(y.b)(["common","settings"])(xt),At=a(85),Dt=a.n(At),_t=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a.onClick=function(){a.setState({collapsed:!a.state.collapsed})},a.isExpanded=function(){return a.props.error||!a.state.collapsed},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{style:{width:"100%"}},s.a.createElement("div",{className:"card "+(this.props.error?"border-danger":"border-primary")},s.a.createElement("div",{className:"card-header "+(this.props.error?"bg-danger":"bg-primary"),style:{paddingRight:"10px"}},s.a.createElement("h3",{className:"card-title",style:{fontSize:"18px",display:"inline-block",margin:0}},e("Forgot Password")),s.a.createElement("span",{className:"pull-right"},s.a.createElement("button",{type:"button",className:"btn btn-card-tool",onClick:this.onClick},s.a.createElement("i",{className:"fa "+(this.isExpanded()?"fa-minus":"fa-plus")})))),s.a.createElement("div",{className:"card-body bg-light"+(this.isExpanded()?"":" collapse"),style:{padding:"10px"}},e("forgot_password_description"),s.a.createElement("pre",{style:{textAlign:"center"}},"sudo pihole -a -p"))))}}]),t}(r.Component),Rt=Object(y.b)("login")(_t),Tt=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(L.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",error:!1,cookiesEnabled:!1},a.handlePasswordChange=function(e){13===e.keyCode?a.authenticate():a.setState({password:e.target.value})},a.authenticate=function(e){e.preventDefault();var t=Dt()("sha256").update(a.state.password).digest("hex");t=Dt()("sha256").update(t).digest("hex"),a.setState({password:"",error:!1}),P.authenticate(t).then(function(e){if("success"!==e.status)return console.log("Failed to log in:"),void console.log(e);P.loggedIn=!0,C.fakeAPI&&(document.cookie="user_id=;");var t=a.props.location.state||"/";a.props.history.push(t.from.pathname)}).catch(function(){return a.setState({error:!0})})},a}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentWillMount",value:function(){navigator.cookieEnabled&&this.setState({cookiesEnabled:!0})}},{key:"render",value:function(){if(P.loggedIn)return s.a.createElement(m.a,{to:"/"});var e=this.props.t;return s.a.createElement("div",{className:"mainbox col-md-8 offset-md-2 col-lg-6 offset-lg-3",style:{float:"none"}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("img",{src:w.a,alt:"Logo",width:"30%"})),s.a.createElement("br",null),s.a.createElement("div",{className:"card-title text-center",style:{marginBottom:0}},s.a.createElement("span",{className:"logo-lg",style:{fontSize:"25px"}},"Pi-",s.a.createElement("b",null,"hole"))),s.a.createElement("div",{className:"login-box-msg"},e("Sign in to start your session"),this.props.location.state&&this.props.location.state.from.pathname in Ft(e)?s.a.createElement(r.Fragment,null,s.a.createElement("br",null),e('You will be transferred to the "{{page}}" page',{page:Ft(e)[this.props.location.state.from.pathname]})):null,this.state.cookiesEnabled?null:s.a.createElement("div",{className:"text-center",style:{color:"#F00"}},e("Verify that cookies are allowed for {{host}}",{host:window.location.host}))),this.state.error?s.a.createElement("div",{className:"form-group has-error login-box-msg"},s.a.createElement("label",{className:"control-label"},s.a.createElement("i",{className:"fa fa-times-circle-o"})," ",e("Wrong Password!"))):null),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{id:"loginform"},s.a.createElement("div",{className:"input-group"+(this.state.error?" has-error":"")},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.handlePasswordChange,placeholder:e("Password"),autoFocus:!0}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.authenticate},e("Log in")))),s.a.createElement("br",null),s.a.createElement(Rt,{error:this.state.error})))))}}]),t}(r.Component),Ht=Object(y.b)(["login","location"])(Tt),Pt=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(B.a)(t,[{key:"componentWillMount",value:function(){P.loggedIn=!1,C.fakeAPI?document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;":P.logout()}},{key:"render",value:function(){return s.a.createElement(m.a,{to:"/"})}}]),t}(r.Component),Ft=function(e){return{"/dashboard":e("Dashboard"),"/query-log":e("Query Log"),"/whitelist":e("Whitelist"),"/blacklist/exact":"".concat(e("Blacklist")," (").concat(e("Exact"),")"),"/blacklist/regex":"".concat(e("Blacklist")," (").concat(e("Regex"),")"),"/settings/versions":e("Versions"),"/settings/networking":e("Networking"),"/login":e("Login"),"/logout":e("Logout")}},Bt=[{name:"Dashboard",url:"/dashboard",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"row"},s.a.createElement(se,null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(de,null))),P.loggedIn?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(fe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement(ke,null)),s.a.createElement("div",{className:"col-md-6"},s.a.createElement(Oe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(Ce,null)),s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(xe,null)),s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(Ae,null)))):null)},icon:"fa fa-dashboard",auth:!1},{name:"Query Log",url:"/query-log",component:Fe,icon:"fa fa-database",auth:!0},{name:"Whitelist",url:"/whitelist",component:Ye,icon:"fa fa-check-circle-o",auth:!1},{name:"Blacklist",url:"/blacklist",icon:"fa fa-ban",auth:!1,children:[{name:"Exact",url:"/blacklist/exact",component:Ze,icon:"fa fa-ban",auth:!1},{name:"Regex",url:"/blacklist/regex",component:$e,icon:"fa fa-ban",auth:!1}]},{name:"Settings",url:"/settings",icon:"fa fa-wrench",auth:!0,children:[{name:"Versions",url:"/settings/versions",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"container-flex"},s.a.createElement(it,null)))},icon:"fa fa-download",auth:!0},{name:"Networking",url:"/settings/networking",component:St,icon:"fa fa-sitemap",auth:!0}]},{name:"Login",url:"/login",component:Ht,icon:"fa fa-user",auth:!1,authStrict:!0},{name:"Logout",url:"/logout",component:Pt,icon:"fa fa-user-times",auth:!0,authStrict:!0}],Lt=function e(t){return t.children?t.children.map(e):t.auth?s.a.createElement(qt,{key:t.url,path:t.url,component:t.component}):s.a.createElement(d.a,{key:t.url,path:t.url,component:t.component})},qt=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return s.a.createElement(d.a,Object.assign({},a,{render:function(e){return P.loggedIn?s.a.createElement(t,e):s.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Mt=a(147),Vt=a.n(Mt),Qt=a(148),Ut=a.n(Qt);P.loggedIn=document.cookie.includes("user_id="),_e.a.use(Vt.a).use(Ut.a).use(y.a).init({fallbackLng:"en",ns:["common"],defaultNS:"common",fallbackNS:["dashboard","footer","lists","location","login","query-log","settings","api-errors"],nsSeparator:!1,keySeparator:!1,debug:C.developmentMode,interpolation:{escapeValue:!1},backend:{loadPath:"/i18n/{{lng}}/{{ns}}.json"},react:{wait:!0}}),o.a.render(s.a.createElement(l.a,null,s.a.createElement(c.a,null,s.a.createElement(d.a,{path:"/",name:"Home",component:function(e){return s.a.createElement("div",{className:"app"},s.a.createElement(E,null),s.a.createElement("div",{className:"app-body"},s.a.createElement($,Object.assign({items:Bt},e)),s.a.createElement("main",{className:"main",onClick:v},s.a.createElement("div",{className:"container-fluid",style:{marginTop:"1.5rem"}},s.a.createElement(c.a,null,s.a.createElement(m.a,{exact:!0,from:"/",to:"/dashboard"}),Bt.map(Lt))))),s.a.createElement(ee,null))}}))),document.getElementById("root"))},56:function(e,t,a){e.exports=a.p+"static/media/logo.00d87c43.svg"}},[[152,2,1]]]);
//# sourceMappingURL=main.63fd96cc.chunk.js.map