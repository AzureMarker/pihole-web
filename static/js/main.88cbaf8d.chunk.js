(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports=a(437)},191:function(e,t,a){},437:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),l=a(18),o=a.n(l),i=a(457),c=a(461),u=a(181),d=(a(187),a(188),a(189),a(190),a(191),a(459)),m=a(104),p=a(171),f=a.n(p),h=a(438),g=a(84),b={range:null,update:function(){}},v=s.a.createContext(b),E=function(e){var t=e.children,a=Object(r.useState)(b.range),n=Object(g.a)(a,2),l=n[0],o=n[1];return s.a.createElement(v.Provider,{value:{range:l,update:o}},t)},y=(a(110),a(4)),k=a(20),O=a(16),w=a.n(O),C=w()(),j=w()().subtract(1,"day"),N=w()().startOf("day"),S=w()().subtract(1,"days").startOf("day"),x=w()().subtract(1,"days").endOf("day"),I=w()().subtract(7,"days"),D=w()().subtract(30,"days"),A=w()().startOf("month"),H=w()().subtract(1,"month").startOf("month"),T=w()().subtract(1,"month").endOf("month"),P=w()().startOf("year"),R=w()(0),_=function(e){var t;return t={},Object(k.a)(t,e("Last 24 Hours"),[j,C]),Object(k.a)(t,e("Today"),[N,C]),Object(k.a)(t,e("Yesterday"),[S,x]),Object(k.a)(t,e("Last 7 Days"),[I,C]),Object(k.a)(t,e("Last 30 Days"),[D,C]),Object(k.a)(t,e("This Month"),[A,C]),Object(k.a)(t,e("Last Month"),[H,T]),Object(k.a)(t,e("This Year"),[P,C]),Object(k.a)(t,e("All Time"),[R,C]),t},M=Object(y.b)("time-ranges")(function(e){var t=e.range,a=e.onSelect,n=e.t,l=_(n),o=n("Last 24 Hours"),i=n("Today"),c=function(e){var t=e.t;return e.showLabel?e.range?"Custom Range"===e.range.name?e.range.from.toDate().toLocaleString()+" - "+e.range.until.toDate().toLocaleString():e.range.name:t("Last 24 Hours"):null}(e);return s.a.createElement(f.a,{startDate:t?t.from:l[o][0],endDate:t?t.until:l[o][1],maxDate:l[i][1],onApply:function(e,t){t.startDate.isSame(l[o][0])&&t.endDate.isSame(l[o][1])?a(null):a({from:t.startDate,until:t.endDate,name:t.chosenLabel})},timePicker:!0,showDropdowns:!0,ranges:l},s.a.createElement(h.a,{color:"light",size:"sm"},s.a.createElement("i",{className:"far fa-clock fa-lg"}),c?s.a.createElement(r.Fragment,null,"\xa0 \xa0",c):null))}),F=function(){return s.a.createElement(v.Consumer,null,function(e){return s.a.createElement(M,{range:e.range,onSelect:e.update,showLabel:!0})})},L=a(15);(n={developmentMode:!1,fakeAPI:!1}).fakeAPI=!0;var B=n,q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(J(e),Object(L.a)({credentials:Y()},t)).then(W).then(z).catch(z).then(G)},U=function(e,t){return fetch(J(e),{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:Y()}).then(W).then(z).catch(z).then(G)},Q=function(e,t){return fetch(J(e),{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:Y()}).then(W).then(z).catch(z).then(G)},V=function(e){return fetch(J(e),{method:"DELETE",credentials:Y()}).then(W).then(z).catch(z).then(G)},W=function(e){return K.loggedIn&&401===e.status?(document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload(),Promise.reject({isCanceled:!0})):Promise.resolve(e)},z=function(e){return e.isCanceled||e instanceof Error?Promise.reject(e):e.json()},G=function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)},J=function(e){return(B.fakeAPI?"/fakeAPI":"/admin/api")+"/"+e},Y=function(){return B.developmentMode?"include":"same-origin"},X=function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},Z=function(e){return X({from:e.from.unix(),until:e.until.unix()})},K={loggedIn:!1,authenticate:function(e){return q("auth",{headers:new Headers({"X-Pi-hole-Authenticate":e})})},logout:function(){return V("auth")},getSummary:function(){return q("stats/summary")},getSummaryDb:function(e){return q("stats/database/summary?"+Z(e))},getHistoryGraph:function(){return q("stats/overTime/history")},getHistoryGraphDb:function(e,t){return q("stats/database/overTime/history?interval="+t+"&"+Z(e))},getClientsGraph:function(){return q("stats/overTime/clients")},getClientsGraphDb:function(e,t){return q("stats/database/overTime/clients?interval="+t+"&"+Z(e))},getQueryTypes:function(){return q("stats/query_types")},getQueryTypesDb:function(e){return q("stats/database/query_types?"+Z(e))},getUpstreams:function(){return q("stats/upstreams")},getUpstreamsDb:function(e){return q("stats/database/upstreams?"+Z(e))},getTopDomains:function(){return q("stats/top_domains")},getTopDomainsDb:function(e){return q("stats/database/top_domains?"+Z(e))},getTopBlocked:function(){var e=B.fakeAPI?"stats/top_blocked":"stats/top_domains?blocked=true";return q(e)},getTopBlockedDb:function(e){var t=B.fakeAPI?"stats/database/top_blocked?":"stats/database/top_domains?blocked=true&";return q(t+Z(e))},getTopClients:function(){return q("stats/top_clients")},getTopClientsDb:function(e){return q("stats/database/top_clients?"+Z(e))},getHistory:function(e){return q("stats/history?"+X(e))},getWhitelist:function(){return q("dns/whitelist")},getBlacklist:function(){return q("dns/blacklist")},getRegexlist:function(){return q("dns/regexlist")},addWhitelist:function(e){return U("dns/whitelist",{domain:e})},addBlacklist:function(e){return U("dns/blacklist",{domain:e})},addRegexlist:function(e){return U("dns/regexlist",{domain:e})},removeWhitelist:function(e){return V("dns/whitelist/"+e)},removeBlacklist:function(e){return V("dns/blacklist/"+e)},removeRegexlist:function(e){return V("dns/regexlist/"+encodeURIComponent(e))},getStatus:function(){return q("dns/status")},setStatus:function(e,t){return U("dns/status",{action:e,time:t})},getNetworkInfo:function(){return q("settings/network")},getVersion:function(){return q("version")},getFTLdb:function(){return q("settings/ftldb")},getDNSInfo:function(){return q("settings/dns")},getDHCPInfo:function(){return q("settings/dhcp")},updateDHCPInfo:function(e){return Q("settings/dhcp",e)},updateDNSInfo:function(e){return Q("settings/dns",e)},getPreferences:function(){return q("settings/web")},updatePreferences:function(e){return Q("settings/web",e)}},$=function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized"),document.body.classList.toggle("brand-minimized")},ee=function(){document.body.classList.toggle("sidebar-show")},te=function(){document.body.classList.remove("sidebar-show")},ae=function(){return s.a.createElement("header",{className:"app-header navbar"},s.a.createElement("button",{className:"navbar-toggler d-lg-none",style:{marginLeft:"16px"},onClick:ee,type:"button"},"\u2630"),s.a.createElement(m.a,{to:"/dashboard",className:"navbar-brand",style:{textAlign:"center"}},s.a.createElement("span",{style:{color:"white",lineHeight:"40px"}},s.a.createElement("span",{className:"navbar-brand-full"},"Pi-",s.a.createElement("b",null,"hole")),s.a.createElement("span",{className:"navbar-brand-minimized"},"P",s.a.createElement("b",null,"h")))),s.a.createElement("ul",{className:"nav navbar-nav d-md-down-none mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link navbar-toggler sidebar-toggler",type:"button",onClick:$},"\u2630")),K.loggedIn&&window.location.pathname.endsWith("/dashboard")?s.a.createElement("li",null,s.a.createElement(F,null)):null))},ne=a(440),re=a(439),se=a(441),le=a(79),oe=a.n(le),ie=a(5),ce=a(6),ue=a(8),de=a(7),me=a(9),pe=a(26),fe=function(e){return("00"+e).substr(-2,2)},he=function(e){return Math.ceil((e.until.unix()-e.from.unix())/144)};function ge(e,t){var a=!1,n=null,r=function(e,r,s,l){a?r({isCanceled:!0}):(l?r(s):e(s),t&&(n=setTimeout(t.repeat,t.interval)))};return{promise:new Promise(function(t,a){e.then(function(e){return r(t,a,e,!1)},function(e){return r(t,a,e,!0)})}),cancel:function(){null!==n&&clearTimeout(n),a=!0}}}var be=function(e){if(!e.isCanceled)throw e},ve=function(){function e(t){Object(ie.a)(this,e),this.value=t}return Object(ce.a)(e,[{key:"isErr",value:function(){return!1}},{key:"isOk",value:function(){return!0}},{key:"unwrap",value:function(){return this.value}},{key:"unwrapErr",value:function(){throw Error("unwrapErr on a Result.Ok")}}]),e}(),Ee=function(){function e(t){Object(ie.a)(this,e),this.err=t}return Object(ce.a)(e,[{key:"isErr",value:function(){return!0}},{key:"isOk",value:function(){return!1}},{key:"unwrap",value:function(){throw Error("unwrap on a Result.Err")}},{key:"unwrapErr",value:function(){return this.err}}]),e}(),ye=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={apiResult:null},a.dataHandle=void 0,a.loadData=function(e){var t=0!==a.props.repeatOptions.interval?{repeat:a.loadData,interval:a.props.repeatOptions.interval}:void 0;if(a.dataHandle&&a.dataHandle.cancel(),e)return a.setState({apiResult:new ve(e)}),void(t&&new Promise(function(e){return setTimeout(e,t.interval)}).then(function(){return a.loadData()}));a.dataHandle=ge(a.props.apiCall(),t),a.dataHandle.promise.then(function(e){a.setState({apiResult:new ve(e)})}).catch(function(e){if(!a.props.repeatOptions.ignoreCancel)throw e;be(e)}).catch(function(e){a.setState({apiResult:new Ee(e)})})},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.dataHandle&&this.dataHandle.cancel()}},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.props.flushOnUpdate&&(this.setState({apiResult:null}),this.loadData())}},{key:"render",value:function(){return this.state.apiResult?this.state.apiResult.isOk()?this.props.renderOk(this.state.apiResult.unwrap(),this.loadData):this.props.renderErr(this.state.apiResult.unwrapErr(),this.loadData):this.props.renderInitial()}}]),t}(r.Component);ye.defaultProps={repeatOptions:{ignoreCancel:!0,interval:0},flushOnUpdate:!0};var ke={status:"unknown",refresh:function(){}},Oe=s.a.createContext(ke),we=function(e){var t=e.children,a=Object(pe.a)(e,["children"]);return s.a.createElement(ye,{apiCall:K.getStatus,repeatOptions:{interval:5e3,ignoreCancel:!0},flushOnUpdate:!1,renderInitial:function(){return s.a.createElement(Oe.Provider,Object.assign({value:ke},a),t)},renderOk:function(e,n){return s.a.createElement(Oe.Provider,Object.assign({value:{status:e.status,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(Oe.Provider,Object.assign({value:{status:ke.status,refresh:n}},a),t)}})},Ce=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).isEnabled=function(){return"enabled"===a.props.status},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-"+(this.isEnabled()?"success":"danger")}),"\xa0",e(this.isEnabled()?"Enabled":"Disabled"))}}]),t}(r.Component),je=Object(y.b)("common")(Ce),Ne=function(){return s.a.createElement(Oe.Consumer,null,function(e){var t=e.status;return s.a.createElement(je,{status:t})})},Se=function(e){var t=e.name,a=e.icon,n=e.isOpen,r=e.children;return s.a.createElement("li",{className:"nav-item nav-dropdown"+(n?" open":"")},s.a.createElement("button",{className:"nav-link nav-dropdown-toggle",onClick:xe},s.a.createElement("i",{className:"nav-icon "+a}),t),s.a.createElement("ul",{className:"nav-dropdown-items"},r))},xe=function(e){e.preventDefault(),e.target.parentElement.classList.toggle("open")},Ie=function(e,t,a){return e.map(function(e,n){if(e.auth&&!K.loggedIn)return null;if(e.authStrict&&e.auth!==K.loggedIn)return null;if(void 0!==e.customComponent){var r=e.customComponent;return s.a.createElement(r,{key:n})}return e.children?function(e,t,a,n){return s.a.createElement(Se,{name:a(e.name),icon:e.icon,isOpen:n.pathname.startsWith(e.url),key:t},Ie(e.children,a,n))}(e,n,t,a):function(e,t,a){return s.a.createElement(re.a,{key:t},s.a.createElement(ne.a,{to:e.url,onClick:te,className:"nav-link",activeClassName:"active"},s.a.createElement("i",{className:"nav-icon "+e.icon}),a(e.name)))}(e,n,t)})},De=Object(y.b)(["common","location"])(function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"sidebar-nav"},s.a.createElement(se.a,null,s.a.createElement("li",{className:"nav-title"},s.a.createElement("img",{src:oe.a,className:"img-responsive pull-left",style:{height:"67px"},alt:""}),s.a.createElement("p",{className:"pull-left",style:{paddingLeft:"15px",textTransform:"initial",fontSize:"14px",marginBottom:"initial",lineHeight:"14px",color:"white"}},a("Status")),s.a.createElement("br",null),s.a.createElement("span",{style:{textTransform:"initial",paddingLeft:"15px"}},s.a.createElement(Ne,null))),Ie(t,a,n))))}),Ae=Object(y.b)("footer")(function(e){e.t;return null}),He=Object(y.b)(["common","footer"])(function(e){var t=e.t;return s.a.createElement("footer",{className:"app-footer"},s.a.createElement("div",null,s.a.createElement("i",{className:"fab fa-paypal"}),s.a.createElement("strong",null,s.a.createElement("a",{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3J2L3Z4DHW9UY"},"\xa0",t("Donate")))," ",t("if you found this useful")),s.a.createElement(Ae,e))}),Te=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-success stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-globe-americas fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.totalQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Total Queries ({{count}} clients)",{count:this.props.uniqueClients}))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-primary stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-hand-paper fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.blockedQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Queries Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-warning stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-chart-pie fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.percentBlocked),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Percent Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-danger stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-list-alt fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.gravityDomains),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Domains On Blocklist"))))))}}]),t}(r.Component),Pe={totalQueries:"Lost",blockedQueries:"Connection",percentBlocked:"To",gravityDomains:"API",uniqueClients:0},Re={blockedQueries:"---",totalQueries:"---",percentBlocked:"---",gravityDomains:"---",uniqueClients:0},_e=Object(y.b)(["common","dashboard"])(Te),Me=function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(ye,{apiCall:function(){return t.range?K.getSummaryDb(t.range):K.getSummary()},repeatOptions:t.range?void 0:{interval:5e3,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(_e,Object.assign({},Re,e))},renderOk:function(t){return s.a.createElement(_e,Object.assign({},function(e){return{totalQueries:Object.keys(e.total_queries).reduce(function(t,a){return t+e.total_queries[a]},0).toLocaleString(),blockedQueries:e.blocked_queries.toLocaleString(),percentBlocked:e.percent_blocked.toFixed(2).toLocaleString()+"%",gravityDomains:e.gravity_size.toLocaleString(),uniqueClients:e.total_clients}}(t),e))},renderErr:function(){return s.a.createElement(_e,Object.assign({},Pe,e))}})})},Fe=a(57),Le=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t,t={labels:this.props.labels,datasets:[{label:e("Total Queries"),data:this.props.domains_over_time,fill:!0,backgroundColor:"rgba(220,220,220,0.5)",borderColor:"rgba(0, 166, 90,.8)",pointBorderColor:"rgba(0, 166, 90,.8)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"},{label:e("Blocked Queries"),data:this.props.blocked_over_time,fill:!0,backgroundColor:"rgba(0,192,239,0.5)",borderColor:"rgba(0,192,239,1)",pointBorderColor:"rgba(0,192,239,1)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"}]},a={tooltips:{enabled:!0,mode:"x-axis",callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=fe(n)+":"+fe(r-5)+":00",l=fe(n)+":"+fe(r+4)+":59";return e("Queries from {{from}} to {{to}}",{from:s,to:l})},label:function(e,t){if(1===e.datasetIndex){var a=0,n=t.datasets[0].data[e.index],r=t.datasets[1].data[e.index];return n>0&&(a=100*r/n),t.datasets[e.datasetIndex].label+": "+e.yLabel+" ("+a.toFixed(1)+"%)"}return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1},n=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Queries Over {{range}}",{range:n})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Fe.b,{width:970,height:170,data:t,options:a})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Be={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",domains_over_time:[],blocked_over_time:[]},qe=Object(y.b)(["dashboard","time-ranges"])(Le),Ue=function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(ye,{apiCall:function(){return t.range?K.getHistoryGraphDb(t.range,he(t.range)):K.getHistoryGraph()},repeatOptions:t.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(qe,Object.assign({},Be,e))},renderOk:function(a){return s.a.createElement(qe,Object.assign({},function(e,t){var a="hour";t?t.until.diff(t.from,"day")>1&&(a="day"):e=e.slice(0,-1);var n=e.map(function(e){return new Date(1e3*e.timestamp)}),r=e.map(function(e){return e.total_queries}),s=e.map(function(e){return e.blocked_queries});return{loading:!1,labels:n,timeUnit:a,rangeName:t?t.name:void 0,domains_over_time:r,blocked_over_time:s}}(a,t.range),e))},renderErr:function(){return s.a.createElement(qe,Object.assign({},Be,e))}})})},Qe=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={tooltip:null},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tooltip,a=Date.now();if(this.props.handler.custom=function(t){0===t.opacity&&e.setState({tooltip:t});var n=Date.now();n-a<50||(a=n,e.setState({tooltip:t}))},null===t||0===t.opacity||null===this.props.chart.current)return null;var n=this.props.chart.current.chartInstance.canvas.getBoundingClientRect(),r=t.caretX;document.offsetWidth-t.caretX<400&&(r=document.offsetWidth-400),t.caretX<100&&(r=100);var l={opacity:1,left:n.left+r+"px",top:n.top+t.caretY+window.scrollY+"px",fontFamily:t._bodyFontFamily,fontSize:t.bodyFontSize+"px",fontStyle:t._bodyFontStyle,padding:t.yPadding+"px "+t.xPadding+"px"},o=[];return t.body&&(o=t.body.map(function(e){return e.lines}).map(function(e,a){return{data:e[0],colors:t.labelColors[a]}})),o.sort(function(e,t){return e.data.split(": ")[0].localeCompare(t.data.split(": ")[0])}),s.a.createElement("div",{className:"chartjs-tooltip",style:l},s.a.createElement("table",null,s.a.createElement("thead",null,t.title.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("th",null,e))})),s.a.createElement("tbody",null,o.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"chartjs-tooltip-key",style:{background:e.colors.backgroundColor,borderColor:e.colors.borderColor,borderWidth:"2px"}}),e.data))}))))}}]),t}(r.Component),Ve=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(ue.a)(this,Object(de.a)(t).call(this,e))).graphRef=void 0,a.graphRef=s.a.createRef(),a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t,t={tooltips:{enabled:!1,mode:"x-axis",custom:function(){return"placeholder"},itemSort:function(e,t){return t.yLabel-e.yLabel},callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=fe(n)+":"+fe(r-5)+":00",l=fe(n)+":"+fe(r+4)+":59";return e("Client activity from {{from}} to {{to}}",{from:s,to:l})},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]},maintainAspectRatio:!1},a=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Clients Over {{range}}",{range:a})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Fe.b,{width:970,height:170,data:{labels:this.props.labels,datasets:this.props.datasets},options:t,ref:this.graphRef})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null,o.a.createPortal(s.a.createElement(Qe,{chart:this.graphRef,handler:t.tooltips}),document.body))}}]),t}(r.Component),We={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",datasets:[]},ze=Object(y.b)(["dashboard","time-ranges"])(Ve),Ge=function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(ye,{apiCall:function(){return t.range?K.getClientsGraphDb(t.range,he(t.range)):K.getClientsGraph()},repeatOptions:t.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(ze,Object.assign({},We,e))},renderOk:function(a){return s.a.createElement(ze,Object.assign({},function(e,t){var a="hour",n=e.over_time;t?t.until.diff(t.from,"day")>1&&(a="day"):n=e.over_time.slice(0,-1);var r=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],s=n.map(function(e){return new Date(1e3*e.timestamp)}),l=[],o=0,i=!0,c=!1,u=void 0;try{for(var d,m=e.clients[Symbol.iterator]();!(i=(d=m.next()).done);i=!0){var p=d.value;l.push({label:0!==p.name.length?p.name:p.ip,backgroundColor:o<r.length?r[o]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0"),pointRadius:0,pointHitRadius:5,pointHoverRadius:5,cubicInterpolationMode:"monotone",data:[]}),o++}}catch(k){c=!0,u=k}finally{try{i||null==m.return||m.return()}finally{if(c)throw u}}var f=!0,h=!1,g=void 0;try{for(var b,v=n[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){var E=b.value;for(var y in l)l.hasOwnProperty(y)&&l[y].data.push(E.data[y])}}catch(k){h=!0,g=k}finally{try{f||null==v.return||v.return()}finally{if(h)throw g}}return l.sort(function(e,t){return e.label.localeCompare(t.label)}),{labels:s,datasets:l,loading:!1,timeUnit:a,rangeName:t?t.name:void 0}}(a,t.range),e))},renderErr:function(){return s.a.createElement(ze,Object.assign({},We,e))}})})},Je=a(85),Ye=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(ue.a)(this,Object(de.a)(t).call(this,e))).chartRef=void 0,a.handleClick=function(e,t){var n=a.chartRef.current.chartInstance;n.legend.options.onClick.call(n,e,n.legend.legendItems[t]),a.forceUpdate()},a.chartRef=s.a.createRef(),a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this,t={legend:{display:!1},tooltips:{enabled:!0,callbacks:{title:function(){return e.props.title},label:function(e,t){var a=t.datasets[e.datasetIndex],n=t.labels[e.index];return n+": "+a.data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},a=null!==this.chartRef.current?this.chartRef.current.chartInstance.getDatasetMeta(0).data:this.props.data.map(function(){return{hidden:!1}});return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"float-left",style:{width:"67%"}},s.a.createElement(Fe.a,{width:100,height:250,options:t,ref:this.chartRef,data:{datasets:[{data:Object(Je.a)(this.props.data),backgroundColor:this.props.colors}],labels:this.props.labels}})),s.a.createElement("div",{className:"float-right",style:{width:"33%"}},s.a.createElement("ul",{className:"chart-legend"},this.props.labels.map(function(t,a){return[t,e.props.colors[a]]}).map(function(t,n){var r=Object(g.a)(t,2),l=r[0],o=r[1];return s.a.createElement("li",{key:n,className:a[n]&&a[n].hidden?"strike":"",onClick:function(t){return e.handleClick(t,n)}},s.a.createElement("span",{style:{backgroundColor:o}}),l)})))),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Xe={loading:!0,data:[],colors:[],labels:[]},Ze=function(e){var t=e.apiCall,a=e.title,n=e.apiHandler,r=Object(pe.a)(e,["apiCall","title","apiHandler"]);return s.a.createElement(ye,{apiCall:t,renderInitial:function(){return s.a.createElement(Ye,Object.assign({title:a},Xe,r))},renderOk:function(e){return s.a.createElement(Ye,Object.assign({title:a},function(e){var t=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],a=[],n=[],r=[],s=0,l=!0,o=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;a.push(d.percent),n.push(0!==d.name.length?d.name:d.ip),r.push(s<t.length?t[s]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0")),s++}}catch(m){o=!0,i=m}finally{try{l||null==u.return||u.return()}finally{if(o)throw i}}return{loading:!1,data:a,colors:r,labels:n}}(n(e)),r))},renderErr:function(){return s.a.createElement(Ye,Object.assign({title:a},Xe,r))}})},Ke=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(Ze,{title:t("Query Types"),apiCall:a,apiHandler:function(e){var t=e.reduce(function(e,t){return e+t.count},0);return e.map(function(e){return{name:e.name,percent:t>0?100*e.count/t:0}})}})},$e=Object(y.b)("dashboard")(function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(Ke,Object.assign({},e,{apiCall:function(){return t.range?K.getQueryTypesDb(t.range):K.getQueryTypes()}}))})}),et=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(Ze,{title:t("Queries Answered By Destination"),apiCall:a,apiHandler:function(e){return e.upstreams.map(function(t){return{name:t.name,ip:t.ip,percent:100*t.count/e.total_queries}})}})},tt=Object(y.b)("dashboard")(function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(et,Object.assign({},e,{apiCall:function(){return t.range?K.getUpstreamsDb(t.range):K.getUpstreams()}}))})}),at=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).generateTable=function(){return a.props.isEmpty(a.props.data)?a.props.emptyMessage:s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("tbody",null,s.a.createElement("tr",null,a.props.headers.map(function(e,t){return s.a.createElement("th",{key:t},e)})),a.props.generateRows(a.props.data)))},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{style:{overflowX:"auto"}},this.generateTable())),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component);at.defaultProps={loading:!0,title:"",data:{},headers:[],emptyMessage:"",isEmpty:function(){return!0},generateRows:function(){return null}};var nt=function(e){var t=e.title,a=e.apiCall,n=e.initialData,r=e.headers,l=e.emptyMessage,o=e.isEmpty,i=e.apiHandler,c=e.generateRows,u=Object(pe.a)(e,["title","apiCall","initialData","headers","emptyMessage","isEmpty","apiHandler","generateRows"]);return s.a.createElement(ye,{apiCall:a,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(at,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:o,generateRows:c,data:n,loading:!0},u))},renderOk:function(e){return s.a.createElement(at,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:o,generateRows:c,data:i(e),loading:!1},u))},renderErr:function(){return s.a.createElement(at,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:o,generateRows:c,data:n,loading:!0},u))}})},rt=function(e){return{totalQueries:e.total_queries,topDomains:e.top_domains}},st=function(e){return function(t){return t.topDomains.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-success",style:{width:n+"%"}}))))})}},lt=function(e){var t=e.apiCall,a=e.t,n=Object(pe.a)(e,["apiCall","t"]);return s.a.createElement(nt,Object.assign({},n,{title:a("Top Permitted Domains"),initialData:{totalQueries:0,topDomains:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topDomains.length},apiCall:t,apiHandler:rt,generateRows:st(a)}))},ot=Object(y.b)(["common","dashboard"])(function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(lt,Object.assign({},e,{apiCall:function(){return t.range?K.getTopDomainsDb(t.range):K.getTopDomains()}}))})}),it=function(e){return{totalBlocked:e.blocked_queries,topBlocked:e.top_domains}},ct=function(e){return function(t){return t.topBlocked.map(function(a){var n=a.count/t.totalBlocked*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalBlocked.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-warning",style:{width:n+"%"}}))))})}},ut=function(e){var t=e.apiCall,a=e.t,n=Object(pe.a)(e,["apiCall","t"]);return s.a.createElement(nt,Object.assign({},n,{title:a("Top Blocked Domains"),initialData:{totalBlocked:0,topBlocked:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topBlocked.length},apiCall:t,apiHandler:it,generateRows:ct(a)}))},dt=Object(y.b)(["common","dashboard"])(function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(ut,Object.assign({},e,{apiCall:function(){return t.range?K.getTopBlockedDb(t.range):K.getTopBlocked()}}))})}),mt=function(e){return{totalQueries:e.total_queries,topClients:e.top_clients}},pt=function(e){return function(t){return t.topClients.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-primary",style:{width:n+"%"}}))))})}},ft=function(e){var t=e.apiCall,a=e.t,n=Object(pe.a)(e,["apiCall","t"]);return s.a.createElement(nt,Object.assign({},n,{title:a("Top Clients"),initialData:{totalQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:mt,generateRows:pt(a)}))},ht=Object(y.b)(["common","dashboard"])(function(e){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(ft,Object.assign({},e,{apiCall:function(){return t.range?K.getTopClientsDb(t.range):K.getTopClients()}}))})}),gt=a(180),bt=a(52),vt=a(106),Et=a.n(vt),yt=(a(334),function(e){var t=_(e),a=e("Last 24 Hours");return{from:t[a][0],until:t[a][1],name:a}}),kt=function(e){function t(e){var a;Object(ie.a)(this,t),(a=Object(ue.a)(this,Object(de.a)(t).call(this,e))).updateHandler=null,a.state={history:[],cursor:null,loading:!1,atEnd:!1,filtersChanged:!1,filters:[]},a.getRowProps=function(e,t){return t&&0!==t.row.status?{style:{color:[1,4,5,6].includes(t.row.status)?"red":"green"}}:{}},a.parseFilters=function(e){var t={},a=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;switch(o.id){case"time":t.from=w()(o.value.from).unix(),t.until=w()(o.value.until).unix();break;case"queryType":if("all"===o.value)break;t.query_type=parseInt(o.value)+1;break;case"domain":if(0===o.value.length)break;t.domain=o.value;break;case"client":if(0===o.value.length)break;t.client=o.value;break;case"status":switch(o.value){case"all":break;case"allowed":t.blocked=!1;break;case"blocked":t.blocked=!0;break;default:t.status=o.value}break;case"dnssec":if("all"===o.value)break;t.dnssec=o.value;break;case"reply":if("all"===o.value)break;t.reply=o.value}}}catch(i){n=!0,r=i}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return t},a.fetchQueries=function(e){var t=e.page,n=e.pageSize;a.state.atEnd||a.state.loading||!a.state.filtersChanged&&a.state.history.length>=(t+2)*n||(a.setState({loading:!0}),a.updateHandler=ge(K.getHistory(Object(L.a)({cursor:a.state.cursor},a.parseFilters(a.state.filters)))),a.updateHandler.promise.then(function(e){a.setState({loading:!1,atEnd:null===e.cursor,cursor:e.cursor,history:a.state.history.concat(e.history),filtersChanged:!1})}).catch(be))};var n=a.props.t;return a.state.filters=[{id:"time",value:yt(n)}],a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement(gt.a,{className:"-striped",style:{background:"white",marginBottom:"24px",lineHeight:1},columns:xt(t),showPaginationTop:!0,sortable:!1,filterable:!1,data:this.state.history,loading:this.state.loading,onFetchData:function(t){if(t.filtered!==e.state.filters)return Et()(e.fetchQueries,350)(t);e.fetchQueries(t)},onFilteredChange:Et()(function(t){e.setState({filters:t,filtersChanged:!0,cursor:null,atEnd:!1,loading:!1,history:[]})},300),getTrProps:this.getRowProps,ofText:this.state.atEnd?"of":"of at least",PadRowComponent:function(){return s.a.createElement("span",null,"\xa0",s.a.createElement("br",null),"\xa0")}})}}]),t}(r.Component),Ot=function(e){return[e("Unknown"),e("Blocked (gravity)"),e("Allowed (forwarded)"),e("Allowed (cached)"),e("Blocked (regex/wildcard)"),e("Blocked (blacklist)"),e("Blocked (external)")]},wt=function(e){return["N/A",e("Secure"),e("Insecure"),e("Bogus"),e("Abandoned"),e("Unknown")]},Ct=["","green","orange","red","red","orange"],jt=function(e){return[e("Unknown"),"NODATA","NXDOMAIN","CNAME","IP","DOMAIN","RRNAME"]},Nt=["A","AAAA","ANY","SRV","SOA","PTR","TXT"],St=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(n){var r=n.filter,l=n.onChange;return s.a.createElement("select",{onChange:function(e){return l(e.target.value)},style:{width:"100%"},value:r?r.value:"all"},s.a.createElement("option",{value:"all"},t("All")),a.map(function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.name)}),e.map(function(e,t){return s.a.createElement("option",{key:t+a.length,value:t},e)}))}},xt=function(e){return[{Header:e("Time"),id:"time",accessor:function(e){return e.timestamp},width:70,Cell:function(e){var t=new Date(1e3*e.value),a=t.toLocaleDateString(bt.a.language,{month:"short"}),n=fe(t.getDate()),l=fe(t.getHours()),o=fe(t.getMinutes()),i=fe(t.getSeconds());return s.a.createElement(r.Fragment,null,a+", "+n,s.a.createElement("br",null),l+":"+o+":"+i)},filterable:!0,filterMethod:function(){return!0},Filter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var a=t.filter,n=t.onChange;return s.a.createElement(M,{range:a?a.value:null,onSelect:function(t){n(t||yt(e))},showLabel:!1})})},{Header:e("Type"),id:"queryType",accessor:function(e){return Nt[e.type-1]},width:50,filterable:!0,filterMethod:function(){return!0},Filter:St(Nt,e)},{Header:e("Domain"),id:"domain",accessor:function(e){return e.domain},minWidth:150,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Client"),id:"client",accessor:function(e){return e.client},minWidth:120,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Status"),id:"status",accessor:function(e){return e.status},width:140,Cell:function(t){return Ot(e)[t.value]},filterable:!0,filterMethod:function(){return!0},Filter:St(Ot(e),e,[{name:e("Allowed"),value:"allowed"},{name:e("Blocked"),value:"blocked"}])},{Header:"DNSSEC",id:"dnssec",accessor:function(e){return e.dnssec},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:Ct[t.value]}},wt(e)[t.value])},filterable:!0,filterMethod:function(){return!0},Filter:St(wt(e),e)},{Header:e("Reply"),id:"reply",accessor:function(e){return{type:e.reply,time:e.response_time}},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:"black"}},jt(e)[t.value.type],s.a.createElement("br",null),"("+(t.value.time/10).toLocaleString()+"ms)")},filterable:!0,filterMethod:function(){return!0},Filter:St(jt(e),e)},{Header:e("Action"),width:100,filterable:!1,Cell:function(t){return[1,4,5].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-success full-width",onClick:function(){return K.addWhitelist(t.row.domain)}},e("Whitelist")):[2,3,6].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-danger full-width",onClick:function(){return K.addBlacklist(t.row.domain)}},e("Blacklist")):void 0}}]},It=Object(y.b)(["common","query-log","time-ranges"])(kt),Dt=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={domain:"",isValid:!0},a.handleChange=function(e){a.setState({domain:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.domain;if(0!==t.length){var n=a.props.isValid(t);a.setState({isValid:n}),n?(a.props.onEnter(t),a.setState({domain:""})):a.props.onValidationError()}},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.placeholder,n=e.onRefresh;return s.a.createElement("form",{className:"form-group input-group",onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.isValid?"":"is-invalid"),placeholder:a,value:this.state.domain,onChange:this.handleChange,disabled:!K.loggedIn}),s.a.createElement("span",{className:"btn-group input-group-append"},K.loggedIn?s.a.createElement("button",{className:"btn border-secondary",type:"submit"},t("Add")):null,s.a.createElement("button",{onClick:n,className:"btn border-secondary",type:"button"},s.a.createElement("i",{className:"fa fa-sync"}))))}}]),t}(r.Component);Dt.defaultProps={placeholder:""};var At=Object(y.b)(["common","lists"])(Dt),Ht=function(e){return s.a.createElement("div",{className:"alert alert-"+e.type+" alert-dismissible fade show"},s.a.createElement("button",{type:"button",className:"close",onClick:e.onClick},"\xd7"),e.message)};Ht.defaultProps={onClick:function(){}};var Tt=Ht,Pt=Object(y.b)(["common","lists"])(function(e){var t,a=e.domains,n=e.onRemove,r=e.t;return t=a.length>0?a.map(function(e){return s.a.createElement("li",{key:e,className:"list-group-item"},K.loggedIn?(t=e,s.a.createElement(h.a,{color:"danger",size:"sm",className:"pull-right",style:{marginTop:"2px"},onClick:function(){return n(t)}},s.a.createElement("span",{className:"far fa-trash-alt"}))):null,s.a.createElement("span",{style:{display:"table-cell",verticalAlign:"middle",height:"32px"}},e));var t}):s.a.createElement("div",{className:"alert alert-info",role:"alert"},r("There are no domains in this list")),s.a.createElement("ul",{className:"list-group"},t)}),Rt=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={domains:[],message:"",messageType:"info"},a.addHandler=void 0,a.removeHandler=void 0,a.refreshHandler=void 0,a.onEnter=function(e){if(a.state.domains.includes(e))a.onAlreadyAdded(e);else{var t=a.state.domains.slice();a.addHandler=ge(a.props.add(e)),a.addHandler.promise.then(function(){a.onAdded(e)}).catch(be).catch(function(){a.onAddFailed(e,t)}),a.onAdding(e)}},a.onAdding=function(e){return a.setState({message:a.props.t("Adding {{domain}}...",{domain:e}),messageType:"info"})},a.onAlreadyAdded=function(e){return a.setState({message:a.props.t("{{domain}} is already added",{domain:e}),messageType:"danger"})},a.onAdded=function(e){return a.setState(function(t){return{domains:[].concat(Object(Je.a)(t.domains),[e]),message:a.props.t("Successfully added {{domain}}",{domain:e}),messageType:"success"}})},a.onAddFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to add {{domain}}",{domain:e}),messageType:"danger"})},a.onRemoved=function(e){return a.setState(function(t){return{domains:t.domains.filter(function(t){return t!==e})}})},a.onRemoveFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to remove {{domain}}",{domain:e}),messageType:"danger"})},a.onRemove=function(e){if(a.state.domains.includes(e)){var t=a.state.domains.slice();a.removeHandler=ge(a.props.remove(e)),a.removeHandler.promise.catch(be).catch(function(){a.onRemoveFailed(e,t)}),a.onRemoved(e)}},a.onRefresh=function(){a.refreshHandler=ge(a.props.refresh()),a.refreshHandler.promise.then(function(e){a.setState({domains:e})}).catch(be)},a.handleValidationError=function(){a.setState({message:a.props.validationErrorMsg,messageType:"danger"})},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.onRefresh()}},{key:"componentWillUnmount",value:function(){this.addHandler&&this.addHandler.cancel(),this.removeHandler&&this.removeHandler.cancel(),this.refreshHandler&&this.refreshHandler.cancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{marginBottom:"24px"}},s.a.createElement("h2",{className:"text-center"},this.props.title),s.a.createElement("br",null),s.a.createElement(At,{placeholder:this.props.placeholder,onEnter:this.onEnter,onRefresh:this.onRefresh,isValid:this.props.isValid,onValidationError:this.handleValidationError}),this.props.note,this.state.message?s.a.createElement(Tt,{message:this.state.message,type:this.state.messageType,onClick:function(){return e.setState({message:""})}}):null,s.a.createElement(Pt,{domains:this.state.domains,onRemove:this.onRemove}))}}]),t}(r.Component);Rt.defaultProps={note:""};var _t=Object(y.b)(["common","lists"])(Rt);function Mt(e){if(e.length>253)return!1;var t=e.split(".");return!t.some(function(e){return e.length<1||e.length>63})&&(!Lt(t.join(""))&&/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)+(\.([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*$/.test(e))}function Ft(e){return!(e.split(".").length<2)&&Mt(e)}function Lt(e){return/^[0-9]+$/.test(e)}function Bt(e){try{new RegExp(e)}catch(t){return!1}return!0}function qt(e){var t=e.split(".");return 4===t.length&&t.every(function(e){return Lt(e)&&parseInt(e)<256})}var Ut=Object(y.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:t("Whitelist"),placeholder:t("Add a domain (example.com or sub.example.com)"),add:K.addWhitelist,remove:K.removeWhitelist,refresh:K.getWhitelist,isValid:Ft,validationErrorMsg:t("Not a valid domain")},e))}),Qt=Object(y.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain (example.com or sub.example.com)"),add:K.addBlacklist,remove:K.removeBlacklist,refresh:K.getBlacklist,isValid:Ft,validationErrorMsg:t("Not a valid domain")},e))}),Vt=Object(y.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),add:K.addRegexlist,remove:K.removeRegexlist,refresh:K.getRegexlist,isValid:Bt,validationErrorMsg:t("Not a valid regular expression")},e))}),Wt=a(442),zt=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement("div",{className:"card border-0 bg-primary"},s.a.createElement("div",{className:"card-block"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:this.props.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,this.props.name),s.a.createElement("p",null,t("Version"),":"," ","master"===this.props.branch?this.props.tag:"vDev"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},t("Details")),s.a.createElement(Wt.a,{isOpen:!this.state.collapsed},s.a.createElement("table",{className:"table table-borderless table-sm table-condensed",style:{marginTop:"1rem",marginBottom:"0"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t("Branch")),s.a.createElement("td",null,this.props.branch)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Tag")),s.a.createElement("td",null,this.props.tag)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Hash")),s.a.createElement("td",null,this.props.hash)))))))}}]),t}(r.Component),Gt=Object(y.b)(["common","settings"])(zt),Jt=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Gt,{name:e("Core"),icon:"far fa-dot-circle fa-2x",branch:this.props.core.branch,hash:this.props.core.hash,tag:this.props.core.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Gt,{name:e("FTL"),icon:"fa fa-industry fa-2x",branch:this.props.ftl.branch,hash:this.props.ftl.hash,tag:this.props.ftl.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Gt,{name:e("API"),icon:"fa fa-bullseye fa-2x",branch:this.props.api.branch,hash:this.props.api.hash,tag:this.props.api.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Gt,{name:e("Web"),icon:"far fa-list-alt fa-2x",branch:this.props.web.branch,hash:this.props.web.hash,tag:this.props.web.tag})))}}]),t}(r.Component),Yt={api:{branch:"unknown",hash:"unknown",tag:"unknown"},core:{branch:"unknown",hash:"unknown",tag:"unknown"},ftl:{branch:"unknown",hash:"unknown",tag:"unknown"},web:{branch:"unknown",hash:"unknown",tag:"unknown"}},Xt=Object(y.b)(["common"])(Jt),Zt=function(e){return s.a.createElement(ye,{apiCall:K.getVersion,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Xt,Object.assign({},Yt,e))},renderOk:function(t){return s.a.createElement(Xt,Object.assign({},t,e))},renderErr:function(){return s.a.createElement(Xt,Object.assign({},Yt,e))}})},Kt=a(451),$t=a(452),ea=a(453),ta=a(443),aa=a(444),na=a(445),ra=a(446),sa=a(447),la=a(448),oa=a(460),ia=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,settings:{active:!1,ip_start:"",ip_end:"",router_ip:"",lease_time:0,domain:"",ipv6_support:!1}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDHCPInfo=function(){a.loadHandler=ge(K.getDHCPInfo()),a.loadHandler.promise.then(function(e){a.setState({settings:e})}).catch(be)},a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState(function(t){return{settings:Object(L.a)({},t.settings,Object(k.a)({},e,r))}})}},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=ge(K.updateDHCPInfo(a.state.settings)),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(be).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isSettingValid=function(e,t){return!a.state.settings.active&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.loadDHCPInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.isSettingValid(this.state.settings.ip_start,qt),n=this.isSettingValid(this.state.settings.ip_end,qt),r=this.isSettingValid(this.state.settings.router_ip,qt),l=this.state.settings.lease_time>=0,o=this.isSettingValid(this.state.settings.domain,Mt),i=this.state.showAlert?s.a.createElement(Tt,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ta.a,{onSubmit:this.saveSettings},i,s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",checked:this.state.settings.active,onChange:this.onChange("active","checked")}),t("Enabled"))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"startIP",sm:2},t("Start IP")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"startIP",disabled:!this.state.settings.active,value:this.state.settings.ip_start,onChange:this.onChange("ip_start","value"),invalid:!a}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"endIP",sm:2},t("End IP")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"endIP",disabled:!this.state.settings.active,value:this.state.settings.ip_end,onChange:this.onChange("ip_end","value"),invalid:!n}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"routerIP",sm:2},t("Router IP")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"routerIP",disabled:!this.state.settings.active,value:this.state.settings.router_ip,onChange:this.onChange("router_ip","value"),invalid:!r}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"leaseTime",sm:2},t("Lease Time")),s.a.createElement(sa.a,{sm:10},s.a.createElement(la.a,null,s.a.createElement(ra.a,{id:"leaseTime",disabled:!this.state.settings.active,value:this.state.settings.lease_time,onChange:function(t){return e.setState(function(e){return{settings:Object(L.a)({},e.settings,{lease_time:parseInt(t.target.value)})}})},invalid:!l}),s.a.createElement(oa.a,{addonType:"append"},"Hours")))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"domain",sm:2},t("Domain")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"domain",disabled:!this.state.settings.active,value:this.state.settings.domain,onChange:this.onChange("domain","value"),invalid:!o}))),s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.ipv6_support,onChange:this.onChange("ipv6_support","checked")}),t("IPv6 Support"))),s.a.createElement(h.a,{type:"submit",disabled:this.state.processing||!a||!n||!r||!l||!o},t("Apply")))}}]),t}(r.Component),ca=Object(y.b)(["common","settings","api-errors"])(ia),ua=a(450),da=a(449),ma=function(e){var t=e.address,a=e.onRemove;return s.a.createElement(da.a,null,t,s.a.createElement(h.a,{color:"danger",size:"sm",className:"pull-right",onClick:a},s.a.createElement("span",{className:"far fa-trash-alt"})))},pa=a(176),fa=[{name:"OpenDNS (ECS)",primaryIpv4:"208.67.222.222",secondaryIpv4:"208.67.220.220",primaryIpv6:"2620:0:ccc::2",secondaryIpv6:"2620:0:ccd::2"},{name:"Google (ECS)",primaryIpv4:"8.8.8.8",secondaryIpv4:"8.8.4.4",primaryIpv6:"2001:4860:4860:0:0:0:0:8888",secondaryIpv6:"2001:4860:4860:0:0:0:0:8844"},{name:"Quad9 (filtered, DNSSEC)",primaryIpv4:"9.9.9.9",secondaryIpv4:"149.112.112.112",primaryIpv6:"2620:fe::fe",secondaryIpv6:"2620:fe::9"},{name:"Quad9 (unfiltered, no DNSSEC)",primaryIpv4:"9.9.9.10",secondaryIpv4:"149.112.112.10",primaryIpv6:"2620:fe::10",secondaryIpv6:"2620:fe::fe:10"},{name:"Quad9 (filtered + ECS)",primaryIpv4:"9.9.9.11",secondaryIpv4:"149.112.112.11",primaryIpv6:"2620:fe::11",secondaryIpv6:""},{name:"Cloudflare",primaryIpv4:"1.1.1.1",secondaryIpv4:"1.0.0.1",primaryIpv6:"2606:4700:4700::1111",secondaryIpv6:"2606:4700:4700::1001"},{name:"Level3",primaryIpv4:"4.2.2.1",secondaryIpv4:"4.2.2.2",primaryIpv6:"",secondaryIpv6:""},{name:"Comodo",primaryIpv4:"8.26.56.26",secondaryIpv4:"8.20.247.20",primaryIpv6:"",secondaryIpv6:""},{name:"DNS.WATCH",primaryIpv4:"84.200.69.80",secondaryIpv4:"84.200.70.40",primaryIpv6:"2001:1608:10:25:0:0:1c04:b12f",secondaryIpv6:"2001:1608:10:25:0:0:9249:d69b"}].flatMap(function(e){var t=function(t,a,n){return{label:e.name+" "+a+" "+n+" ("+t+")",address:t}},a=[];return e.primaryIpv4.length>0&&a.push(t(e.primaryIpv4,"Primary","IPv4")),e.secondaryIpv4.length>0&&a.push(t(e.secondaryIpv4,"Secondary","IPv4")),e.primaryIpv6.length>0&&a.push(t(e.primaryIpv6,"Primary","IPv6")),e.secondaryIpv6.length>0&&a.push(t(e.secondaryIpv6,"Secondary","IPv6")),a}),ha=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(ue.a)(this,Object(de.a)(t).call(this,e))).state={address:"",selected:[]},a.typeahead=void 0,a.getAddress=function(){return 0===a.state.selected.length?a.state.address:a.state.selected[0].address},a.typeahead=s.a.createRef(),a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.isValid(this.getAddress());return s.a.createElement(da.a,null,s.a.createElement(la.a,null,s.a.createElement(pa.Typeahead,{onInputChange:function(t){return e.setState({address:t})},onChange:function(t){return e.setState({selected:t})},options:fa.filter(function(t){return!e.props.upstreams.includes(t.address)}),selected:this.state.selected,emptyLabel:t("Detected custom upstream server"),bodyContainer:!0,ref:this.typeahead}),s.a.createElement(oa.a,{addonType:"append"},s.a.createElement(h.a,{color:"success",size:"sm",onClick:function(){e.props.onAdd(e.getAddress()),e.setState({address:"",selected:[]}),e.typeahead.current.getInstance().clear()},disabled:!a},s.a.createElement("span",{className:"fa fa-plus"})))))}}]),t}(r.Component),ga=Object(y.b)("settings")(ha),ba=function(e,t){return!t.includes(e)&&function(e){var t=e.split("#");return!!qt(t[0])&&(1===t.length||2===t.length&&Lt(t[1]))}(e)},va=function(e){var t=e.upstreams,a=e.onAdd,n=e.onRemove;return s.a.createElement(ua.a,{style:{overflowY:"scroll",maxHeight:"350px"}},t.map(function(e){return s.a.createElement(ma,{key:e,onRemove:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),address:e})}),s.a.createElement(ga,{onAdd:a,isValid:function(e){return ba(e,t)},upstreams:t}))},Ea=function(e){var t=e.settings,a=e.onUpdate,n=e.isRouterIpValid,l=e.isDomainValid,o=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",checked:t.enabled,onChange:function(e){return a(Object(L.a)({},t,{enabled:e.target.checked}))}}),o("Enabled"))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"routerIP",sm:5},o("Router IP")),s.a.createElement(sa.a,{sm:7},s.a.createElement(ra.a,{id:"routerIP",disabled:!t.enabled,value:t.routerIp,onChange:function(e){return a(Object(L.a)({},t,{routerIp:e.target.value}))},invalid:!n}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"localDomain",sm:5},o("Local Domain Name")),s.a.createElement(sa.a,{sm:7},s.a.createElement(ra.a,{id:"localDomain",disabled:!t.enabled,value:t.domain,onChange:function(e){return a(Object(L.a)({},t,{domain:e.target.value}))},invalid:!l}))))},ya=function(e){var t=e.settings,a=e.onUpdate,n=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"listeningBehavior",sm:5},n("Interface listening behavior")),s.a.createElement(sa.a,{sm:7},s.a.createElement(ra.a,{id:"listeningBehavior",type:"select",value:t.listeningType,onChange:function(e){return a(Object(L.a)({},t,{listeningType:e.target.value}))}},s.a.createElement("option",null,"all"),s.a.createElement("option",null,"local"),s.a.createElement("option",null,"single")))),s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",checked:t.fqdnRequired,onChange:function(e){return a(Object(L.a)({},t,{fqdnRequired:e.target.checked}))}}),n("Forward FQDNs only"))),s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",checked:t.bogusPriv,onChange:function(e){return a(Object(L.a)({},t,{bogusPriv:e.target.checked}))}}),n("Only forward public reverse lookups"))),s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{type:"checkbox",checked:t.dnssec,onChange:function(e){return a(Object(L.a)({},t,{dnssec:e.target.checked}))}}),n("Use DNSSEC"))))},ka=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,upstreamDns:[],conditionalForwarding:{enabled:!1,routerIp:"",domain:""},options:{fqdnRequired:!1,bogusPriv:!1,dnssec:!1,listeningType:"single"}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDNSInfo=function(){a.loadHandler=ge(K.getDNSInfo()),a.loadHandler.promise.then(function(e){var t=e.conditional_forwarding.domain,n=0===t.length?"lan":t;a.setState({upstreamDns:e.upstream_dns,conditionalForwarding:{enabled:e.conditional_forwarding.enabled,routerIp:e.conditional_forwarding.router_ip,domain:n},options:{fqdnRequired:e.options.fqdn_required,bogusPriv:e.options.bogus_priv,dnssec:e.options.dnssec,listeningType:e.options.listening_type}})}).catch(be)},a.handleUpstreamAdd=function(e){a.setState({upstreamDns:a.state.upstreamDns.concat(e)})},a.handleUpstreamRemove=function(e){a.setState({upstreamDns:a.state.upstreamDns.filter(function(t){return t!==e})})},a.handleConditionalForwardingUpdate=function(e){a.setState({conditionalForwarding:e})},a.handleDnsOptionsUpdate=function(e){a.setState({options:e})},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=ge(K.updateDNSInfo({upstream_dns:a.state.upstreamDns,conditional_forwarding:{enabled:a.state.conditionalForwarding.enabled,router_ip:a.state.conditionalForwarding.routerIp,domain:a.state.conditionalForwarding.domain},options:{fqdn_required:a.state.options.fqdnRequired,bogus_priv:a.state.options.bogusPriv,dnssec:a.state.options.dnssec,listening_type:a.state.options.listeningType}})),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(be).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isCFSettingValid=function(e,t){return!a.state.conditionalForwarding.enabled&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.loadDNSInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isCFSettingValid(this.state.conditionalForwarding.routerIp,qt),a=this.isCFSettingValid(this.state.conditionalForwarding.domain,Mt),n=this.state.showAlert?s.a.createElement(Tt,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ta.a,{onSubmit:this.saveSettings},n,s.a.createElement(aa.a,{row:!0},s.a.createElement(sa.a,{sm:6},s.a.createElement("h3",null,e("Upstream DNS Servers")),s.a.createElement(va,{onAdd:this.handleUpstreamAdd,onRemove:this.handleUpstreamRemove,upstreams:this.state.upstreamDns})),s.a.createElement(sa.a,{sm:6},s.a.createElement("h3",null,e("Conditional Forwarding")),s.a.createElement(Ea,{settings:this.state.conditionalForwarding,onUpdate:this.handleConditionalForwardingUpdate,isRouterIpValid:t,isDomainValid:a,t:e}),s.a.createElement("h3",null,e("DNS Options")),s.a.createElement(ya,{settings:this.state.options,onUpdate:this.handleDnsOptionsUpdate,t:e}))),s.a.createElement(h.a,{type:"submit",disabled:this.state.processing||!t||!a},e("Apply")))}}]),t}(r.Component),Oa=Object(y.b)(["common","settings"])(ka),wa=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(ta.a,null,s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{className:"bold",for:"interface",sm:4},e("Interface")),s.a.createElement(sa.a,{sm:8},s.a.createElement(ra.a,{plaintext:!0,readOnly:!0,id:"interface",value:this.props.interface}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{className:"bold",for:"ipv4_address",sm:4},e("IPv4 address")),s.a.createElement(sa.a,{sm:8},s.a.createElement(ra.a,{plaintext:!0,readOnly:!0,id:"ipv4_address",value:this.props.ipv4Address}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{className:"bold",for:"ipv6_address",sm:4},e("IPv6 address")),s.a.createElement(sa.a,{sm:8},s.a.createElement(ra.a,{plaintext:!0,readOnly:!0,id:"ipv6_address",value:this.props.ipv6Address}))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{className:"bold",for:"hostname",sm:4},e("Hostname")),s.a.createElement(sa.a,{sm:8},s.a.createElement(ra.a,{plaintext:!0,readOnly:!0,id:"hostname",value:this.props.hostname}))))}}]),t}(r.Component),Ca=Object(y.b)(["common","settings"])(wa),ja=function(e){return s.a.createElement(ye,{apiCall:K.getNetworkInfo,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ca,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))},renderOk:function(t){return s.a.createElement(Ca,Object.assign({},function(e){return{interface:e.interface,ipv4Address:e.ipv4_address,ipv6Address:e.ipv6_address,hostname:e.hostname}}(t),e))},renderErr:function(){return s.a.createElement(Ca,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))}})},Na=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("pre",null,e("Queries"),": ",this.props.queries,s.a.createElement("br",null),e("Filesize"),": ",this.props.fileSize.toLocaleString()," B",s.a.createElement("br",null),e("SQLite version"),": ",this.props.sqliteVersion.toLocaleString(),s.a.createElement("br",null))}}]),t}(r.Component),Sa={fileSize:0,queries:0,sqliteVersion:""},xa=Object(y.b)(["settings"])(Na),Ia=function(e){return s.a.createElement(ye,{apiCall:K.getFTLdb,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(xa,Object.assign({},Sa,e))},renderOk:function(t){return s.a.createElement(xa,Object.assign({},function(e){return{fileSize:e.filesize,queries:e.queries,sqliteVersion:e.sqlite_version}}(t),e))},renderErr:function(){return s.a.createElement(xa,Object.assign({},Sa,e))}})},Da=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"network"},a.setTab=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.tab=function(e,t){return s.a.createElement(re.a,null,s.a.createElement(Kt.a,{active:a.state.activeTab===e,onClick:function(){return a.setTab(e)}},t))},a.tabContent=function(e,t){return s.a.createElement($t.a,{tabId:e},t)},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(se.a,{tabs:!0},this.tab("network",e("Network")),this.tab("dhcp",e("DHCP")),this.tab("dns",e("DNS")),this.tab("ftl",e("FTL"))),s.a.createElement(ea.a,{activeTab:this.state.activeTab},this.tabContent("network",s.a.createElement(ja,null)),this.tabContent("dhcp",s.a.createElement(ca,null)),this.tabContent("dns",s.a.createElement(Oa,null)),this.tabContent("ftl",s.a.createElement(Ia,null))))}}]),t}(r.Component),Aa=Object(y.b)(["common","settings"])(Da),Ha=a(107),Ta=a.n(Ha),Pa=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a.onClick=function(){a.setState({collapsed:!a.state.collapsed})},a.isExpanded=function(){return a.props.error||!a.state.collapsed},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{style:{width:"100%"}},s.a.createElement("div",{className:"card "+(this.props.error?"border-danger":"border-primary")},s.a.createElement("div",{className:"card-header "+(this.props.error?"bg-danger":"bg-primary"),style:{paddingRight:"10px"}},s.a.createElement("h3",{className:"card-title",style:{fontSize:"18px",display:"inline-block",margin:0}},e("Forgot Password")),s.a.createElement("span",{className:"pull-right"},s.a.createElement("button",{type:"button",className:"btn btn-card-tool",onClick:this.onClick},s.a.createElement("i",{className:"fa "+(this.isExpanded()?"fa-minus":"fa-plus")})))),s.a.createElement("div",{className:"card-body bg-light"+(this.isExpanded()?"":" collapse"),style:{padding:"10px"}},e("forgot_password_description"),s.a.createElement("pre",{style:{textAlign:"center"}},"sudo pihole -a -p"))))}}]),t}(r.Component),Ra=Object(y.b)("login")(Pa),_a=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",error:!1,cookiesEnabled:!1},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.handleKeyDown=function(e){"Enter"===e.key&&a.authenticate()},a.authenticate=function(e){e&&e.preventDefault();var t=Ta()("sha256").update(a.state.password).digest("hex");t=Ta()("sha256").update(t).digest("hex"),a.setState({password:"",error:!1}),K.authenticate(t).then(function(e){if("success"!==e.status)return console.log("Failed to log in:"),void console.log(e);K.loggedIn=!0,B.fakeAPI&&(document.cookie="user_id=;");var t=a.props.location.state||{from:{pathname:"/"}};a.props.history.push(t.from.pathname)}).catch(function(){return a.setState({error:!0})})},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){navigator.cookieEnabled&&this.setState({cookiesEnabled:!0})}},{key:"render",value:function(){if(K.loggedIn)return s.a.createElement(d.a,{to:"/"});var e=this.props.t;return s.a.createElement("div",{className:"mainbox col-md-8 offset-md-2 col-lg-6 offset-lg-3",style:{float:"none"}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("img",{src:oe.a,alt:"Logo",width:"30%"})),s.a.createElement("br",null),s.a.createElement("div",{className:"card-title text-center",style:{marginBottom:0}},s.a.createElement("span",{className:"logo-lg",style:{fontSize:"25px"}},"Pi-",s.a.createElement("b",null,"hole"))),s.a.createElement("div",{className:"login-box-msg"},e("Sign in to start your session"),this.props.location.state&&this.props.location.state.from.pathname in tn(e)?s.a.createElement(r.Fragment,null,s.a.createElement("br",null),e('You will be transferred to the "{{page}}" page',{page:tn(e)[this.props.location.state.from.pathname]})):null,this.state.cookiesEnabled?null:s.a.createElement("div",{className:"text-center",style:{color:"#F00"}},e("Verify that cookies are allowed for {{host}}",{host:window.location.host}))),this.state.error?s.a.createElement("div",{className:"form-group has-error login-box-msg"},s.a.createElement("label",{className:"control-label"},s.a.createElement("i",{className:"fa fa-times-circle-o"})," ",e("Wrong Password!"))):null),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{id:"loginform",onSubmit:this.authenticate},s.a.createElement("div",{className:"input-group"+(this.state.error?" has-error":"")},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.handlePasswordChange,onKeyDown:this.handleKeyDown,placeholder:e("Password"),autoFocus:!0}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{type:"submit",className:"btn btn-primary"},e("Log in")))),s.a.createElement("br",null),s.a.createElement(Ra,{error:this.state.error})))))}}]),t}(r.Component),Ma=Object(y.b)(["login","location"])(_a),Fa=function(e){function t(){return Object(ie.a)(this,t),Object(ue.a)(this,Object(de.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentWillMount",value:function(){K.loggedIn=!1,B.fakeAPI?document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;":K.logout()}},{key:"render",value:function(){return s.a.createElement(d.a,{to:"/"})}}]),t}(r.Component),La=function(e){var t=e.name,a=e.icon,n=e.onClick,r=void 0===n?function(e){return e.preventDefault()}:n;return s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{href:"#",onClick:r,className:"nav-link"},s.a.createElement("i",{className:"nav-icon "+a}),t))},Ba=a(458),qa=a(454),Ua=a(455),Qa=a(456),Va=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={processing:!1,customModalShown:!1,customTime:60,customMultiplier:60},a.updateHandler=void 0,a.getStatusFromAction=function(e){switch(e){case"enable":return"enabled";case"disable":return"disabled"}},a.setStatus=function(e,t){a.state.processing||(a.setState({processing:!0}),a.updateHandler=ge(K.setStatus(e,t)),a.updateHandler.promise.then(function(){return a.props.refresh({status:a.getStatusFromAction(e)})}).finally(function(){return a.setState({processing:!1})}))},a.toggleModal=function(){a.setState({customModalShown:!a.state.customModalShown})},a.submitCustom=function(e){e.preventDefault(),a.setState({customModalShown:!1}),a.setStatus("disable",a.state.customTime*a.state.customMultiplier)},a.renderModal=function(){var e=a.props.t;return s.a.createElement(Ba.a,{isOpen:a.state.customModalShown,toggle:a.toggleModal,style:{maxWidth:"300px"}},s.a.createElement(ta.a,{onSubmit:a.submitCustom},s.a.createElement(qa.a,{toggle:a.toggleModal},e("Custom time")),s.a.createElement(Ua.a,null,s.a.createElement(la.a,null,s.a.createElement(ra.a,{type:"number",value:a.state.customTime,onChange:function(e){return a.setState({customTime:parseInt(e.target.value)})}}),s.a.createElement(oa.a,{addonType:"append"},s.a.createElement(ra.a,{type:"select",value:a.state.customMultiplier,onChange:function(e){return a.setState({customMultiplier:parseInt(e.target.value)})}},s.a.createElement("option",{value:1},e("Seconds")),s.a.createElement("option",{value:60},e("Minutes")))))),s.a.createElement(Qa.a,null,s.a.createElement(h.a,{type:"submit"},e("Apply")),s.a.createElement(h.a,{onClick:a.toggleModal},e("Cancel")))))},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props,a=t.t;switch(t.status){case"enabled":return s.a.createElement(Se,{name:a("Disable"),icon:"fa fa-stop",isOpen:!1},s.a.createElement(La,{name:a("Permanently"),icon:"fa fa-stop",onClick:function(){return e.setStatus("disable")}}),s.a.createElement(La,{name:a("For {{time}} seconds",{time:10}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",10)}}),s.a.createElement(La,{name:a("For {{time}} seconds",{time:30}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",30)}}),s.a.createElement(La,{name:a("For {{time}} minutes",{time:5}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",300)}}),s.a.createElement(La,{name:a("Custom time"),icon:"fa fa-clock",onClick:this.toggleModal}),this.renderModal());case"disabled":return s.a.createElement(La,{name:a("Enable"),icon:"fa fa-play",onClick:function(){return e.setStatus("enable")}});case"unknown":default:return null}}}]),t}(r.Component),Wa=Object(y.b)("common")(Va),za={layout:"boxed",language:"en"},Ga=function(){var e=localStorage.getItem("webPreferences");if(null===e)return za;try{return JSON.parse(e)}catch(t){return za}},Ja={settings:Ga(),refresh:function(){}},Ya=s.a.createContext(Ja),Xa=function(e){var t=e.children,a=Object(pe.a)(e,["children"]);return s.a.createElement(ye,{apiCall:K.getPreferences,renderInitial:function(){return s.a.createElement(Ya.Provider,Object.assign({value:Ja},a),t)},renderOk:function(e,n){return localStorage.setItem("webPreferences",JSON.stringify(e)),s.a.createElement(Ya.Provider,Object.assign({value:{settings:e,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(Ya.Provider,Object.assign({value:{settings:Ga(),refresh:n}},a),t)}})},Za=a(83),Ka=function(e){function t(){var e,a;Object(ie.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ue.a)(this,(e=Object(de.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,translateMessage:!0,error:null,settings:a.props.settings},a.loadHandler=void 0,a.updateHandler=void 0,a.loadPreferences=function(){a.loadHandler=ge(K.getPreferences()),a.loadHandler.promise.then(function(e){a.setState({settings:e})}).catch(be)},a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState(function(t){return{settings:Object(L.a)({},t.settings,Object(k.a)({},e,r))}})}},a.saveSettings=function(e){e.preventDefault(),a.setState({alertMessage:"Processing...",error:null,alertType:"info",showAlert:!0,processing:!0,translateMessage:!0}),a.updateHandler=ge(K.updatePreferences(a.state.settings)),a.updateHandler.promise.then(function(){a.setState({alertMessage:"Successfully saved preferences",alertType:"success",showAlert:!0,processing:!1,translateMessage:!0}),a.props.refresh(a.state.settings)}).catch(be).catch(function(e){var t="",n=null,r=!0;e instanceof Error?(t=e.message,r=!1):(t="API Error: {{error}}",n=e),a.setState({alertMessage:t,error:n,alertType:"danger",showAlert:!0,processing:!1,translateMessage:r})})},a.hideAlert=function(){a.setState({showAlert:!1})},a.getAlertMessage=function(){var e=a.props.t;return a.state.error?e(a.state.alertMessage,{error:e(a.state.error.key,a.state.error.data)}):a.state.translateMessage?e(a.state.alertMessage):a.state.alertMessage},a}return Object(me.a)(t,e),Object(ce.a)(t,[{key:"componentDidMount",value:function(){this.loadPreferences()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.state.showAlert?s.a.createElement(Tt,{message:this.getAlertMessage(),type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ta.a,{onSubmit:this.saveSettings},t,s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"layout",sm:2},e("Layout")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"layout",type:"select",value:this.state.settings.layout,onChange:this.onChange("layout","value")},s.a.createElement("option",{value:"boxed"},e("Boxed")),s.a.createElement("option",{value:"traditional"},e("Full"))))),s.a.createElement(aa.a,{row:!0},s.a.createElement(na.a,{for:"language",sm:2},e("Language")),s.a.createElement(sa.a,{sm:10},s.a.createElement(ra.a,{id:"language",type:"select",value:this.state.settings.language,onChange:this.onChange("language","value")},Za.map(function(e){return s.a.createElement("option",{key:e,value:e},e)})))),s.a.createElement(h.a,{type:"submit",disabled:this.state.processing},e("Apply")))}}]),t}(r.Component),$a=Object(y.b)(["common","settings","api-errors","preferences"])(Ka),en=function(){return s.a.createElement(Ya.Consumer,null,function(e){var t=e.settings,a=e.refresh;return s.a.createElement($a,{settings:t,refresh:a})})},tn=function(e){return{"/dashboard":e("Dashboard"),"/query-log":e("Query Log"),"/whitelist":e("Whitelist"),"/blacklist/exact":"".concat(e("Blacklist")," (").concat(e("Exact"),")"),"/blacklist/regex":"".concat(e("Blacklist")," (").concat(e("Regex"),")"),"/settings/versions":e("Versions"),"/settings/networking":e("Networking"),"/settings/preferences":e("Preferences"),"/login":e("Login"),"/logout":e("Logout")}},an=[{name:"Dashboard",url:"/dashboard",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"row"},s.a.createElement(Me,null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(Ue,null))),K.loggedIn?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(Ge,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement($e,null)),s.a.createElement("div",{className:"col-md-6"},s.a.createElement(tt,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(ot,null)),s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(dt,null)),s.a.createElement("div",{className:"col-md-6 col-xl-4"},s.a.createElement(ht,null)))):null)},icon:"fa fa-tachometer-alt",auth:!1},{name:"Query Log",url:"/query-log",component:It,icon:"fa fa-database",auth:!0},{name:"Whitelist",url:"/whitelist",component:Ut,icon:"far fa-check-circle",auth:!1},{name:"Blacklist",url:"/blacklist",icon:"fa fa-ban",auth:!1,children:[{name:"Exact",url:"/blacklist/exact",component:Qt,icon:"fa fa-ban",auth:!1},{name:"Regex",url:"/blacklist/regex",component:Vt,icon:"fa fa-ban",auth:!1}]},{customComponent:function(){return s.a.createElement(Oe.Consumer,null,function(e){var t=e.status,a=e.refresh;return s.a.createElement(Wa,{status:t,refresh:a})})},fakeRoute:!0,auth:!0},{name:"Settings",url:"/settings",icon:"fa fa-wrench",auth:!0,children:[{name:"Versions",url:"/settings/versions",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"container-flex"},s.a.createElement(Zt,null)))},icon:"fa fa-download",auth:!0},{name:"Networking",url:"/settings/networking",component:Aa,icon:"fa fa-sitemap",auth:!0},{name:"Preferences",url:"/settings/preferences",component:function(){return s.a.createElement(en,null)},icon:"fa fa-sliders-h",auth:!0}]},{name:"Login",url:"/login",component:Ma,icon:"fa fa-user",auth:!1,authStrict:!0},{name:"Logout",url:"/logout",component:Fa,icon:"fa fa-user-times",auth:!0,authStrict:!0}],nn=function(e){var t=e.children;return s.a.createElement(we,null,s.a.createElement(Xa,null,s.a.createElement(E,null,t)))},rn=function(){return s.a.createElement(Ya.Consumer,null,function(e){return function(e){switch(e){case"boxed":document.body.classList.add("boxcontainer"),document.body.classList.add("background-image");break;case"traditional":document.body.classList.remove("boxcontainer"),document.body.classList.remove("background-image")}}(e.settings.layout),null})},sn=function(){return s.a.createElement(Ya.Consumer,null,function(e){var t,a=e.settings;return t=a.language,bt.a.language!==t&&bt.a.changeLanguage(t),null})},ln=function e(t){if(!0!==t.fakeRoute){if(t.children)return t.children.map(e);var a=t;return a.auth?s.a.createElement(on,{key:a.url,path:a.url,component:a.component}):s.a.createElement(u.a,{key:a.url,path:a.url,component:a.component})}},on=function(e){var t=e.component;return s.a.createElement(u.a,{path:e.path,render:function(e){return K.loggedIn?s.a.createElement(t,e):s.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}})},cn=a(177),un=a.n(cn),dn=a(178),mn=a.n(dn);K.loggedIn=document.cookie.includes("user_id="),bt.a.use(un.a).use(mn.a).use(y.a).init({fallbackLng:"en",whitelist:Za,ns:["common"],defaultNS:"common",fallbackNS:["dashboard","footer","lists","location","login","query-log","settings","api-errors","preferences","time-ranges"],nsSeparator:!1,keySeparator:!1,returnEmptyString:!1,debug:B.developmentMode,interpolation:{escapeValue:!1},backend:{loadPath:"/i18n/{{lng}}/{{ns}}.json"},react:{wait:!0}}),l.render(r.createElement(i.a,{basename:""},r.createElement(c.a,null,r.createElement(u.a,{path:"/",name:"Home",component:function(e){return s.a.createElement("div",{className:"app"},s.a.createElement(nn,null,s.a.createElement(rn,null),s.a.createElement(sn,null),s.a.createElement(ae,null),s.a.createElement("div",{className:"app-body"},s.a.createElement(De,Object.assign({items:an},e)),s.a.createElement("main",{className:"main",onClick:te},s.a.createElement("div",{className:"container-fluid",style:{marginTop:"1.5rem"}},s.a.createElement(c.a,null,s.a.createElement(d.a,{exact:!0,from:"/",to:"/dashboard"}),an.map(ln))))),s.a.createElement(He,null)))}}))),document.getElementById("root"))},79:function(e,t,a){e.exports=a.p+"static/media/logo.00d87c43.svg"},83:function(e){e.exports=["ar","bg","ca","cs","da","de","el","en","es","fr","he","hr","hu","it","nl","pl","pt","ro","sk","sl","sv","tr","zh"]}},[[182,1,2]]]);
//# sourceMappingURL=main.88cbaf8d.chunk.js.map