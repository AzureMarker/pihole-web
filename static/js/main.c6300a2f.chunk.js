(this["webpackJsonppi-hole_web"]=this["webpackJsonppi-hole_web"]||[]).push([[0],{154:function(e,t,a){e.exports=a.p+"static/media/logo.efd0af1e.svg"},157:function(e){e.exports=JSON.parse('[{"code":"ar","name":"Arabic"},{"code":"bg","name":"Bulgarian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"it","name":"Italian"},{"code":"nl","name":"Dutch"},{"code":"oc","name":"Occitan"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovene"},{"code":"sv","name":"Swedish"},{"code":"tr","name":"Turkish"},{"code":"vi","name":"Vietnamese"},{"code":"zh","name":"Chinese"}]')},348:function(e,t,a){e.exports=a(753)},553:function(e,t,a){},753:function(e,t,a){"use strict";a.r(t);a(349),a(358);var n,r=a(0),s=a.n(r),i=a(36),l=a.n(i),o=a(64),c=a(81),u=(a(551),a(552),a(553),a(336)),d=a.n(u),m=a(754),p=a(159),h={range:null,update:function(){}},f=s.a.createContext(h),g=function(e){var t=e.children,a=Object(r.useState)(h.range),n=Object(p.a)(a,2),i=n[0],l=n[1];return s.a.createElement(f.Provider,{value:{range:i,update:l}},t)},b=(a(284),a(7)),v=a(34),E=a(32),y=a.n(E),k=y()(),O=y()().subtract(1,"day"),w=y()().startOf("day"),C=y()().subtract(1,"days").startOf("day"),j=y()().subtract(1,"days").endOf("day"),N=y()().subtract(7,"days"),S=y()().subtract(30,"days"),x=y()().startOf("month"),I=y()().subtract(1,"month").startOf("month"),D=y()().subtract(1,"month").endOf("month"),A=y()().startOf("year"),H=y()(0),R=function(e){var t;return t={},Object(v.a)(t,e("Last 24 Hours"),[O,k]),Object(v.a)(t,e("Today"),[w,k]),Object(v.a)(t,e("Yesterday"),[C,j]),Object(v.a)(t,e("Last 7 Days"),[N,k]),Object(v.a)(t,e("Last 30 Days"),[S,k]),Object(v.a)(t,e("This Month"),[x,k]),Object(v.a)(t,e("Last Month"),[I,D]),Object(v.a)(t,e("This Year"),[A,k]),Object(v.a)(t,e("All Time"),[H,k]),t},T=Object(b.b)("time-ranges")((function(e){var t=e.range,a=e.onSelect,n=e.t,i=R(n),l=n("Last 24 Hours"),o=n("Today"),c=function(e){var t=e.t;return e.showLabel?e.range?"Custom Range"===e.range.name?e.range.from.toDate().toLocaleString()+" - "+e.range.until.toDate().toLocaleString():e.range.name:t("Last 24 Hours"):null}(e),u=e.size?e.size:"sm";return s.a.createElement(d.a,{startDate:t?t.from:i[l][0],endDate:t?t.until:i[l][1],maxDate:i[o][1],onApply:function(e,t){t.startDate.isSame(i[l][0])&&t.endDate.isSame(i[l][1])?a(null):a({from:t.startDate,until:t.endDate,name:t.chosenLabel})},timePicker:!0,showDropdowns:!0,ranges:i},s.a.createElement(m.a,{color:"light",size:u},s.a.createElement("i",{className:"far fa-clock fa-lg"}),c?s.a.createElement(r.Fragment,null,"\xa0 \xa0",c):null))})),_=function(e){var t=e.size;return s.a.createElement(f.Consumer,null,(function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(T,{range:e.range,onSelect:e.update,showLabel:!0,size:t}))}))},P=a(8),F=a(31),M=function(e){return z.loggedIn&&401===e.status?(document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload(),Promise.reject({isCanceled:!0})):Promise.resolve(e)},L=function(e){return e.isCanceled||e instanceof Error?Promise.reject(e):e.json()},B=function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)},U=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},q=function(e){return U({from:e.from.unix(),until:e.until.unix()})};Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FAKE_API:"1"}).REACT_APP_CUSTOM_API_URL;(n={developmentMode:!1,fakeAPI:!1,apiPath:"/api"}).fakeAPI=!0,n.apiPath="/fakeAPI";var W=n,z=new function e(t){var a=this;Object(P.a)(this,e),this.http=t,this.loggedIn=!1,this.authenticate=function(e){return a.http.get("auth",{headers:{"X-Pi-hole-Authenticate":e}})},this.checkAuthStatus=function(){return a.http.get("auth")},this.logout=function(){return a.http.delete("auth")},this.getSummary=function(){return a.http.get("stats/summary")},this.getSummaryDb=function(e){return a.http.get("stats/database/summary?"+q(e))},this.getHistoryGraph=function(){return a.http.get("stats/overTime/history")},this.getHistoryGraphDb=function(e,t){return a.http.get("stats/database/overTime/history?interval="+t+"&"+q(e))},this.getClientsGraph=function(){return a.http.get("stats/overTime/clients")},this.getClientsGraphDb=function(e,t){return a.http.get("stats/database/overTime/clients?interval="+t+"&"+q(e))},this.getQueryTypes=function(){return a.http.get("stats/query_types")},this.getQueryTypesDb=function(e){return a.http.get("stats/database/query_types?"+q(e))},this.getUpstreams=function(){return a.http.get("stats/upstreams")},this.getUpstreamsDb=function(e){return a.http.get("stats/database/upstreams?"+q(e))},this.getTopDomains=function(){return a.http.get("stats/top_domains")},this.getTopDomainsDb=function(e){return a.http.get("stats/database/top_domains?"+q(e))},this.getTopBlockedDomains=function(){var e=a.http.config.fakeAPI?"stats/top_blocked":"stats/top_domains?blocked=true";return a.http.get(e)},this.getTopBlockedDomainsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked?":"stats/database/top_domains?blocked=true&";return a.http.get(t+q(e))},this.getTopClients=function(){return a.http.get("stats/top_clients")},this.getTopClientsDb=function(e){return a.http.get("stats/database/top_clients?"+q(e))},this.getTopBlockedClients=function(){var e=a.http.config.fakeAPI?"stats/top_blocked_clients":"stats/top_clients?blocked=true";return a.http.get(e)},this.getTopBlockedClientsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked_clients?":"stats/database/top_clients?blocked=true&";return a.http.get(t+q(e))},this.getHistory=function(e){return a.http.get("stats/history?"+U(e))},this.getExactWhitelist=function(){return a.http.get("dns/whitelist/exact")},this.getExactBlacklist=function(){return a.http.get("dns/blacklist/exact")},this.getRegexWhitelist=function(){return a.http.get("dns/whitelist/regex")},this.getRegexBlacklist=function(){return a.http.get("dns/blacklist/regex")},this.addExactWhitelist=function(e){return a.http.post("dns/whitelist/exact",{domain:e})},this.addExactBlacklist=function(e){return a.http.post("dns/blacklist/exact",{domain:e})},this.addRegexWhitelist=function(e){return a.http.post("dns/whitelist/regex",{domain:e})},this.addRegexBlacklist=function(e){return a.http.post("dns/blacklist/regex",{domain:e})},this.removeExactWhitelist=function(e){return a.http.delete("dns/whitelist/exact/"+e)},this.removeExactBlacklist=function(e){return a.http.delete("dns/blacklist/exact/"+e)},this.removeRegexWhitelist=function(e){return a.http.delete("dns/whitelist/regex/"+encodeURIComponent(e))},this.removeRegexBlacklist=function(e){return a.http.delete("dns/blacklist/regex/"+encodeURIComponent(e))},this.getStatus=function(){return a.http.get("dns/status")},this.setStatus=function(e,t){return a.http.post("dns/status",{action:e,time:t})},this.getNetworkInfo=function(){return a.http.get("settings/network")},this.getVersion=function(){return a.http.get("version")},this.getFTLdb=function(){return a.http.get("settings/ftldb")},this.getCacheInfo=function(){return a.http.get("dns/cacheinfo")},this.getDNSInfo=function(){return a.http.get("settings/dns")},this.getDHCPInfo=function(){return a.http.get("settings/dhcp")},this.updateDHCPInfo=function(e){return a.http.put("settings/dhcp",e)},this.updateDNSInfo=function(e){return a.http.put("settings/dns",e)},this.getPreferences=function(){return a.http.get("settings/web")},this.updatePreferences=function(e){return a.http.put("settings/web",e)}}(new function e(t){var a=this;Object(P.a)(this,e),this.config=t,this.handleResponse=function(e){return M(e).then(L).then(B)},this.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(a.urlFor(e),Object(F.a)({method:"GET",credentials:a.credentialType()},t)).then(a.handleResponse)},this.post=function(e,t){return fetch(a.urlFor(e),{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.put=function(e,t){return fetch(a.urlFor(e),{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.delete=function(e){return fetch(a.urlFor(e),{method:"DELETE",credentials:a.credentialType()}).then(a.handleResponse)},this.urlFor=function(e){return a.config.apiPath+"/"+e},this.credentialType=function(){return a.config.developmentMode?"include":"same-origin"}}(W)),Q=function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized"),document.body.classList.toggle("brand-minimized")},V=function(){document.body.classList.toggle("sidebar-show")},G=function(){document.body.classList.remove("sidebar-show")},J=function(){return s.a.createElement("header",{className:"app-header navbar"},s.a.createElement("button",{className:"navbar-toggler d-lg-none text-white ml-3",onClick:V,type:"button"},"\u2630"),s.a.createElement(o.b,{to:"/dashboard",className:"navbar-brand text-center"},s.a.createElement("span",{className:"text-white",style:{lineHeight:"40px"}},s.a.createElement("span",{className:"navbar-brand-full"},"Pi-",s.a.createElement("b",null,"hole")),s.a.createElement("span",{className:"navbar-brand-minimized"},"P",s.a.createElement("b",null,"h")))),s.a.createElement("ul",{className:"nav navbar-nav d-md-down-none mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link navbar-toggler text-white sidebar-toggler",type:"button",onClick:Q},"\u2630")),z.loggedIn&&window.location.pathname.endsWith("/dashboard")?s.a.createElement("li",null,s.a.createElement(_,null)):null))},Y=a(755),X=a(756),Z=a(154),K=a.n(Z),$=a(11),ee=a(14),te=a(13),ae=a(15),ne=a(44);function re(e,t){var a=!1,n=null,r=function(e,r,s,i){a?r({isCanceled:!0}):(i?r(s):e(s),t&&(n=setTimeout(t.repeat,t.interval)))};return{promise:new Promise((function(t,a){e.then((function(e){return r(t,a,e,!1)}),(function(e){return r(t,a,e,!0)}))})),cancel:function(){null!==n&&clearTimeout(n),a=!0}}}var se=function(e){if(!e.isCanceled)throw e},ie=function(){function e(t){Object(P.a)(this,e),this.value=t}return Object($.a)(e,[{key:"isErr",value:function(){return!1}},{key:"isOk",value:function(){return!0}},{key:"unwrap",value:function(){return this.value}},{key:"unwrapErr",value:function(){throw Error("unwrapErr on a Result.Ok")}}]),e}(),le=function(){function e(t){Object(P.a)(this,e),this.err=t}return Object($.a)(e,[{key:"isErr",value:function(){return!0}},{key:"isOk",value:function(){return!1}},{key:"unwrap",value:function(){throw Error("unwrap on a Result.Err")}},{key:"unwrapErr",value:function(){return this.err}}]),e}(),oe=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={apiResult:null},a.dataHandle=void 0,a.loadData=function(e){var t=0!==a.props.repeatOptions.interval?{repeat:a.loadData,interval:a.props.repeatOptions.interval}:void 0;if(a.dataHandle&&a.dataHandle.cancel(),e)return a.setState({apiResult:new ie(e)}),void(t&&setTimeout((function(){return a.loadData()}),t.interval));a.dataHandle=re(a.props.apiCall(),t),a.dataHandle.promise.then((function(e){a.setState({apiResult:new ie(e)})})).catch((function(e){if(!a.props.repeatOptions.ignoreCancel)throw e;se(e)})).catch((function(e){a.setState({apiResult:new le(e)})}))},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.dataHandle&&this.dataHandle.cancel()}},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.props.flushOnUpdate&&(this.setState({apiResult:null}),this.loadData())}},{key:"render",value:function(){return this.state.apiResult?this.state.apiResult.isOk()?this.props.renderOk(this.state.apiResult.unwrap(),this.loadData):this.props.renderErr(this.state.apiResult.unwrapErr(),this.loadData):this.props.renderInitial()}}]),t}(r.Component);oe.defaultProps={repeatOptions:{ignoreCancel:!0,interval:0},flushOnUpdate:!0};var ce={status:"unknown",refresh:function(){}},ue=s.a.createContext(ce),de=function(e){var t=e.children,a=Object(ne.a)(e,["children"]);return s.a.createElement(oe,{apiCall:z.getStatus,repeatOptions:{interval:5e3,ignoreCancel:!0},flushOnUpdate:!1,renderInitial:function(){return s.a.createElement(ue.Provider,Object.assign({value:ce},a),t)},renderOk:function(e,n){return s.a.createElement(ue.Provider,Object.assign({value:{status:e.status,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(ue.Provider,Object.assign({value:{status:ce.status,refresh:n}},a),t)}})},me=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).isEnabled=function(){return"enabled"===a.props.status},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-"+(this.isEnabled()?"success":"danger")}),"\xa0",e(this.isEnabled()?"Enabled":"Disabled"))}}]),t}(r.Component),pe=Object(b.b)("common")(me),he=function(){return s.a.createElement(ue.Consumer,null,(function(e){var t=e.status;return s.a.createElement(pe,{status:t})}))},fe=function(e){var t=e.name,a=e.icon,n=e.isOpen,r=e.children;return s.a.createElement("li",{className:"nav-item nav-dropdown"+(n?" open":"")},s.a.createElement("button",{className:"nav-link nav-dropdown-toggle",onClick:ge},s.a.createElement("i",{className:"nav-icon "+a}),t),s.a.createElement("ul",{className:"nav-dropdown-items"},r))},ge=function(e){e.preventDefault(),e.target.parentElement.classList.toggle("open")},be=function(e){var t=e.item,a=e.t;return s.a.createElement(Y.a,null,s.a.createElement(o.c,{to:t.url,onClick:G,className:"nav-link",activeClassName:"active"},s.a.createElement("i",{className:"nav-icon "+t.icon}),a(t.name)))},ve=function(e){var t=e.item,a=e.t,n=e.location;return s.a.createElement(fe,{name:a(t.name),icon:t.icon,isOpen:n.pathname.startsWith(t.url)},s.a.createElement(Ee,{items:t.children,t:a,location:n}))},Ee=function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement(r.Fragment,null,t.map((function(e,t){if(e.auth&&!z.loggedIn)return null;if(e.authStrict&&e.auth!==z.loggedIn)return null;if(void 0!==e.customComponent){var r=e.customComponent;return s.a.createElement(r,{key:t})}return e.children?s.a.createElement(ve,{item:e,key:t,t:a,location:n}):s.a.createElement(be,{item:e,key:t,t:a})})))},ye=Object(b.b)(["common","location"])((function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"sidebar-nav"},s.a.createElement(X.a,null,s.a.createElement("li",{className:"nav-title",style:{textTransform:"none"}},s.a.createElement("img",{src:K.a,className:"img-responsive float-left",style:{height:"67px"},alt:""}),s.a.createElement("p",{className:"float-left pl-3 text-white mb-0",style:{fontSize:"0.875rem",lineHeight:"1"}},a("Status")),s.a.createElement("br",null),s.a.createElement("span",{className:"pl-3"},s.a.createElement(he,null))),s.a.createElement(Ee,{items:t,t:a,location:n}))))})),ke=function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(ye,e))},Oe=function(e){var t=e.updateAvailable,a=void 0!==t&&t,n=e.t;return a?s.a.createElement("div",{className:"ml-auto"},s.a.createElement(o.b,{to:"/settings/versions"},n("Update Available"))):null},we=function(e){var t=e.t;return s.a.createElement("a",{id:"paypalDonation",href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3J2L3Z4DHW9UY",target:"_blank",rel:"noopener noreferrer"},"\xa0",t("Donate"))},Ce=Object(b.b)(["common","footer"])((function(e){var t=e.t;return s.a.createElement("footer",{className:"app-footer"},s.a.createElement("div",null,s.a.createElement("i",{className:"fab fa-paypal"}),s.a.createElement("strong",null,s.a.createElement(we,{t:t}))," ",t("if you found this useful")),s.a.createElement(Oe,e))})),je=function(){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(Ce,null))},Ne=function(e){function t(){return Object(P.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-success stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-globe-americas fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.totalQueries),s.a.createElement("p",{className:"mb-0"},e("Total Queries ({{count}} clients)",{count:this.props.uniqueClients}))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-primary stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-hand-paper fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.blockedQueries),s.a.createElement("p",{className:"mb-0"},e("Queries Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-warning stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-chart-pie fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.percentBlocked),s.a.createElement("p",{className:"mb-0"},e("Percent Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-danger stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-list-alt fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.gravityDomains),s.a.createElement("p",{className:"mb-0"},e("Domains On Blocklist"))))))}}]),t}(r.Component),Se={totalQueries:"Lost",blockedQueries:"Connection",percentBlocked:"To",gravityDomains:"API",uniqueClients:0},xe={blockedQueries:"---",totalQueries:"---",percentBlocked:"---",gravityDomains:"---",uniqueClients:0},Ie=Object(b.b)(["common","dashboard"])(Ne),De=function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(oe,{apiCall:function(){return t.range?z.getSummaryDb(t.range):z.getSummary()},repeatOptions:t.range?void 0:{interval:5e3,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ie,Object.assign({},xe,e))},renderOk:function(t){return s.a.createElement(Ie,Object.assign({},function(e){return{totalQueries:e.sum_queries.toLocaleString(),blockedQueries:e.blocked_queries.toLocaleString(),percentBlocked:e.percent_blocked.toFixed(2).toLocaleString()+"%",gravityDomains:e.gravity_size.toLocaleString(),uniqueClients:e.total_clients}}(t),e))},renderErr:function(){return s.a.createElement(Ie,Object.assign({},Se,e))}})}))},Ae=function(e){return("00"+e).substr(-2,2)},He=function(e){return Math.ceil((e.until.unix()-e.from.unix())/144)},Re=a(104),Te=function(e){function t(){return Object(P.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t,t={labels:this.props.labels,datasets:[{label:e("Total Queries"),data:this.props.domains_over_time,fill:!0,backgroundColor:"rgba(220,220,220,0.5)",borderColor:"rgba(0, 166, 90,.8)",pointBorderColor:"rgba(0, 166, 90,.8)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"},{label:e("Blocked Queries"),data:this.props.blocked_over_time,fill:!0,backgroundColor:"rgba(0,192,239,0.5)",borderColor:"rgba(0,192,239,1)",pointBorderColor:"rgba(0,192,239,1)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"}]},a={tooltips:{enabled:!0,mode:"x-axis",callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=Ae(n)+":"+Ae(r-5)+":00",i=Ae(n)+":"+Ae(r+4)+":59";return e("Queries from {{from}} to {{to}}",{from:s,to:i})},label:function(e,t){if(1===e.datasetIndex){var a=0,n=t.datasets[0].data[e.index],r=t.datasets[1].data[e.index];return n>0&&(a=100*r/n),t.datasets[e.datasetIndex].label+": "+e.yLabel+" ("+a.toFixed(1)+"%)"}return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1},n=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Queries Over {{range}}",{range:n})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Re.b,{width:970,height:170,data:t,options:a})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),_e={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",domains_over_time:[],blocked_over_time:[]},Pe=Object(b.b)(["dashboard","time-ranges"])(Te),Fe=function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(oe,{apiCall:function(){return t.range?z.getHistoryGraphDb(t.range,He(t.range)):z.getHistoryGraph()},repeatOptions:t.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Pe,Object.assign({},_e,e))},renderOk:function(a){return s.a.createElement(Pe,Object.assign({},function(e,t){var a="hour";t?t.until.diff(t.from,"day")>1&&(a="day"):e=e.slice(0,-1);var n=e.map((function(e){return new Date(1e3*e.timestamp)})),r=e.map((function(e){return e.total_queries})),s=e.map((function(e){return e.blocked_queries}));return{loading:!1,labels:n,timeUnit:a,rangeName:t?t.name:void 0,domains_over_time:r,blocked_over_time:s}}(a,t.range),e))},renderErr:function(){return s.a.createElement(Pe,Object.assign({},_e,e))}})}))},Me=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={tooltip:null},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tooltip,a=Date.now();if(this.props.handler.custom=function(t){0===t.opacity&&e.setState({tooltip:t});var n=Date.now();n-a<50||(a=n,e.setState({tooltip:t}))},null===t||0===t.opacity||null===this.props.chart.current)return null;var n=this.props.chart.current.chartInstance.canvas.getBoundingClientRect(),r=t.caretX;document.offsetWidth-t.caretX<400&&(r=document.offsetWidth-400),t.caretX<100&&(r=100);var i={opacity:1,left:n.left+r+"px",top:n.top+t.caretY+window.scrollY+"px",fontFamily:t._bodyFontFamily,fontSize:t.bodyFontSize+"px",fontStyle:t._bodyFontStyle,padding:t.yPadding+"px "+t.xPadding+"px"},l=[];return t.body&&(l=t.body.map((function(e){return e.lines})).map((function(e,a){return{data:e[0],colors:t.labelColors[a]}}))),l.sort((function(e,t){return e.data.split(": ")[0].localeCompare(t.data.split(": ")[0])})),s.a.createElement("div",{className:"chartjs-tooltip",style:i},s.a.createElement("table",null,s.a.createElement("thead",null,t.title.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("th",null,e))}))),s.a.createElement("tbody",null,l.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"chartjs-tooltip-key",style:{background:e.colors.backgroundColor,borderColor:e.colors.borderColor,borderWidth:"2px"}}),e.data))})))))}}]),t}(r.Component),Le=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).graphRef=void 0,a.graphRef=s.a.createRef(),a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t,t={tooltips:{enabled:!1,mode:"x-axis",callbacks:{title:function(t){var a=y()(t[0].xLabel,"HH:mm"),n=a.clone().subtract(5,"minutes"),r=a.clone().add(4,"minutes").add(59,"seconds"),s=n.format("HH:mm:ss"),i=r.format("HH:mm:ss");return e("Client activity from {{from}} to {{to}}",{from:s,to:i})},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]},maintainAspectRatio:!1},a=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Clients Over {{range}}",{range:a})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Re.b,{width:970,height:170,data:{labels:this.props.labels,datasets:this.props.datasets},options:t,ref:this.graphRef})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null,l.a.createPortal(s.a.createElement(Me,{chart:this.graphRef,handler:t.tooltips}),document.body))}}]),t}(r.Component),Be={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",datasets:[]},Ue=Object(b.b)(["dashboard","time-ranges"])(Le),qe=function(e){var t=e.apiClient;return s.a.createElement(f.Consumer,null,(function(e){return s.a.createElement(oe,{apiCall:function(){return e.range?t.getClientsGraphDb(e.range,He(e.range)):t.getClientsGraph()},repeatOptions:e.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ue,Be)},renderOk:function(t){return s.a.createElement(Ue,function(e,t){var a="hour",n=e.over_time;t?t.until.diff(t.from,"day")>1&&(a="day"):n=e.over_time.slice(0,-1);var r=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],s=n.map((function(e){return new Date(1e3*e.timestamp).toISOString()})),i=[],l=0,o=!0,c=!1,u=void 0;try{for(var d,m=e.clients[Symbol.iterator]();!(o=(d=m.next()).done);o=!0){var p=d.value;i.push({label:0!==p.name.length?p.name:p.ip,backgroundColor:l<r.length?r[l]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0"),pointRadius:0,pointHitRadius:5,pointHoverRadius:5,cubicInterpolationMode:"monotone",data:[]}),l++}}catch(k){c=!0,u=k}finally{try{o||null==m.return||m.return()}finally{if(c)throw u}}var h=!0,f=!1,g=void 0;try{for(var b,v=n[Symbol.iterator]();!(h=(b=v.next()).done);h=!0){var E=b.value;for(var y in i)i.hasOwnProperty(y)&&i[y].data.push(E.data[y])}}catch(k){f=!0,g=k}finally{try{h||null==v.return||v.return()}finally{if(f)throw g}}return i.sort((function(e,t){return e.label.localeCompare(t.label)})),{labels:s,datasets:i,loading:!1,timeUnit:a,rangeName:t?t.name:void 0}}(t,e.range))},renderErr:function(){return s.a.createElement(Ue,Be)}})}))};qe.defaultProps={apiClient:z};var We=a(160),ze=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).chartRef=void 0,a.handleClick=function(e,t){var n=a.chartRef.current.chartInstance;n.legend.options.onClick.call(n,e,n.legend.legendItems[t]),a.forceUpdate()},a.chartRef=s.a.createRef(),a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t={legend:{display:!1},tooltips:{enabled:!0,callbacks:{title:function(){return e.props.title},label:function(e,t){var a=t.datasets[e.datasetIndex],n=t.labels[e.index];return n+": "+a.data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},a=null!==this.chartRef.current?this.chartRef.current.chartInstance.getDatasetMeta(0).data:this.props.data.map((function(){return{hidden:!1}}));return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"float-left",style:{width:"67%"}},s.a.createElement(Re.a,{width:100,height:250,options:t,ref:this.chartRef,data:{datasets:[{data:Object(We.a)(this.props.data),backgroundColor:this.props.colors}],labels:this.props.labels}})),s.a.createElement("div",{className:"float-right",style:{width:"33%"}},s.a.createElement("ul",{className:"chart-legend"},this.props.labels.map((function(t,a){return[t,e.props.colors[a]]})).map((function(t,n){var r=Object(p.a)(t,2),i=r[0],l=r[1];return s.a.createElement("li",{key:n,className:a[n]&&a[n].hidden?"strike":"",onClick:function(t){return e.handleClick(t,n)}},s.a.createElement("span",{style:{backgroundColor:l}}),i)}))))),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Qe={loading:!0,data:[],colors:[],labels:[]},Ve=function(e){var t=e.apiCall,a=e.title,n=e.apiHandler,r=Object(ne.a)(e,["apiCall","title","apiHandler"]);return s.a.createElement(oe,{apiCall:t,renderInitial:function(){return s.a.createElement(ze,Object.assign({title:a},Qe,r))},renderOk:function(e){return s.a.createElement(ze,Object.assign({title:a},function(e){var t=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],a=[],n=[],r=[],s=0,i=!0,l=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value;a.push(d.percent),n.push(0!==d.name.length?d.name:d.ip),r.push(s<t.length?t[s]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0")),s++}}catch(m){l=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}return{loading:!1,data:a,colors:r,labels:n}}(n(e)),r))},renderErr:function(){return s.a.createElement(ze,Object.assign({title:a},Qe,r))}})},Ge=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(Ve,{title:t("Query Types"),apiCall:a,apiHandler:function(e){var t=e.reduce((function(e,t){return e+t.count}),0);return e.map((function(e){return{name:e.name,percent:t>0?100*e.count/t:0}}))}})},Je=Object(b.b)("dashboard")((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(Ge,Object.assign({},e,{apiCall:function(){return t.range?z.getQueryTypesDb(t.range):z.getQueryTypes()}}))}))})),Ye=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(Ve,{title:t("Queries Answered By Destination"),apiCall:a,apiHandler:function(e){return e.upstreams.map((function(t){return{name:t.name,ip:t.ip,percent:100*t.count/e.total_queries}}))}})},Xe=Object(b.b)("dashboard")((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(Ye,Object.assign({},e,{apiCall:function(){return t.range?z.getUpstreamsDb(t.range):z.getUpstreams()}}))}))})),Ze=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).generateTable=function(){return a.props.isEmpty(a.props.data)?a.props.emptyMessage:s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("tbody",null,s.a.createElement("tr",null,a.props.headers.map((function(e,t){return s.a.createElement("th",{key:t},e)}))),a.props.generateRows(a.props.data)))},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{style:{overflowX:"auto"}},this.generateTable())),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component);Ze.defaultProps={loading:!0,title:"",data:{},headers:[],emptyMessage:"",isEmpty:function(){return!0},generateRows:function(){return null}};var Ke=function(e){var t=e.title,a=e.apiCall,n=e.initialData,r=e.headers,i=e.emptyMessage,l=e.isEmpty,o=e.apiHandler,c=e.generateRows,u=Object(ne.a)(e,["title","apiCall","initialData","headers","emptyMessage","isEmpty","apiHandler","generateRows"]);return s.a.createElement(oe,{apiCall:a,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:l,generateRows:c,data:n,loading:!0},u))},renderOk:function(e){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:l,generateRows:c,data:o(e),loading:!1},u))},renderErr:function(){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:i,isEmpty:l,generateRows:c,data:n,loading:!0},u))}})},$e=function(e){return{totalQueries:e.total_queries,topDomains:e.top_domains}},et=function(e){return function(t){return t.topDomains.map((function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-success",style:{width:n+"%"}}))))}))}},tt=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Permitted Domains"),initialData:{totalQueries:0,topDomains:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topDomains.length},apiCall:t,apiHandler:$e,generateRows:et(a)}))},at=Object(b.b)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(tt,Object.assign({},e,{apiCall:function(){return t.range?z.getTopDomainsDb(t.range):z.getTopDomains()}}))}))})),nt=function(e){return{totalBlocked:e.blocked_queries,topBlocked:e.top_domains}},rt=function(e){return function(t){return t.topBlocked.map((function(a){var n=a.count/t.totalBlocked*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalBlocked.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-warning",style:{width:n+"%"}}))))}))}},st=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Blocked Domains"),initialData:{totalBlocked:0,topBlocked:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topBlocked.length},apiCall:t,apiHandler:nt,generateRows:rt(a)}))},it=Object(b.b)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(st,Object.assign({},e,{apiCall:function(){return t.range?z.getTopBlockedDomainsDb(t.range):z.getTopBlockedDomains()}}))}))})),lt=function(e){return{totalQueries:e.total_queries,topClients:e.top_clients}},ot=function(e){return function(t){return t.topClients.map((function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-primary",style:{width:n+"%"}}))))}))}},ct=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Clients"),initialData:{totalQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:lt,generateRows:ot(a)}))},ut=Object(b.b)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(ct,Object.assign({},e,{apiCall:function(){return t.range?z.getTopClientsDb(t.range):z.getTopClients()}}))}))})),dt=function(e){return{blockedQueries:e.blocked_queries,topClients:e.top_clients}},mt=function(e){return function(t){return t.topClients.map((function(a){var n=a.count/t.blockedQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.blockedQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-danger",style:{width:n+"%"}}))))}))}},pt=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Blocked Clients"),initialData:{blockedQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:dt,generateRows:mt(a)}))},ht=Object(b.b)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(pt,Object.assign({},e,{apiCall:function(){return t.range?z.getTopBlockedClientsDb(t.range):z.getTopBlockedClients()}}))}))})),ft=a(346),gt=a(94),bt=a(215),vt=a.n(bt),Et=a(216),yt=a.n(Et),kt=(a(646),function(e){var t=R(e),a=e("Last 24 Hours");return{from:t[a][0],until:t[a][1],name:a}}),Ot=function(e){function t(e){var a;Object(P.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).updateHandler=null,a.state={history:[],cursor:null,loading:!1,atEnd:!1,filtersChanged:!1,filters:[]},a.getRowProps=function(e,t){return t&&0!==t.row.status?{style:{color:[1,4,5,6].includes(t.row.status)?"red":"green"}}:{}},a.parseFilters=function(e){var t={},a=!0,n=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var l=s.value;switch(l.id){case"time":t.from=y()(l.value.from).unix(),t.until=y()(l.value.until).unix();break;case"queryType":if("all"===l.value)break;t.query_type=parseInt(l.value);break;case"domain":if(0===l.value.length)break;t.domain=l.value;break;case"client":if(0===l.value.length)break;t.client=l.value;break;case"status":switch(l.value){case"all":break;case"allowed":t.blocked=!1;break;case"blocked":t.blocked=!0;break;default:t.status=l.value}break;case"dnssec":if("all"===l.value)break;t.dnssec=l.value;break;case"reply":if("all"===l.value)break;t.reply=l.value}}}catch(o){n=!0,r=o}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return t},a.fetchQueries=function(e){var t=e.page,n=e.pageSize;a.state.atEnd||a.state.loading||!a.state.filtersChanged&&a.state.history.length>=(t+2)*n||(a.setState({loading:!0}),a.updateHandler=re(z.getHistory(Object(F.a)({cursor:a.state.cursor},a.parseFilters(a.state.filters)))),a.updateHandler.promise.then((function(e){a.setState({loading:!1,atEnd:null===e.cursor,cursor:e.cursor,history:a.state.history.concat(e.history),filtersChanged:!1})})).catch(se))};var n=a.props.t;return a.state.filters=[{id:"time",value:kt(n)}],a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement(ft.a,{className:"-striped bg-white mb-4",style:{lineHeight:1},columns:It(t),showPaginationTop:!0,sortable:!1,filterable:!1,data:this.state.history,loading:this.state.loading,onFetchData:function(t){if(!yt()(t.filtered,e.state.filters))return vt()(e.fetchQueries,350)(t);e.fetchQueries(t)},onFilteredChange:vt()((function(t){yt()(t,e.state.filters)||e.setState({filters:t,filtersChanged:!0,cursor:null,atEnd:!1,loading:!1,history:[]})}),300),defaultFiltered:[{id:"time",value:kt(t)}],getTrProps:this.getRowProps,ofText:this.state.atEnd?"of":"of at least",PadRowComponent:function(){return s.a.createElement("span",null,"\xa0",s.a.createElement("br",null),"\xa0")}})}}]),t}(r.Component),wt=function(e){return[e("Unknown"),e("Blocked (gravity)"),e("Allowed (forwarded)"),e("Allowed (cached)"),e("Blocked (regex/wildcard)"),e("Blocked (blacklist)"),e("Blocked (external)")]},Ct=function(e){return["N/A",e("Secure"),e("Insecure"),e("Bogus"),e("Abandoned"),e("Unknown")]},jt=["","green","orange","red","red","orange"],Nt=function(e){return[e("Unknown"),"NODATA","NXDOMAIN","CNAME","IP","DOMAIN","RRNAME"]},St=["A","AAAA","ANY","SRV","SOA","PTR","TXT"],xt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(n){var r=n.filter,i=n.onChange;return s.a.createElement("select",{onChange:function(e){return i(e.target.value)},style:{width:"100%"},value:r?r.value:"all"},s.a.createElement("option",{value:"all"},t("All")),a.map((function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.name)})),e.map((function(e,t){return s.a.createElement("option",{key:t+a.length,value:t},e)})))}},It=function(e){return[{Header:e("Time"),id:"time",accessor:function(e){return e.timestamp},width:70,Cell:function(e){var t=new Date(1e3*e.value),a=t.toLocaleDateString(gt.a.language,{month:"short"}),n=Ae(t.getDate()),i=Ae(t.getHours()),l=Ae(t.getMinutes()),o=Ae(t.getSeconds());return s.a.createElement(r.Fragment,null,a+", "+n,s.a.createElement("br",null),i+":"+l+":"+o)},filterable:!0,filterMethod:function(){return!0},Filter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){var a=t.filter,n=t.onChange;return s.a.createElement(T,{range:a?a.value:null,onSelect:function(t){n(t||kt(e))},showLabel:!1})}))},{Header:e("Type"),id:"queryType",accessor:function(e){return St[e.type]},width:50,filterable:!0,filterMethod:function(){return!0},Filter:xt(St,e)},{Header:e("Domain"),id:"domain",accessor:function(e){return e.domain},minWidth:150,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Client"),id:"client",accessor:function(e){return e.client},minWidth:120,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Status"),id:"status",accessor:function(e){return e.status},width:140,Cell:function(t){return wt(e)[t.value]},filterable:!0,filterMethod:function(){return!0},Filter:xt(wt(e),e,[{name:e("Allowed"),value:"allowed"},{name:e("Blocked"),value:"blocked"}])},{Header:"DNSSEC",id:"dnssec",accessor:function(e){return e.dnssec},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:jt[t.value]}},Ct(e)[t.value])},filterable:!0,filterMethod:function(){return!0},Filter:xt(Ct(e),e)},{Header:e("Reply"),id:"reply",accessor:function(e){return{type:e.reply,time:e.response_time}},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:"black"}},Nt(e)[t.value.type],s.a.createElement("br",null),"("+(t.value.time/10).toLocaleString()+"ms)")},filterable:!0,filterMethod:function(){return!0},Filter:xt(Nt(e),e)},{Header:e("Action"),width:100,filterable:!1,Cell:function(t){return[1,4,5].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:function(){return z.addExactWhitelist(t.row.domain)}},e("Whitelist")):[2,3,6].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-danger btn-block",onClick:function(){return z.addExactBlacklist(t.row.domain)}},e("Blacklist")):null}}]},Dt=Object(b.b)(["common","query-log","time-ranges"])(Ot),At=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={domain:"",isValid:!0},a.handleChange=function(e){a.setState({domain:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.domain;if(0!==t.length){var n=a.props.isValid(t);a.setState({isValid:n}),n?(a.props.onEnter(t),a.setState({domain:""})):a.props.onValidationError()}},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.placeholder,n=e.onRefresh;return s.a.createElement("form",{className:"form-group input-group",onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.isValid?"":"is-invalid"),placeholder:a,value:this.state.domain,onChange:this.handleChange,disabled:!z.loggedIn}),s.a.createElement("span",{className:"btn-group input-group-append"},z.loggedIn?s.a.createElement("button",{className:"btn border-secondary",type:"submit"},t("Add")):null,s.a.createElement("button",{onClick:n,className:"btn border-secondary",type:"button"},s.a.createElement("i",{className:"fa fa-sync"}))))}}]),t}(r.Component);At.defaultProps={placeholder:""};var Ht=Object(b.b)(["common","lists"])(At),Rt=function(e){var t=e.dismissible?"alert-dismissible":"";return s.a.createElement("div",{className:"alert alert-".concat(e.type," ").concat(t," fade show")},e.dismissible?s.a.createElement("button",{type:"button",className:"close",onClick:e.onClick},"\xd7"):null,e.message)};Rt.defaultProps={onClick:function(){},dismissible:!0};var Tt=Rt,_t=Object(b.b)(["common","lists"])((function(e){var t,a=e.domains,n=e.onRemove,r=e.t;return t=a.length>0?a.map((function(e){return s.a.createElement("li",{key:e,className:"list-group-item"},z.loggedIn?(t=e,s.a.createElement(m.a,{color:"danger",size:"sm",className:"float-right",style:{marginTop:"2px"},onClick:function(){return n(t)}},s.a.createElement("span",{className:"far fa-trash-alt"}))):null,s.a.createElement("span",{className:"d-table-cell align-middle",style:{height:"32px"}},e));var t})):s.a.createElement(Tt,{type:"info",message:r("There are no domains in this list"),dismissible:!1}),s.a.createElement("ul",{className:"list-group"},t)})),Pt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={domains:[],message:"",messageType:"info"},a.addHandler=void 0,a.removeHandler=void 0,a.refreshHandler=void 0,a.onEnter=function(e){if(a.state.domains.includes(e))a.onAlreadyAdded(e);else{var t=a.state.domains.slice();a.addHandler=re(a.props.onAdd(e)),a.addHandler.promise.then((function(){a.onAdded(e)})).catch(se).catch((function(){a.onAddFailed(e,t)})),a.onAdding(e)}},a.onAdding=function(e){return a.setState({message:a.props.t("Adding {{domain}}...",{domain:e}),messageType:"info"})},a.onAlreadyAdded=function(e){return a.setState({message:a.props.t("{{domain}} is already added",{domain:e}),messageType:"danger"})},a.onAdded=function(e){return a.setState((function(t){return{domains:[].concat(Object(We.a)(t.domains),[e]),message:a.props.t("Successfully added {{domain}}",{domain:e}),messageType:"success"}}))},a.onAddFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to add {{domain}}",{domain:e}),messageType:"danger"})},a.onRemoved=function(e){return a.setState((function(t){return{domains:t.domains.filter((function(t){return t!==e}))}}))},a.onRemoveFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to remove {{domain}}",{domain:e}),messageType:"danger"})},a.onRemove=function(e){if(a.state.domains.includes(e)){var t=a.state.domains.slice();a.removeHandler=re(a.props.onRemove(e)),a.removeHandler.promise.catch(se).catch((function(){a.onRemoveFailed(e,t)})),a.onRemoved(e)}},a.onRefresh=function(){a.refreshHandler=re(a.props.onRefresh()),a.refreshHandler.promise.then((function(e){a.setState({domains:e})})).catch(se)},a.handleValidationError=function(){a.setState({message:a.props.validationErrorMsg,messageType:"danger"})},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.onRefresh()}},{key:"componentWillUnmount",value:function(){this.addHandler&&this.addHandler.cancel(),this.removeHandler&&this.removeHandler.cancel(),this.refreshHandler&&this.refreshHandler.cancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mb-4"},s.a.createElement("h2",{className:"text-center"},this.props.title),s.a.createElement("br",null),s.a.createElement(Ht,{placeholder:this.props.placeholder,onEnter:this.onEnter,onRefresh:this.onRefresh,isValid:this.props.isValid,onValidationError:this.handleValidationError}),this.props.note,this.state.message?s.a.createElement(Tt,{message:this.state.message,type:this.state.messageType,onClick:function(){return e.setState({message:""})}}):null,s.a.createElement(_t,{domains:this.state.domains,onRemove:this.onRemove}))}}]),t}(r.Component);Pt.defaultProps={note:""};var Ft=Object(b.b)(["common","lists"])(Pt);function Mt(e){if(e.length>253)return!1;var t=e.split(".");return!t.some((function(e){return e.length<1||e.length>63}))&&(!Lt(t.join(""))&&/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)+(\.([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*$/.test(e))}function Lt(e){return/^[0-9]+$/.test(e)}function Bt(e){try{new RegExp(e)}catch(t){return!1}return!0}function Ut(e){var t=e.split(".");return 4===t.length&&t.every((function(e){return Lt(e)&&parseInt(e)<256}))}var qt=Object(b.b)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Whitelist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:z.addExactWhitelist,onRemove:z.removeExactWhitelist,onRefresh:z.getExactWhitelist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))})),Wt=Object(b.b)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:z.addExactBlacklist,onRemove:z.removeExactBlacklist,onRefresh:z.getExactBlacklist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))})),zt=Object(b.b)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Whitelist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),onAdd:z.addRegexWhitelist,onRemove:z.removeRegexWhitelist,onRefresh:z.getRegexWhitelist,isValid:Bt,validationErrorMsg:t("Not a valid regular expression")},e))})),Qt=Object(b.b)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),onAdd:z.addRegexBlacklist,onRemove:z.removeRegexBlacklist,onRefresh:z.getRegexBlacklist,isValid:Bt,validationErrorMsg:t("Not a valid regular expression")},e))})),Vt=a(757),Gt=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement("div",{className:"card border-0 bg-primary"},s.a.createElement("div",{className:"card-block"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:this.props.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,this.props.name),s.a.createElement("p",null,t("Version"),":"," ","master"===this.props.branch?this.props.tag:"vDev"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},t("Details")),s.a.createElement(Vt.a,{isOpen:!this.state.collapsed},s.a.createElement("table",{className:"table table-borderless table-sm table-condensed mt-3 mb-0"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t("Branch")),s.a.createElement("td",null,this.props.branch)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Tag")),s.a.createElement("td",null,this.props.tag)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Hash")),s.a.createElement("td",null,this.props.hash)))))))}}]),t}(r.Component),Jt=Object(b.b)(["common","settings"])(Gt),Yt=function(e){function t(){return Object(P.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("Core"),icon:"far fa-dot-circle fa-2x",branch:this.props.core.branch,hash:this.props.core.hash,tag:this.props.core.tag})),s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("FTL"),icon:"fa fa-industry fa-2x",branch:this.props.ftl.branch,hash:this.props.ftl.hash,tag:this.props.ftl.tag})),s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("Web"),icon:"far fa-list-alt fa-2x",branch:this.props.web.branch,hash:this.props.web.hash,tag:this.props.web.tag})))}}]),t}(r.Component),Xt={core:{branch:"unknown",hash:"unknown",tag:"unknown"},ftl:{branch:"unknown",hash:"unknown",tag:"unknown"},web:{branch:"unknown",hash:"unknown",tag:"unknown"}},Zt=Object(b.b)(["common"])(Yt),Kt=function(e){return s.a.createElement(oe,{apiCall:z.getVersion,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Zt,Object.assign({},Xt,e))},renderOk:function(t){return s.a.createElement(Zt,Object.assign({},t,e))},renderErr:function(){return s.a.createElement(Zt,Object.assign({},Xt,e))}})},$t=a(766),ea=a(767),ta=a(768),aa=a(758),na=a(759),ra=a(760),sa=a(761),ia=a(762),la=a(763),oa=a(773),ca=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,settings:{active:!1,ip_start:"",ip_end:"",router_ip:"",lease_time:0,domain:"",ipv6_support:!1,rapid_commit:!0}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDHCPInfo=function(){a.loadHandler=re(z.getDHCPInfo()),a.loadHandler.promise.then((function(e){a.setState({settings:e})})).catch(se)},a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState((function(t){return{settings:Object(F.a)({},t.settings,Object(v.a)({},e,r))}}))}},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=re(z.updateDHCPInfo(a.state.settings)),a.updateHandler.promise.then((function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})})).catch(se).catch((function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})}))},a.isSettingValid=function(e,t){return!a.state.settings.active&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadDHCPInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.isSettingValid(this.state.settings.ip_start,Ut),n=this.isSettingValid(this.state.settings.ip_end,Ut),r=this.isSettingValid(this.state.settings.router_ip,Ut),i=this.state.settings.lease_time>=0,l=this.isSettingValid(this.state.settings.domain,Mt),o=this.state.showAlert?s.a.createElement(Tt,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},o,s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:this.state.settings.active,onChange:this.onChange("active","checked")}),t("Enabled"))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"startIP",sm:2},t("Start IP")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"startIP",disabled:!this.state.settings.active,value:this.state.settings.ip_start,onChange:this.onChange("ip_start","value"),invalid:!a}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"endIP",sm:2},t("End IP")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"endIP",disabled:!this.state.settings.active,value:this.state.settings.ip_end,onChange:this.onChange("ip_end","value"),invalid:!n}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"routerIP",sm:2},t("Router IP")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"routerIP",disabled:!this.state.settings.active,value:this.state.settings.router_ip,onChange:this.onChange("router_ip","value"),invalid:!r}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"leaseTime",sm:2},t("Lease Time")),s.a.createElement(ia.a,{sm:10},s.a.createElement(la.a,null,s.a.createElement(sa.a,{id:"leaseTime",disabled:!this.state.settings.active,value:this.state.settings.lease_time,onChange:function(t){return e.setState((function(e){return{settings:Object(F.a)({},e.settings,{lease_time:parseInt(t.target.value)})}}))},invalid:!i}),s.a.createElement(oa.a,{addonType:"append"},"Hours")))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"domain",sm:2},t("Domain")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"domain",disabled:!this.state.settings.active,value:this.state.settings.domain,onChange:this.onChange("domain","value"),invalid:!l}))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.ipv6_support,onChange:this.onChange("ipv6_support","checked")}),t("IPv6 Support"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.rapid_commit,onChange:this.onChange("rapid_commit","checked")}),t("Rapid Commit"))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!a||!n||!r||!i||!l},t("Apply")))}}]),t}(r.Component),ua=Object(b.b)(["common","settings","api-errors"])(ca),da=a(765),ma=a(764),pa=function(e){var t=e.address,a=e.onRemove;return s.a.createElement(ma.a,null,t,s.a.createElement(m.a,{color:"danger",size:"sm",className:"float-right",onClick:a},s.a.createElement("span",{className:"far fa-trash-alt"})))},ha=a(341),fa=[{name:"OpenDNS (ECS)",primaryIpv4:"208.67.222.222",secondaryIpv4:"208.67.220.220",primaryIpv6:"2620:119:35::35",secondaryIpv6:"2620:119:53::53"},{name:"Google (ECS)",primaryIpv4:"8.8.8.8",secondaryIpv4:"8.8.4.4",primaryIpv6:"2001:4860:4860:0:0:0:0:8888",secondaryIpv6:"2001:4860:4860:0:0:0:0:8844"},{name:"Quad9 (filtered, DNSSEC)",primaryIpv4:"9.9.9.9",secondaryIpv4:"149.112.112.112",primaryIpv6:"2620:fe::fe",secondaryIpv6:"2620:fe::9"},{name:"Quad9 (unfiltered, no DNSSEC)",primaryIpv4:"9.9.9.10",secondaryIpv4:"149.112.112.10",primaryIpv6:"2620:fe::10",secondaryIpv6:"2620:fe::fe:10"},{name:"Quad9 (filtered + ECS)",primaryIpv4:"9.9.9.11",secondaryIpv4:"149.112.112.11",primaryIpv6:"2620:fe::11",secondaryIpv6:""},{name:"Cloudflare",primaryIpv4:"1.1.1.1",secondaryIpv4:"1.0.0.1",primaryIpv6:"2606:4700:4700::1111",secondaryIpv6:"2606:4700:4700::1001"},{name:"Level3",primaryIpv4:"4.2.2.1",secondaryIpv4:"4.2.2.2",primaryIpv6:"",secondaryIpv6:""},{name:"Comodo",primaryIpv4:"8.26.56.26",secondaryIpv4:"8.20.247.20",primaryIpv6:"",secondaryIpv6:""},{name:"DNS.WATCH",primaryIpv4:"84.200.69.80",secondaryIpv4:"84.200.70.40",primaryIpv6:"2001:1608:10:25:0:0:1c04:b12f",secondaryIpv6:"2001:1608:10:25:0:0:9249:d69b"}].flatMap((function(e){var t=function(t,a,n){return{label:e.name+" "+a+" "+n+" ("+t+")",address:t}},a=[];return e.primaryIpv4.length>0&&a.push(t(e.primaryIpv4,"Primary","IPv4")),e.secondaryIpv4.length>0&&a.push(t(e.secondaryIpv4,"Secondary","IPv4")),e.primaryIpv6.length>0&&a.push(t(e.primaryIpv6,"Primary","IPv6")),e.secondaryIpv6.length>0&&a.push(t(e.secondaryIpv6,"Secondary","IPv6")),a})),ga=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).state={address:"",selected:[]},a.typeahead=void 0,a.getAddress=function(){return 0===a.state.selected.length?a.state.address:a.state.selected[0].address},a.typeahead=s.a.createRef(),a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.isValid(this.getAddress());return s.a.createElement(ma.a,null,s.a.createElement(la.a,null,s.a.createElement(ha.Typeahead,{id:"dns-list-typeahead",onInputChange:function(t){return e.setState({address:t})},onChange:function(t){return e.setState({selected:t})},options:fa.filter((function(t){return!e.props.upstreams.includes(t.address)})),selected:this.state.selected,emptyLabel:t("Detected custom upstream server"),positionFixed:!0,ref:this.typeahead}),s.a.createElement(oa.a,{addonType:"append"},s.a.createElement(m.a,{color:"success",size:"sm",onClick:function(){e.props.onAdd(e.getAddress()),e.setState({address:"",selected:[]}),e.typeahead.current.getInstance().clear()},disabled:!a},s.a.createElement("span",{className:"fa fa-plus"})))))}}]),t}(r.Component),ba=Object(b.b)("settings")(ga),va=function(e,t){return!t.includes(e)&&(function(e){var t=e.split(":");return!!Ut(t[0])&&(1===t.length||2===t.length&&Lt(t[1]))}(e)||function(e){return/^(\[[a-fA-F0-9:]+]:\d+|[a-fA-F0-9:]+)$/.test(e)}(e))},Ea=function(e){var t=e.upstreams,a=e.onAdd,n=e.onRemove;return s.a.createElement(da.a,{style:{overflowY:"scroll",maxHeight:"350px"}},t.map((function(e){return s.a.createElement(pa,{key:e,onRemove:function(){return n(e)},address:e})})),s.a.createElement(ba,{onAdd:a,isValid:function(e){return va(e,t)},upstreams:t}))},ya=function(e){var t=e.settings,a=e.onUpdate,n=e.isRouterIpValid,i=e.isCidrValid,l=e.isDomainValid,o=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.enabled,onChange:function(e){return a(Object(F.a)({},t,{enabled:e.target.checked}))}}),o("Enabled"))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"routerIP",sm:5},o("Router IP")),s.a.createElement(ia.a,{sm:7},s.a.createElement(sa.a,{id:"routerIP",disabled:!t.enabled,value:t.ip,onChange:function(e){return a(Object(F.a)({},t,{ip:e.target.value}))},invalid:!n}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"cidr",sm:5},o("Prefix length (CIDR)")),s.a.createElement(ia.a,{sm:7},s.a.createElement(sa.a,{id:"cidr",disabled:!t.enabled,value:-1===t.cidr?"":t.cidr,invalid:!i,onChange:function(e){var n=parseInt(e.target.value);if(0===e.target.value.length)n=-1;else if(isNaN(n))return;a(Object(F.a)({},t,{cidr:n}))}}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"localDomain",sm:5},o("Local Domain Name")),s.a.createElement(ia.a,{sm:7},s.a.createElement(sa.a,{id:"localDomain",disabled:!t.enabled,value:t.domain,onChange:function(e){return a(Object(F.a)({},t,{domain:e.target.value}))},invalid:!l}))))},ka=function(e){var t=e.settings,a=e.onUpdate,n=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"listeningBehavior",sm:5},n("Interface listening behavior")),s.a.createElement(ia.a,{sm:7},s.a.createElement(sa.a,{id:"listeningBehavior",type:"select",value:t.listeningType,onChange:function(e){return a(Object(F.a)({},t,{listeningType:e.target.value}))}},s.a.createElement("option",null,"all"),s.a.createElement("option",null,"local"),s.a.createElement("option",null,"single")))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.fqdnRequired,onChange:function(e){return a(Object(F.a)({},t,{fqdnRequired:e.target.checked}))}}),n("Forward FQDNs only"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.bogusPriv,onChange:function(e){return a(Object(F.a)({},t,{bogusPriv:e.target.checked}))}}),n("Only forward public reverse lookups"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.dnssec,onChange:function(e){return a(Object(F.a)({},t,{dnssec:e.target.checked}))}}),n("Use DNSSEC"))))},Oa=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,upstreamDns:[],conditionalForwarding:{enabled:!1,ip:"",domain:"",cidr:24},options:{fqdnRequired:!1,bogusPriv:!1,dnssec:!1,listeningType:"single"}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDNSInfo=function(){a.loadHandler=re(z.getDNSInfo()),a.loadHandler.promise.then((function(e){var t=e.conditional_forwarding.domain,n=0===t.length?"lan":t;a.setState({upstreamDns:e.upstream_dns,conditionalForwarding:Object(F.a)({},e.conditional_forwarding,{domain:n}),options:{fqdnRequired:e.options.fqdn_required,bogusPriv:e.options.bogus_priv,dnssec:e.options.dnssec,listeningType:e.options.listening_type}})})).catch(se)},a.handleUpstreamAdd=function(e){a.setState({upstreamDns:a.state.upstreamDns.concat(e)})},a.handleUpstreamRemove=function(e){a.setState({upstreamDns:a.state.upstreamDns.filter((function(t){return t!==e}))})},a.handleConditionalForwardingUpdate=function(e){a.setState({conditionalForwarding:e})},a.handleDnsOptionsUpdate=function(e){a.setState({options:e})},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=re(z.updateDNSInfo({upstream_dns:a.state.upstreamDns,conditional_forwarding:a.state.conditionalForwarding,options:{fqdn_required:a.state.options.fqdnRequired,bogus_priv:a.state.options.bogusPriv,dnssec:a.state.options.dnssec,listening_type:a.state.options.listeningType}})),a.updateHandler.promise.then((function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})})).catch(se).catch((function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})}))},a.isCFSettingValid=function(e,t){return!a.state.conditionalForwarding.enabled&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadDNSInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isCFSettingValid(this.state.conditionalForwarding.ip,(function(e){return Ut(e)||function(e){return/^[a-fA-F0-9:]+$/.test(e)}(e)})),a=this.isCFSettingValid(this.state.conditionalForwarding.cidr.toString(),(function(e){return function(e){return["8","16","24","32"].includes(e)}(e)||function(e){var t=parseInt(e);return!isNaN(t)&&t>0&&t<=128&&t%4===0}(e)})),n=this.isCFSettingValid(this.state.conditionalForwarding.domain,Mt),r=this.state.showAlert?s.a.createElement(Tt,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},r,s.a.createElement(na.a,{row:!0},s.a.createElement(ia.a,{sm:6},s.a.createElement("h3",null,e("Upstream DNS Servers")),s.a.createElement(Ea,{onAdd:this.handleUpstreamAdd,onRemove:this.handleUpstreamRemove,upstreams:this.state.upstreamDns})),s.a.createElement(ia.a,{sm:6},s.a.createElement("h3",null,e("Conditional Forwarding")),s.a.createElement(ya,{settings:this.state.conditionalForwarding,onUpdate:this.handleConditionalForwardingUpdate,isRouterIpValid:t,isCidrValid:a,isDomainValid:n,t:e}),s.a.createElement("h3",null,e("DNS Options")),s.a.createElement(ka,{settings:this.state.options,onUpdate:this.handleDnsOptionsUpdate,t:e}))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!t||!a||!n},e("Apply")))}}]),t}(r.Component),wa=Object(b.b)(["common","settings"])(Oa),Ca=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={cache_size:0,cache_evicted:0,cache_inserted:0},a.loadHandler=void 0,a.loadCacheInfo=function(){a.loadHandler=re(z.getCacheInfo()),a.loadHandler.promise.then((function(e){a.setState({cache_size:e.cache_size,cache_evicted:e.cache_evicted,cache_inserted:e.cache_inserted})})).catch(se)},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadCacheInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_size",sm:4},e("DNS cache size")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_size",value:this.state.cache_size.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_evicted",sm:4},e("DNS cache evictions")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_evicted",value:this.state.cache_evicted.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_inserted",sm:4},e("DNS cache insertions")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_inserted",value:this.state.cache_inserted.toLocaleString()}))))}}]),t}(r.Component),ja=Object(b.b)(["settings"])(Ca),Na=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={interface:"",ipv4Address:"",ipv6Address:"",hostname:""},a.loadHandler=void 0,a.loadNetworkInfo=function(){a.loadHandler=re(z.getNetworkInfo()),a.loadHandler.promise.then((function(e){a.setState({interface:e.interface,ipv4Address:e.ipv4_address,ipv6Address:e.ipv6_address,hostname:e.hostname})})).catch(se)},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadNetworkInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"interface",sm:4},e("Interface")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"interface",value:this.state.interface}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"ipv4_address",sm:4},e("IPv4 address")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"ipv4_address",value:this.state.ipv4Address}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"ipv6_address",sm:4},e("IPv6 address")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"ipv6_address",value:this.state.ipv6Address}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"hostname",sm:4},e("Hostname")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"hostname",value:this.state.hostname}))))}}]),t}(r.Component),Sa=Object(b.b)(["common","settings"])(Na),xa=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={fileSize:0,queries:0,sqliteVersion:""},a.loadHandler=void 0,a.loadFTLInfo=function(){a.loadHandler=re(z.getFTLdb()),a.loadHandler.promise.then((function(e){a.setState({fileSize:e.filesize,queries:e.queries,sqliteVersion:e.sqlite_version})})).catch(se)},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){this.loadFTLInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"queries",sm:4},e("Queries")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"queries",value:this.state.queries.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"filesize",sm:4},e("Filesize")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"filesize",value:"".concat(this.state.fileSize.toLocaleString()," B")}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"sqliteversion",sm:4},e("SQLite version")),s.a.createElement(ia.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"sqliteversion",value:this.state.sqliteVersion}))))}}]),t}(r.Component),Ia=Object(b.b)(["settings"])(xa),Da=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"network"},a.setTab=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.tab=function(e,t){return s.a.createElement(Y.a,null,s.a.createElement($t.a,{active:a.state.activeTab===e,onClick:function(){return a.setTab(e)}},t))},a.tabContent=function(e,t){return s.a.createElement(ea.a,{tabId:e},t)},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(X.a,{tabs:!0},this.tab("network",e("Network")),this.tab("dhcp",e("DHCP")),this.tab("dns",e("DNS")),this.tab("ftl",e("FTL")),this.tab("cache",e("Cache"))),s.a.createElement(ta.a,{activeTab:this.state.activeTab},this.tabContent("network",s.a.createElement(Sa,null)),this.tabContent("dhcp",s.a.createElement(ua,null)),this.tabContent("dns",s.a.createElement(wa,null)),this.tabContent("ftl",s.a.createElement(Ia,null)),this.tabContent("cache",s.a.createElement(ja,null))))}}]),t}(r.Component),Aa=Object(b.b)(["common","settings"])(Da),Ha=a(217),Ra=a.n(Ha),Ta=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a.onClick=function(){a.setState({collapsed:!a.state.collapsed})},a.isExpanded=function(){return a.props.error||!a.state.collapsed},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"w-100"},s.a.createElement("div",{className:"card mb-0 "+(this.props.error?"border-danger":"border-white")},s.a.createElement("div",{className:this.props.error?"bg-danger":"bg-white pr-0"},s.a.createElement("span",{className:this.props.error?"float-left":"float-right"},s.a.createElement("button",{type:"button",className:"pr-0 "+(this.props.error?"btn disabled":"btn btn-link"),onClick:this.onClick},e("Forgot Password")))),s.a.createElement("div",{className:"card-body bg-white "+(this.isExpanded()?"":" collapse ")+(this.props.error?"p12":"p-0")},e("forgot_password_description"),s.a.createElement("pre",null,s.a.createElement("code",null,"sudo pihole -a -p")))))}}]),t}(r.Component),_a=Object(b.b)("login")(Ta),Pa=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",error:!1,cookiesEnabled:!1},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.authenticate=function(e){e&&e.preventDefault();var t=Ra()("sha256").update(a.state.password).digest("hex");t=Ra()("sha256").update(t).digest("hex"),a.setState({password:"",error:!1}),z.authenticate(t).then((function(){z.loggedIn=!0,W.fakeAPI&&(document.cookie="user_id=;");var e=a.props.location.state||{from:{pathname:"/"}};a.props.history.push(e.from.pathname)})).catch((function(){return a.setState({error:!0})}))},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentWillMount",value:function(){navigator.cookieEnabled&&this.setState({cookiesEnabled:!0})}},{key:"render",value:function(){if(z.loggedIn)return s.a.createElement(c.a,{to:"/"});var e=this.props.t;return s.a.createElement("div",{className:"mainbox col-md-8 offset-md-2 col-lg-6 offset-lg-3 float-none"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{src:K.a,alt:"Logo",width:"30%"})),s.a.createElement("br",null),s.a.createElement("div",{className:"card-title text-center mb-0"},s.a.createElement("span",{className:"logo-lg",style:{fontSize:"25px"}},"Pi-",s.a.createElement("b",null,"hole"))),s.a.createElement("div",{className:"m-0 text-center pt-0 pr-3 pb-3 pl-3"},e("Sign in to start your session"),this.props.location.state&&this.props.location.state.from.pathname in an(e)?s.a.createElement(r.Fragment,null,s.a.createElement("br",null),e('You will be transferred to the "{{page}}" page',{page:an(e)[this.props.location.state.from.pathname]})):null,this.state.cookiesEnabled?null:s.a.createElement("div",{className:"text-center text-danger"},e("Verify that cookies are allowed for {{host}}",{host:window.location.host}))),this.state.error?s.a.createElement("div",{className:"form-group has-error m-0 text-center pt-0 pr-3 pb-3 pl-3"},s.a.createElement("label",{className:"control-label"},s.a.createElement("i",{className:"fa fa-times-circle-o"})," ",e("Wrong Password!"))):null),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{id:"loginform",onSubmit:this.authenticate},s.a.createElement("div",{className:"input-group"+(this.state.error?" has-error":"")},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.handlePasswordChange,placeholder:e("Password"),autoFocus:!0})),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block"},e("Log in")),s.a.createElement("br",null),s.a.createElement(_a,{error:this.state.error})))))}}]),t}(r.Component),Fa=Object(b.b)(["login","location"])(Pa),Ma=function(e){function t(){return Object(P.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentWillMount",value:function(){z.loggedIn=!1,W.fakeAPI?document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;":z.logout()}},{key:"render",value:function(){return s.a.createElement(c.a,{to:"/"})}}]),t}(r.Component),La=function(e){var t=e.name,a=e.icon,n=e.onClick;return s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n(e)},className:"nav-link"},s.a.createElement("i",{className:"nav-icon "+a}),t))};La.defaultProps={onClick:function(){}};var Ba=La,Ua=a(772),qa=a(769),Wa=a(770),za=a(771),Qa=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={processing:!1,customModalShown:!1,customTime:60,customMultiplier:60},a.updateHandler=void 0,a.getStatusFromAction=function(e){switch(e){case"enable":return"enabled";case"disable":return"disabled"}},a.setStatus=function(e,t){a.state.processing||(a.toggleProcessing(),a.updateHandler=re(a.props.onSetStatus(e,t)),a.updateHandler.promise.then((function(){return a.props.refresh({status:a.getStatusFromAction(e)})})).then(a.toggleProcessing).catch((function(e){e.isCanceled||a.toggleProcessing()})))},a.toggleModal=function(){a.setState({customModalShown:!a.state.customModalShown})},a.toggleProcessing=function(){a.setState((function(e){return{processing:!e.processing}}))},a.submitCustom=function(e){e.preventDefault(),a.setState({customModalShown:!1}),a.setStatus("disable",a.state.customTime*a.state.customMultiplier)},a.renderModal=function(){var e=a.props.t;return s.a.createElement(Ua.a,{isOpen:a.state.customModalShown,toggle:a.toggleModal,style:{maxWidth:"300px"}},s.a.createElement(aa.a,{onSubmit:a.submitCustom},s.a.createElement(qa.a,{toggle:a.toggleModal},e("Custom time")),s.a.createElement(Wa.a,null,s.a.createElement(la.a,null,s.a.createElement(sa.a,{type:"number",value:a.state.customTime,onChange:function(e){return a.setState({customTime:parseInt(e.target.value)})}}),s.a.createElement(oa.a,{addonType:"append"},s.a.createElement(sa.a,{type:"select",value:a.state.customMultiplier,onChange:function(e){return a.setState({customMultiplier:parseInt(e.target.value)})}},s.a.createElement("option",{value:1},e("Seconds")),s.a.createElement("option",{value:60},e("Minutes")))))),s.a.createElement(za.a,null,s.a.createElement(m.a,{type:"submit"},e("Apply")),s.a.createElement(m.a,{onClick:a.toggleModal},e("Cancel")))))},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props,a=t.t;switch(t.status){case"enabled":return s.a.createElement(fe,{name:a("Disable"),icon:"fa fa-stop",isOpen:!1},s.a.createElement(Ba,{name:a("Permanently"),icon:"fa fa-stop",onClick:function(){return e.setStatus("disable")}}),s.a.createElement(Ba,{name:a("For {{time}} seconds",{time:10}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",10)}}),s.a.createElement(Ba,{name:a("For {{time}} seconds",{time:30}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",30)}}),s.a.createElement(Ba,{name:a("For {{time}} minutes",{time:5}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",300)}}),s.a.createElement(Ba,{name:a("Custom time"),icon:"fa fa-clock",onClick:this.toggleModal}),this.renderModal());case"disabled":return s.a.createElement(Ba,{name:a("Enable"),icon:"fa fa-play",onClick:function(){return e.setStatus("enable")}});case"unknown":default:return null}}}]),t}(r.Component),Va=Object(b.b)("common")(Qa),Ga=a(157),Ja=a(95),Ya=Object(Ja.b)("PREFERENCES_REQUEST"),Xa=Object(Ja.b)("PREFERENCES_SUCCESS"),Za=a(158),Ka=function(e){function t(){var e,a;Object(P.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,translateMessage:!0,error:null,settings:a.props.settings},a.updateHandler=void 0,a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState((function(t){return{settings:Object(F.a)({},t.settings,Object(v.a)({},e,r))}}))}},a.saveSettings=function(e){e.preventDefault(),a.setState({alertMessage:"Processing...",error:null,alertType:"info",showAlert:!0,processing:!0,translateMessage:!0});var t=W.fakeAPI?Promise.resolve({status:"success"}):z.updatePreferences(a.state.settings);a.updateHandler=re(t),a.updateHandler.promise.then((function(){a.setState({alertMessage:"Successfully saved preferences",alertType:"success",showAlert:!0,processing:!1,translateMessage:!0}),a.props.onUpdate(a.state.settings)})).catch(se).catch((function(e){var t="",n=null,r=!0;e instanceof Error?(t=e.message,r=!1):(t="API Error: {{error}}",n=e),a.setState({alertMessage:t,error:n,alertType:"danger",showAlert:!0,processing:!1,translateMessage:r})}))},a.hideAlert=function(){a.setState({showAlert:!1})},a.getAlertMessage=function(){var e=a.props.t;return a.state.error?e(a.state.alertMessage,{error:e(a.state.error.key,a.state.error.data)}):a.state.translateMessage?e(a.state.alertMessage):a.state.alertMessage},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.state.showAlert?s.a.createElement(Tt,{message:this.getAlertMessage(),type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},t,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"layout",sm:2},e("Layout")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"layout",type:"select",value:this.state.settings.layout,onChange:this.onChange("layout","value")},s.a.createElement("option",{value:"boxed"},e("Boxed")),s.a.createElement("option",{value:"traditional"},e("Full"))))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"language",sm:2},e("Language")),s.a.createElement(ia.a,{sm:10},s.a.createElement(sa.a,{id:"language",type:"select",value:this.state.settings.language,onChange:this.onChange("language","value")},Ga.map((function(e){return s.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing},e("Apply")))}}]),t}(r.Component),$a=Object(b.b)(["common","settings","api-errors","preferences"])(Ka),en={onUpdate:Xa},tn=Object(Za.b)((function(e){return{settings:e.preferences}}),en)($a),an=function(e){return{"/dashboard":e("Dashboard"),"/query-log":e("Query Log"),"/whitelist/exact":"".concat(e("Whitelist")," (").concat(e("Exact"),")"),"/whitelist/regex":"".concat(e("Whitelist")," (").concat(e("Regex"),")"),"/blacklist/exact":"".concat(e("Blacklist")," (").concat(e("Exact"),")"),"/blacklist/regex":"".concat(e("Blacklist")," (").concat(e("Regex"),")"),"/settings/versions":e("Versions"),"/settings/networking":e("Networking"),"/settings/preferences":e("Preferences"),"/login":e("Login"),"/logout":e("Logout")}},nn=[{name:"Dashboard",url:"/dashboard",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},z.loggedIn?s.a.createElement("div",{className:"dashboard-time-selector"},s.a.createElement(_,{size:"md"})):null,s.a.createElement("div",{className:"row"},s.a.createElement(De,null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(Fe,null))),z.loggedIn?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(qe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Je,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Xe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(at,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(it,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ut,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ht,null)))):null)},icon:"fa fa-tachometer-alt",auth:!1},{name:"Query Log",url:"/query-log",component:Dt,icon:"fa fa-database",auth:!0},{name:"Whitelist",url:"/whitelist",icon:"far fa-check-circle",auth:!0,children:[{name:"Exact whitelist",url:"/whitelist/exact",component:qt,icon:"fa fa-check-circle",auth:!0},{name:"Regex whitelist",url:"/whitelist/regex",component:zt,icon:"fa fa-check-circle",auth:!0}]},{name:"Blacklist",url:"/blacklist",icon:"fa fa-ban",auth:!0,children:[{name:"Exact blacklist",url:"/blacklist/exact",component:Wt,icon:"fa fa-ban",auth:!0},{name:"Regex blacklist",url:"/blacklist/regex",component:Qt,icon:"fa fa-ban",auth:!0}]},{customComponent:function(){return s.a.createElement(ue.Consumer,null,(function(e){var t=e.status,a=e.refresh;return s.a.createElement(Va,{status:t,refresh:a,onSetStatus:z.setStatus})}))},fakeRoute:!0,auth:!0},{name:"Settings",url:"/settings",icon:"fa fa-wrench",auth:!0,children:[{name:"Versions",url:"/settings/versions",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"container-flex"},s.a.createElement(Kt,null)))},icon:"fa fa-download",auth:!0},{name:"Networking",url:"/settings/networking",component:Aa,icon:"fa fa-sitemap",auth:!0},{name:"Preferences",url:"/settings/preferences",component:function(){return s.a.createElement(tn,null)},icon:"fa fa-sliders-h",auth:!0}]},{name:"Login",url:"/login",component:Fa,icon:"fa fa-user",auth:!1,authStrict:!0},{name:"Logout",url:"/logout",component:Ma,icon:"fa fa-user-times",auth:!0,authStrict:!0}],rn=function(e){var t=e.children;return s.a.createElement(de,null,s.a.createElement(g,null,t))},sn=function e(t){if(!t.fakeRoute){if(t.children)return t.children.map(e);var a=t;return a.auth?s.a.createElement(ln,{key:a.url,path:a.url,component:a.component}):s.a.createElement(c.b,{key:a.url,path:a.url,component:a.component})}},ln=function(e){var t=e.component;return s.a.createElement(c.b,{path:e.path,render:function(e){return z.loggedIn?s.a.createElement(t,e):s.a.createElement(c.a,{to:{pathname:"/login",state:{from:e.location}}})}})},on=a(344),cn=a(345);var un=a(347),dn={layout:"boxed",language:"en"},mn={preferences:function(){var e=localStorage.getItem("webPreferences");if(null===e)return dn;try{return JSON.parse(e)}catch(t){return dn}}()},pn=Object(Ja.c)(mn,Object(v.a)({},Xa.type,(function(e,t){return e.preferences=t.payload,e}))),hn=a(33),fn=a.n(hn),gn=a(29),bn=fn.a.mark(vn);function vn(e){var t;return fn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload.language,gt.a.language===t){a.next=4;break}return a.next=4,Object(gn.a)([gt.a,"changeLanguage"],t);case 4:case"end":return a.stop()}}),bn)}var En=fn.a.mark(yn);function yn(e){return fn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.payload.layout,t.next="boxed"===t.t0?3:"traditional"===t.t0?8:13;break;case 3:return t.next=5,Object(gn.a)([document.body.classList,"add"],"boxcontainer");case 5:return t.next=7,Object(gn.a)([document.body.classList,"add"],"background-image");case 7:return t.abrupt("break",13);case 8:return t.next=10,Object(gn.a)([document.body.classList,"remove"],"boxcontainer");case 10:return t.next=12,Object(gn.a)([document.body.classList,"remove"],"background-image");case 12:return t.abrupt("break",13);case 13:case"end":return t.stop()}}),En)}var kn=fn.a.mark(Cn),On=fn.a.mark(jn),wn=fn.a.mark(Nn);function Cn(){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.e)(Ya.type,jn);case 2:return e.next=4,Object(gn.e)(Xa.type,Nn);case 4:return e.next=6,Object(gn.e)(Xa.type,vn);case 6:return e.next=8,Object(gn.e)(Xa.type,yn);case 8:return e.next=10,Object(gn.b)(Ya());case 10:case"end":return e.stop()}}),kn)}function jn(){var e;return fn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!W.fakeAPI){t.next=6;break}return t.next=3,Object(gn.c)((function(e){return e.preferences}));case 3:e=t.sent,t.next=9;break;case 6:return t.next=8,Object(gn.a)(z.getPreferences);case 8:e=t.sent;case 9:return t.next=11,Object(gn.b)(Xa(e));case 11:case"end":return t.stop()}}),On)}function Nn(e){return fn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(gn.a)([localStorage,"setItem"],"webPreferences",JSON.stringify(e.payload));case 2:case"end":return t.stop()}}),wn)}var Sn=fn.a.mark(xn);function xn(){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(gn.a)(z.checkAuthStatus);case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),"unauthorized"!==e.t0.key){e.next=9;break}return e.abrupt("return");case 9:throw e.t0;case 10:if(z.loggedIn){e.next=14;break}return W.fakeAPI&&(document.cookie="user_id=;"),e.next=14,Object(gn.a)([window.location,"reload"]);case 14:case"end":return e.stop()}}),Sn,null,[[0,5]])}var In=fn.a.mark(Dn);function Dn(){return fn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(gn.d)(Cn);case 2:return e.next=4,Object(gn.d)(xn);case 4:case"end":return e.stop()}}),In)}var An=[],Hn=Object(un.a)();An.push(Hn);var Rn=Object(Ja.a)({reducer:pn,middleware:An});Rn.runSaga=function(){Hn.run(Dn)};var Tn,_n=Rn;z.loggedIn=document.cookie.includes("user_id="),gt.a.use(on.a).use(cn.a).use(b.a).init({fallbackLng:"en",whitelist:Ga.map((function(e){return e.code})),ns:["common"],defaultNS:"common",fallbackNS:["dashboard","footer","lists","location","login","query-log","settings","api-errors","preferences","time-ranges"],nsSeparator:!1,keySeparator:!1,returnEmptyString:!1,debug:W.developmentMode,interpolation:{escapeValue:!1},backend:{loadPath:"/i18n/{{lng}}/{{ns}}.json",ajax:Tn}}),_n.runSaga(),i.render(r.createElement(Za.a,{store:_n},r.createElement(o.a,{basename:function(){var e=document.getElementsByTagName("base")[0];return e?new URL(e.href).pathname:""}()},r.createElement(c.d,null,r.createElement(c.b,{path:"/",name:"Home",component:function(e){return s.a.createElement("div",{className:"app"},s.a.createElement(rn,null,s.a.createElement(J,null),s.a.createElement("div",{className:"app-body"},s.a.createElement(ke,Object.assign({items:nn},e)),s.a.createElement("main",{className:"main",onClick:G},s.a.createElement("div",{className:"container-fluid mt-4"},s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(c.d,null,s.a.createElement(c.a,{exact:!0,from:"/",to:"/dashboard"}),nn.map(sn)))))),s.a.createElement(je,null)))}})))),document.getElementById("root"))}},[[348,1,2]]]);
//# sourceMappingURL=main.c6300a2f.chunk.js.map