(this["webpackJsonppi-hole_web"]=this["webpackJsonppi-hole_web"]||[]).push([[0],{152:function(e,t,a){e.exports=a.p+"static/media/logo.efd0af1e.svg"},157:function(e){e.exports=JSON.parse('[{"code":"ar","name":"Arabic"},{"code":"bg","name":"Bulgarian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"it","name":"Italian"},{"code":"nl","name":"Dutch"},{"code":"oc","name":"Occitan"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovene"},{"code":"sv","name":"Swedish"},{"code":"tr","name":"Turkish"},{"code":"vi","name":"Vietnamese"},{"code":"zh","name":"Chinese"}]')},309:function(e,t,a){e.exports=a(648)},509:function(e,t,a){},648:function(e,t,a){"use strict";a.r(t);a(310),a(319);var n,r=a(0),s=a.n(r),o=a(48),i=a.n(o),l=a(66),c=a(36),u=(a(507),a(508),a(509),a(297)),d=a.n(u),m=a(650),p=a(102),h={range:null,update:function(){}},f=s.a.createContext(h),g=function(e){var t=e.children,a=Object(r.useState)(h.range),n=Object(p.a)(a,2),o=n[0],i=n[1];return s.a.createElement(f.Provider,{value:{range:o,update:i}},t)},b=(a(269),a(668)),v=a(39),E=a(37),y=a.n(E),k=y()(),O=y()().subtract(1,"day"),w=y()().startOf("day"),C=y()().subtract(1,"days").startOf("day"),j=y()().subtract(1,"days").endOf("day"),N=y()().subtract(7,"days"),S=y()().subtract(30,"days"),x=y()().startOf("month"),I=y()().subtract(1,"month").startOf("month"),D=y()().subtract(1,"month").endOf("month"),A=y()().startOf("year"),H=y()(0),R=function(e){var t;return t={},Object(v.a)(t,e("Last 24 Hours"),[O,k]),Object(v.a)(t,e("Today"),[w,k]),Object(v.a)(t,e("Yesterday"),[C,j]),Object(v.a)(t,e("Last 7 Days"),[N,k]),Object(v.a)(t,e("Last 30 Days"),[S,k]),Object(v.a)(t,e("This Month"),[x,k]),Object(v.a)(t,e("Last Month"),[I,D]),Object(v.a)(t,e("This Year"),[A,k]),Object(v.a)(t,e("All Time"),[H,k]),t},_=Object(b.a)("time-ranges")((function(e){var t=e.range,a=e.onSelect,n=e.t,o=R(n),i=n("Last 24 Hours"),l=n("Today"),c=function(e){var t=e.t;return e.showLabel?e.range?"Custom Range"===e.range.name?e.range.from.toDate().toLocaleString()+" - "+e.range.until.toDate().toLocaleString():e.range.name:t("Last 24 Hours"):null}(e),u=e.size?e.size:"sm";return s.a.createElement(d.a,{startDate:t?t.from:o[i][0],endDate:t?t.until:o[i][1],maxDate:o[l][1],onApply:function(e,t){t.startDate.isSame(o[i][0])&&t.endDate.isSame(o[i][1])?a(null):a({from:t.startDate,until:t.endDate,name:t.chosenLabel})},timePicker:!0,showDropdowns:!0,ranges:o},s.a.createElement(m.a,{color:"light",size:u},s.a.createElement("i",{className:"far fa-clock fa-lg"}),c?s.a.createElement(r.Fragment,null,"\xa0 \xa0",c):null))})),T=function(e){var t=e.size;return s.a.createElement(f.Consumer,null,(function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(_,{range:e.range,onSelect:e.update,showLabel:!0,size:t}))}))},P=a(10),F=a(22),M=function(e){return Q.loggedIn&&401===e.status?(document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload(),Promise.reject({isCanceled:!0})):Promise.resolve(e)},L=function(e){return e.isCanceled||e instanceof Error?Promise.reject(e):e.json()},B=function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)},U=function(e){return Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},q=function(e){return U({from:e.from.unix(),until:e.until.unix()})};Object({NODE_ENV:"production",PUBLIC_URL:"/pihole-web",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FAKE_API:"1"}).REACT_APP_CUSTOM_API_URL;(n={developmentMode:!1,fakeAPI:!1,apiPath:"/pihole-web/api"}).fakeAPI=!0,n.apiPath="/pihole-web/fakeAPI";var z=n,Q=new function e(t){var a=this;Object(P.a)(this,e),this.http=t,this.loggedIn=!1,this.authenticate=function(e){return a.http.get("auth",{headers:{"X-Pi-hole-Authenticate":e}})},this.checkAuthStatus=function(){return a.http.get("auth")},this.logout=function(){return a.http.delete("auth")},this.getSummary=function(){return a.http.get("stats/summary")},this.getSummaryDb=function(e){return a.http.get("stats/database/summary?"+q(e))},this.getHistoryGraph=function(){return a.http.get("stats/overTime/history")},this.getHistoryGraphDb=function(e,t){return a.http.get("stats/database/overTime/history?interval="+t+"&"+q(e))},this.getClientsGraph=function(){return a.http.get("stats/overTime/clients")},this.getClientsGraphDb=function(e,t){return a.http.get("stats/database/overTime/clients?interval="+t+"&"+q(e))},this.getQueryTypes=function(){return a.http.get("stats/query_types")},this.getQueryTypesDb=function(e){return a.http.get("stats/database/query_types?"+q(e))},this.getUpstreams=function(){return a.http.get("stats/upstreams")},this.getUpstreamsDb=function(e){return a.http.get("stats/database/upstreams?"+q(e))},this.getTopDomains=function(){return a.http.get("stats/top_domains")},this.getTopDomainsDb=function(e){return a.http.get("stats/database/top_domains?"+q(e))},this.getTopBlockedDomains=function(){var e=a.http.config.fakeAPI?"stats/top_blocked":"stats/top_domains?blocked=true";return a.http.get(e)},this.getTopBlockedDomainsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked?":"stats/database/top_domains?blocked=true&";return a.http.get(t+q(e))},this.getTopClients=function(){return a.http.get("stats/top_clients")},this.getTopClientsDb=function(e){return a.http.get("stats/database/top_clients?"+q(e))},this.getTopBlockedClients=function(){var e=a.http.config.fakeAPI?"stats/top_blocked_clients":"stats/top_clients?blocked=true";return a.http.get(e)},this.getTopBlockedClientsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked_clients?":"stats/database/top_clients?blocked=true&";return a.http.get(t+q(e))},this.getHistory=function(e){return a.http.get("stats/history?"+U(e))},this.getExactWhitelist=function(){return a.http.get("dns/whitelist/exact")},this.getExactBlacklist=function(){return a.http.get("dns/blacklist/exact")},this.getRegexWhitelist=function(){return a.http.get("dns/whitelist/regex")},this.getRegexBlacklist=function(){return a.http.get("dns/blacklist/regex")},this.addExactWhitelist=function(e){return a.http.post("dns/whitelist/exact",{domain:e})},this.addExactBlacklist=function(e){return a.http.post("dns/blacklist/exact",{domain:e})},this.addRegexWhitelist=function(e){return a.http.post("dns/whitelist/regex",{domain:e})},this.addRegexBlacklist=function(e){return a.http.post("dns/blacklist/regex",{domain:e})},this.removeExactWhitelist=function(e){return a.http.delete("dns/whitelist/exact/"+e)},this.removeExactBlacklist=function(e){return a.http.delete("dns/blacklist/exact/"+e)},this.removeRegexWhitelist=function(e){return a.http.delete("dns/whitelist/regex/"+encodeURIComponent(e))},this.removeRegexBlacklist=function(e){return a.http.delete("dns/blacklist/regex/"+encodeURIComponent(e))},this.getStatus=function(){return a.http.get("dns/status")},this.setStatus=function(e,t){return a.http.post("dns/status",{action:e,time:t})},this.getNetworkInfo=function(){return a.http.get("settings/network")},this.getVersion=function(){return a.http.get("version")},this.getFTLdb=function(){return a.http.get("settings/ftldb")},this.getCacheInfo=function(){return a.http.get("dns/cacheinfo")},this.getDNSInfo=function(){return a.http.get("settings/dns")},this.getDHCPInfo=function(){return a.http.get("settings/dhcp")},this.updateDHCPInfo=function(e){return a.http.put("settings/dhcp",e)},this.updateDNSInfo=function(e){return a.http.put("settings/dns",e)},this.getPreferences=function(){return a.http.get("settings/web")},this.updatePreferences=function(e){return a.http.put("settings/web",e)}}(new function e(t){var a=this;Object(P.a)(this,e),this.config=t,this.handleResponse=function(e){return M(e).then(L).then(B)},this.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(a.urlFor(e),Object(F.a)({method:"GET",credentials:a.credentialType()},t)).then(a.handleResponse)},this.post=function(e,t){return fetch(a.urlFor(e),{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.put=function(e,t){return fetch(a.urlFor(e),{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.delete=function(e){return fetch(a.urlFor(e),{method:"DELETE",credentials:a.credentialType()}).then(a.handleResponse)},this.urlFor=function(e){return a.config.apiPath+"/"+e},this.credentialType=function(){return a.config.developmentMode?"include":"same-origin"}}(z)),V=function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized"),document.body.classList.toggle("brand-minimized")},W=function(){document.body.classList.toggle("sidebar-show")},G=function(){document.body.classList.remove("sidebar-show")},J=function(){return s.a.createElement("header",{className:"app-header navbar"},s.a.createElement("button",{className:"navbar-toggler d-lg-none text-white ml-3",onClick:W,type:"button"},"\u2630"),s.a.createElement(l.b,{to:"/dashboard",className:"navbar-brand text-center"},s.a.createElement("span",{className:"text-white",style:{lineHeight:"40px"}},s.a.createElement("span",{className:"navbar-brand-full"},"Pi-",s.a.createElement("b",null,"hole")),s.a.createElement("span",{className:"navbar-brand-minimized"},"P",s.a.createElement("b",null,"h")))),s.a.createElement("ul",{className:"nav navbar-nav d-md-down-none mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link navbar-toggler text-white sidebar-toggler",type:"button",onClick:V},"\u2630")),Q.loggedIn&&window.location.pathname.endsWith("/dashboard")?s.a.createElement("li",null,s.a.createElement(T,null)):null))},Y=a(651),X=a(652),Z=a(152),K=a.n(Z),$=a(13),ee=a(16),te=a(15),ae=a(49);function ne(e,t){var a=!1,n=null,r=function(e,r,s,o){a?r({isCanceled:!0}):(o?r(s):e(s),t&&(n=setTimeout(t.repeat,t.interval)))};return{promise:new Promise((function(t,a){e.then((function(e){return r(t,a,e,!1)}),(function(e){return r(t,a,e,!0)}))})),cancel:function(){null!==n&&clearTimeout(n),a=!0}}}var re=function(e){if(!e.isCanceled)throw e},se=function(){function e(t){Object(P.a)(this,e),this.value=t}return Object($.a)(e,[{key:"isErr",value:function(){return!1}},{key:"isOk",value:function(){return!0}},{key:"unwrap",value:function(){return this.value}},{key:"unwrapErr",value:function(){throw Error("unwrapErr on a Result.Ok")}}]),e}(),oe=function(){function e(t){Object(P.a)(this,e),this.err=t}return Object($.a)(e,[{key:"isErr",value:function(){return!0}},{key:"isOk",value:function(){return!1}},{key:"unwrap",value:function(){throw Error("unwrap on a Result.Err")}},{key:"unwrapErr",value:function(){return this.err}}]),e}(),ie=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={apiResult:null},e.dataHandle=void 0,e.loadData=function(t){var a=0!==e.props.repeatOptions.interval?{repeat:e.loadData,interval:e.props.repeatOptions.interval}:void 0;if(e.dataHandle&&e.dataHandle.cancel(),t)return e.setState({apiResult:new se(t)}),void(a&&setTimeout((function(){return e.loadData()}),a.interval));e.dataHandle=ne(e.props.apiCall(),a),e.dataHandle.promise.then((function(t){e.setState({apiResult:new se(t)})})).catch((function(t){if(!e.props.repeatOptions.ignoreCancel)throw t;re(t)})).catch((function(t){e.setState({apiResult:new oe(t)})}))},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.dataHandle&&this.dataHandle.cancel()}},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.props.flushOnUpdate&&(this.setState({apiResult:null}),this.loadData())}},{key:"render",value:function(){return this.state.apiResult?this.state.apiResult.isOk()?this.props.renderOk(this.state.apiResult.unwrap(),this.loadData):this.props.renderErr(this.state.apiResult.unwrapErr(),this.loadData):this.props.renderInitial()}}]),a}(r.Component);ie.defaultProps={repeatOptions:{ignoreCancel:!0,interval:0},flushOnUpdate:!0};var le={status:"unknown",refresh:function(){}},ce=s.a.createContext(le),ue=function(e){var t=e.children,a=Object(ae.a)(e,["children"]);return s.a.createElement(ie,{apiCall:Q.getStatus,repeatOptions:{interval:5e3,ignoreCancel:!0},flushOnUpdate:!1,renderInitial:function(){return s.a.createElement(ce.Provider,Object.assign({value:le},a),t)},renderOk:function(e,n){return s.a.createElement(ce.Provider,Object.assign({value:{status:e.status,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(ce.Provider,Object.assign({value:{status:le.status,refresh:n}},a),t)}})},de=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isEnabled=function(){return"enabled"===e.props.status},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-"+(this.isEnabled()?"success":"danger")}),"\xa0",e(this.isEnabled()?"Enabled":"Disabled"))}}]),a}(r.Component),me=Object(b.a)("common")(de),pe=function(){return s.a.createElement(ce.Consumer,null,(function(e){var t=e.status;return s.a.createElement(me,{status:t})}))},he=function(e){var t=e.name,a=e.icon,n=e.isOpen,r=e.children;return s.a.createElement("li",{className:"nav-item nav-dropdown"+(n?" open":"")},s.a.createElement("button",{className:"nav-link nav-dropdown-toggle",onClick:fe,type:"button"},s.a.createElement("i",{className:"nav-icon "+a}),t),s.a.createElement("ul",{className:"nav-dropdown-items"},r))},fe=function(e){e.target.parentElement.classList.toggle("open")},ge=function(e){var t=e.item,a=e.t;return s.a.createElement(Y.a,null,s.a.createElement(l.c,{to:t.url,onClick:G,className:"nav-link",activeClassName:"active"},s.a.createElement("i",{className:"nav-icon "+t.icon}),a(t.name)))},be=function(e){var t=e.item,a=e.t,n=e.location;return s.a.createElement(he,{name:a(t.name),icon:t.icon,isOpen:n.pathname.startsWith(t.url)},s.a.createElement(ve,{items:t.children,t:a,location:n}))},ve=function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement(r.Fragment,null,t.map((function(e,t){if(e.auth&&!Q.loggedIn)return null;if(e.authStrict&&e.auth!==Q.loggedIn)return null;if(void 0!==e.customComponent){var r=e.customComponent;return s.a.createElement(r,{key:t})}return e.children?s.a.createElement(be,{item:e,key:t,t:a,location:n}):s.a.createElement(ge,{item:e,key:t,t:a})})))},Ee=Object(b.a)(["common","location"])((function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"sidebar-nav"},s.a.createElement(X.a,null,s.a.createElement("li",{className:"nav-title",style:{textTransform:"none"}},s.a.createElement("img",{src:K.a,className:"img-responsive float-left",style:{height:"67px"},alt:""}),s.a.createElement("p",{className:"float-left pl-3 text-white mb-0",style:{fontSize:"0.875rem",lineHeight:"1"}},a("Status")),s.a.createElement("br",null),s.a.createElement("span",{className:"pl-3"},s.a.createElement(pe,null))),s.a.createElement(ve,{items:t,t:a,location:n}))))})),ye=function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(Ee,e))},ke=function(e){var t=e.updateAvailable,a=void 0!==t&&t,n=e.t;return a?s.a.createElement("div",{className:"ml-auto"},s.a.createElement(l.b,{to:"/settings/versions"},n("Update Available"))):null},Oe=function(e){var t=e.t;return s.a.createElement("a",{id:"paypalDonation",href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3J2L3Z4DHW9UY",target:"_blank",rel:"noopener noreferrer"},"\xa0",t("Donate"))},we=Object(b.a)(["common","footer"])((function(e){var t=e.t;return s.a.createElement("footer",{className:"app-footer"},s.a.createElement("div",null,s.a.createElement("i",{className:"fab fa-paypal"}),s.a.createElement("strong",null,s.a.createElement(Oe,{t:t}))," ",t("if you found this useful")),s.a.createElement(ke,e))})),Ce=function(){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(we,null))},je=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-success stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-globe-americas fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.totalQueries),s.a.createElement("p",{className:"mb-0"},e("Total Queries ({{count}} clients)",{count:this.props.uniqueClients}))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-primary stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-hand-paper fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.blockedQueries),s.a.createElement("p",{className:"mb-0"},e("Queries Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-warning stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-chart-pie fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.percentBlocked),s.a.createElement("p",{className:"mb-0"},e("Percent Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-danger stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-list-alt fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.gravityDomains),s.a.createElement("p",{className:"mb-0"},e("Domains On Blocklist"))))))}}]),a}(r.Component),Ne={totalQueries:"Lost",blockedQueries:"Connection",percentBlocked:"To",gravityDomains:"API",uniqueClients:0},Se={blockedQueries:"---",totalQueries:"---",percentBlocked:"---",gravityDomains:"---",uniqueClients:0},xe=Object(b.a)(["common","dashboard"])(je),Ie=function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(ie,{apiCall:function(){return t.range?Q.getSummaryDb(t.range):Q.getSummary()},repeatOptions:t.range?void 0:{interval:5e3,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(xe,Object.assign({},Se,e))},renderOk:function(t){return s.a.createElement(xe,Object.assign({},function(e){return{totalQueries:e.sum_queries.toLocaleString(),blockedQueries:e.blocked_queries.toLocaleString(),percentBlocked:e.percent_blocked.toFixed(2).toLocaleString()+"%",gravityDomains:e.gravity_size.toLocaleString(),uniqueClients:e.total_clients}}(t),e))},renderErr:function(){return s.a.createElement(xe,Object.assign({},Ne,e))}})}))},De=function(e){return("00"+e).substr(-2,2)},Ae=function(e){return Math.ceil((e.until.unix()-e.from.unix())/144)},He=a(100),Re=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t,t={labels:this.props.labels,datasets:[{label:e("Total Queries"),data:this.props.domains_over_time,fill:!0,backgroundColor:"rgba(220,220,220,0.5)",borderColor:"rgba(0, 166, 90,.8)",pointBorderColor:"rgba(0, 166, 90,.8)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"},{label:e("Blocked Queries"),data:this.props.blocked_over_time,fill:!0,backgroundColor:"rgba(0,192,239,0.5)",borderColor:"rgba(0,192,239,1)",pointBorderColor:"rgba(0,192,239,1)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"}]},a={tooltips:{enabled:!0,mode:"x-axis",callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=De(n)+":"+De(r-5)+":00",o=De(n)+":"+De(r+4)+":59";return e("Queries from {{from}} to {{to}}",{from:s,to:o})},label:function(e,t){if(1===e.datasetIndex){var a=0,n=t.datasets[0].data[e.index],r=t.datasets[1].data[e.index];return n>0&&(a=100*r/n),t.datasets[e.datasetIndex].label+": "+e.yLabel+" ("+a.toFixed(1)+"%)"}return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1},n=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Queries Over {{range}}",{range:n})),s.a.createElement("div",{className:"card-body"},s.a.createElement(He.b,{width:970,height:170,data:t,options:a})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),a}(r.Component),_e={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",domains_over_time:[],blocked_over_time:[]},Te=Object(b.a)(["dashboard","time-ranges"])(Re),Pe=function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(ie,{apiCall:function(){return t.range?Q.getHistoryGraphDb(t.range,Ae(t.range)):Q.getHistoryGraph()},repeatOptions:t.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Te,Object.assign({},_e,e))},renderOk:function(a){return s.a.createElement(Te,Object.assign({},function(e,t){var a="hour";t?t.until.diff(t.from,"day")>1&&(a="day"):e=e.slice(0,-1);var n=e.map((function(e){return new Date(1e3*e.timestamp)})),r=e.map((function(e){return e.total_queries})),s=e.map((function(e){return e.blocked_queries}));return{loading:!1,labels:n,timeUnit:a,rangeName:t?t.name:void 0,domains_over_time:r,blocked_over_time:s}}(a,t.range),e))},renderErr:function(){return s.a.createElement(Te,Object.assign({},_e,e))}})}))},Fe=a(81),Me=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={tooltip:null},e}return Object($.a)(a,[{key:"render",value:function(){var e=this,t=this.state.tooltip,a=Date.now();if(this.props.handler.custom=function(t){0===t.opacity&&e.setState({tooltip:t});var n=Date.now();n-a<50||(a=n,e.setState({tooltip:t}))},null===t||0===t.opacity||null===this.props.chart.current)return null;var n=this.props.chart.current.chartInstance.canvas.getBoundingClientRect(),r=t.caretX;document.offsetWidth-t.caretX<400&&(r=document.offsetWidth-400),t.caretX<100&&(r=100);var o={opacity:1,left:n.left+r+"px",top:n.top+t.caretY+window.scrollY+"px",fontFamily:t._bodyFontFamily,fontSize:t.bodyFontSize+"px",fontStyle:t._bodyFontStyle,padding:t.yPadding+"px "+t.xPadding+"px"},i=[];return t.body&&(i=t.body.map((function(e){return e.lines})).map((function(e,a){return{data:e[0],colors:t.labelColors[a]}}))),i.sort((function(e,t){return e.data.split(": ")[0].localeCompare(t.data.split(": ")[0])})),s.a.createElement("div",{className:"chartjs-tooltip",style:o},s.a.createElement("table",null,s.a.createElement("thead",null,t.title.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("th",null,e))}))),s.a.createElement("tbody",null,i.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"chartjs-tooltip-key",style:{background:e.colors.backgroundColor,borderColor:e.colors.borderColor,borderWidth:"2px"}}),e.data))})))))}}]),a}(r.Component),Le=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).graphRef=void 0,n.graphRef=s.a.createRef(),n}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t,t={tooltips:{enabled:!1,mode:"x-axis",callbacks:{title:function(t){var a=y()(t[0].xLabel,"HH:mm"),n=a.clone().subtract(5,"minutes"),r=a.clone().add(4,"minutes").add(59,"seconds"),s=n.format("HH:mm:ss"),o=r.format("HH:mm:ss");return e("Client activity from {{from}} to {{to}}",{from:s,to:o})},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]},maintainAspectRatio:!1},a=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Clients Over {{range}}",{range:a})),s.a.createElement("div",{className:"card-body"},s.a.createElement(He.b,{width:970,height:170,data:{labels:this.props.labels,datasets:this.props.datasets},options:t,ref:this.graphRef})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null,i.a.createPortal(s.a.createElement(Me,{chart:this.graphRef,handler:t.tooltips}),document.body))}}]),a}(r.Component),Be={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",datasets:[]},Ue=Object(b.a)(["dashboard","time-ranges"])(Le),qe=function(e){var t=e.apiClient;return s.a.createElement(f.Consumer,null,(function(e){return s.a.createElement(ie,{apiCall:function(){return e.range?t.getClientsGraphDb(e.range,Ae(e.range)):t.getClientsGraph()},repeatOptions:e.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ue,Be)},renderOk:function(t){return s.a.createElement(Ue,function(e,t){var a="hour",n=e.over_time;t?t.until.diff(t.from,"day")>1&&(a="day"):n=e.over_time.slice(0,-1);var r,s=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],o=n.map((function(e){return new Date(1e3*e.timestamp).toISOString()})),i=[],l=0,c=Object(Fe.a)(e.clients);try{for(c.s();!(r=c.n()).done;){var u=r.value;i.push({label:0!==u.name.length?u.name:u.ip,backgroundColor:l<s.length?s[l]:"#"+parseInt(String(16777215*Math.random()),10).toString(16).padStart(6,"0"),pointRadius:0,pointHitRadius:5,pointHoverRadius:5,cubicInterpolationMode:"monotone",data:[]}),l++}}catch(E){c.e(E)}finally{c.f()}var d,m=Object(Fe.a)(n);try{for(m.s();!(d=m.n()).done;){var h,f=d.value,g=Object(Fe.a)(i.entries());try{for(g.s();!(h=g.n()).done;){var b=Object(p.a)(h.value,2),v=b[0];b[1].data.push(f.data[v])}}catch(E){g.e(E)}finally{g.f()}}}catch(E){m.e(E)}finally{m.f()}return i.sort((function(e,t){return e.label.localeCompare(t.label)})),{labels:o,datasets:i,loading:!1,timeUnit:a,rangeName:t?t.name:void 0}}(t,e.range))},renderErr:function(){return s.a.createElement(Ue,Be)}})}))};qe.defaultProps={apiClient:Q};var ze=a(101),Qe=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).chartRef=void 0,n.handleClick=function(e,t){var a=n.chartRef.current.chartInstance;a.legend.options.onClick.call(a,e,a.legend.legendItems[t]),n.forceUpdate()},n.chartRef=s.a.createRef(),n}return Object($.a)(a,[{key:"render",value:function(){var e=this,t={legend:{display:!1},tooltips:{enabled:!0,callbacks:{title:function(){return e.props.title},label:function(e,t){var a=t.datasets[e.datasetIndex],n=t.labels[e.index];return n+": "+a.data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},a=null!==this.chartRef.current?this.chartRef.current.chartInstance.getDatasetMeta(0).data:this.props.data.map((function(){return{hidden:!1}}));return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"float-left",style:{width:"67%"}},s.a.createElement(He.a,{width:100,height:250,options:t,ref:this.chartRef,data:{datasets:[{data:Object(ze.a)(this.props.data),backgroundColor:this.props.colors}],labels:this.props.labels}})),s.a.createElement("div",{className:"float-right",style:{width:"33%"}},s.a.createElement("ul",{className:"chart-legend"},this.props.labels.map((function(t,a){return[t,e.props.colors[a]]})).map((function(t,n){var r=Object(p.a)(t,2),o=r[0],i=r[1];return s.a.createElement("li",{key:n,className:a[n]&&a[n].hidden?"strike":"",onClick:function(t){return e.handleClick(t,n)}},s.a.createElement("span",{style:{backgroundColor:i}}),o)}))))),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),a}(r.Component),Ve={loading:!0,data:[],colors:[],labels:[]},We=function(e){var t=e.apiCall,a=e.title,n=e.apiHandler,r=Object(ae.a)(e,["apiCall","title","apiHandler"]);return s.a.createElement(ie,{apiCall:t,renderInitial:function(){return s.a.createElement(Qe,Object.assign({title:a},Ve,r))},renderOk:function(e){return s.a.createElement(Qe,Object.assign({title:a},function(e){var t,a=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],n=[],r=[],s=[],o=0,i=Object(Fe.a)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value;n.push(l.percent),r.push(0!==l.name.length?l.name:l.ip),s.push(o<a.length?a[o]:"#"+parseInt(String(16777215*Math.random()),10).toString(16).padStart(6,"0")),o++}}catch(c){i.e(c)}finally{i.f()}return{loading:!1,data:n,colors:s,labels:r}}(n(e)),r))},renderErr:function(){return s.a.createElement(Qe,Object.assign({title:a},Ve,r))}})},Ge=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(We,{title:t("Query Types"),apiCall:a,apiHandler:function(e){var t=e.reduce((function(e,t){return e+t.count}),0);return e.map((function(e){return{name:e.name,percent:t>0?100*e.count/t:0}}))}})},Je=Object(b.a)("dashboard")((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(Ge,Object.assign({},e,{apiCall:function(){return t.range?Q.getQueryTypesDb(t.range):Q.getQueryTypes()}}))}))})),Ye=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(We,{title:t("Queries Answered By Destination"),apiCall:a,apiHandler:function(e){return e.upstreams.map((function(t){return{name:t.name,ip:t.ip,percent:100*t.count/e.total_queries}}))}})},Xe=Object(b.a)("dashboard")((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(Ye,Object.assign({},e,{apiCall:function(){return t.range?Q.getUpstreamsDb(t.range):Q.getUpstreams()}}))}))})),Ze=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).generateCard=function(){return e.props.isEmpty(e.props.data)?s.a.createElement("div",{className:"card-body"},e.props.emptyMessage):s.a.createElement("div",{className:"card-body p-0"},s.a.createElement("div",{style:{overflowX:"auto"}},s.a.createElement("table",{className:"table m-0"},s.a.createElement("tbody",null,s.a.createElement("tr",null,e.props.headers.map((function(e,t){return s.a.createElement("th",{className:"border-top-0",key:t},e)}))),e.props.generateRows(e.props.data)))))},e}return Object($.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),this.generateCard(),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),a}(r.Component);Ze.defaultProps={loading:!0,title:"",data:{},headers:[],emptyMessage:"",isEmpty:function(){return!0},generateRows:function(){return null}};var Ke=function(e){var t=e.title,a=e.apiCall,n=e.initialData,r=e.headers,o=e.emptyMessage,i=e.isEmpty,l=e.apiHandler,c=e.generateRows,u=Object(ae.a)(e,["title","apiCall","initialData","headers","emptyMessage","isEmpty","apiHandler","generateRows"]);return s.a.createElement(ie,{apiCall:a,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:o,isEmpty:i,generateRows:c,data:n,loading:!0},u))},renderOk:function(e){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:o,isEmpty:i,generateRows:c,data:l(e),loading:!1},u))},renderErr:function(){return s.a.createElement(Ze,Object.assign({title:t,headers:r,emptyMessage:o,isEmpty:i,generateRows:c,data:n,loading:!0},u))}})},$e=function(e){return{totalQueries:e.total_queries,topDomains:e.top_domains}},et=function(e){return function(t){return t.topDomains.map((function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-success",style:{width:n+"%"}}))))}))}},tt=function(e){var t=e.apiCall,a=e.t,n=Object(ae.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Permitted Domains"),initialData:{totalQueries:0,topDomains:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topDomains.length},apiCall:t,apiHandler:$e,generateRows:et(a)}))},at=Object(b.a)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(tt,Object.assign({},e,{apiCall:function(){return t.range?Q.getTopDomainsDb(t.range):Q.getTopDomains()}}))}))})),nt=function(e){return{totalBlocked:e.blocked_queries,topBlocked:e.top_domains}},rt=function(e){return function(t){return t.topBlocked.map((function(a){var n=a.count/t.totalBlocked*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalBlocked.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-warning",style:{width:n+"%"}}))))}))}},st=function(e){var t=e.apiCall,a=e.t,n=Object(ae.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Blocked Domains"),initialData:{totalBlocked:0,topBlocked:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topBlocked.length},apiCall:t,apiHandler:nt,generateRows:rt(a)}))},ot=Object(b.a)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(st,Object.assign({},e,{apiCall:function(){return t.range?Q.getTopBlockedDomainsDb(t.range):Q.getTopBlockedDomains()}}))}))})),it=function(e){return{totalQueries:e.total_queries,topClients:e.top_clients}},lt=function(e){return function(t){return t.topClients.map((function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-primary",style:{width:n+"%"}}))))}))}},ct=function(e){var t=e.apiCall,a=e.t,n=Object(ae.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Clients"),initialData:{totalQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:it,generateRows:lt(a)}))},ut=Object(b.a)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(ct,Object.assign({},e,{apiCall:function(){return t.range?Q.getTopClientsDb(t.range):Q.getTopClients()}}))}))})),dt=function(e){return{blockedQueries:e.blocked_queries,topClients:e.top_clients}},mt=function(e){return function(t){return t.topClients.map((function(a){var n=a.count/t.blockedQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{className:"align-middle"},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.blockedQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-danger",style:{width:n+"%"}}))))}))}},pt=function(e){var t=e.apiCall,a=e.t,n=Object(ae.a)(e,["apiCall","t"]);return s.a.createElement(Ke,Object.assign({},n,{title:a("Top Blocked Clients"),initialData:{blockedQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:dt,generateRows:mt(a)}))},ht=Object(b.a)(["common","dashboard"])((function(e){return s.a.createElement(f.Consumer,null,(function(t){return s.a.createElement(pt,Object.assign({},e,{apiCall:function(){return t.range?Q.getTopBlockedClientsDb(t.range):Q.getTopBlockedClients()}}))}))})),ft=a(307),gt=a(90),bt=a(125),vt=a.n(bt),Et=a(200),yt=a.n(Et),kt=(a(611),function(e){var t=R(e),a=e("Last 24 Hours");return{from:t[a][0],until:t[a][1],name:a}}),Ot=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;Object(P.a)(this,a),(n=t.call(this,e)).updateHandler=null,n.state={history:[],cursor:null,loading:!1,atEnd:!1,filtersChanged:!1,filters:[]},n.getRowProps=function(e,t){return t&&0!==t.row.status?{style:{color:[1,4,5,6].includes(t.row.status)?"red":"green"}}:{}},n.parseFilters=function(e){var t,a={},n=Object(Fe.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.id){case"time":a.from=y()(r.value.from).unix(),a.until=y()(r.value.until).unix();break;case"queryType":if("all"===r.value)break;a.query_type=parseInt(r.value);break;case"domain":if(0===r.value.length)break;a.domain=r.value;break;case"client":if(0===r.value.length)break;a.client=r.value;break;case"status":switch(r.value){case"all":break;case"allowed":a.blocked=!1;break;case"blocked":a.blocked=!0;break;default:a.status=r.value}break;case"dnssec":if("all"===r.value)break;a.dnssec=r.value;break;case"reply":if("all"===r.value)break;a.reply=r.value}}}catch(s){n.e(s)}finally{n.f()}return a},n.fetchQueries=function(e){var t=e.page,a=e.pageSize;n.state.atEnd||n.state.loading||!n.state.filtersChanged&&n.state.history.length>=(t+2)*a||(n.setState({loading:!0}),n.updateHandler=ne(Q.getHistory(Object(F.a)({cursor:n.state.cursor},n.parseFilters(n.state.filters)))),n.updateHandler.promise.then((function(e){n.setState((function(t){return{loading:!1,atEnd:null===e.cursor,cursor:e.cursor,history:t.history.concat(e.history),filtersChanged:!1}}))})).catch(re))};var r=n.props.t;return n.state.filters=[{id:"time",value:kt(r)}],n}return Object($.a)(a,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement(ft.a,{className:"-striped bg-white mb-4",style:{lineHeight:1},columns:It(t),showPaginationTop:!0,sortable:!1,filterable:!1,data:this.state.history,loading:this.state.loading,onFetchData:function(t){if(!yt()(t.filtered,e.state.filters))return vt()(e.fetchQueries,350)(t);e.fetchQueries(t)},onFilteredChange:vt()((function(t){yt()(t,e.state.filters)||e.setState({filters:t,filtersChanged:!0,cursor:null,atEnd:!1,loading:!1,history:[]})}),300),defaultFiltered:[{id:"time",value:kt(t)}],getTrProps:this.getRowProps,ofText:this.state.atEnd?"of":"of at least",PadRowComponent:function(){return s.a.createElement("span",null,"\xa0",s.a.createElement("br",null),"\xa0")}})}}]),a}(r.Component),wt=function(e){return[e("Unknown"),e("Blocked (gravity)"),e("Allowed (forwarded)"),e("Allowed (cached)"),e("Blocked (regex/wildcard)"),e("Blocked (blacklist)"),e("Blocked (external)")]},Ct=function(e){return["N/A",e("Secure"),e("Insecure"),e("Bogus"),e("Abandoned"),e("Unknown")]},jt=["","green","orange","red","red","orange"],Nt=function(e){return[e("Unknown"),"NODATA","NXDOMAIN","CNAME","IP","DOMAIN","RRNAME"]},St=["A","AAAA","ANY","SRV","SOA","PTR","TXT"],xt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(n){var r=n.filter,o=n.onChange;return s.a.createElement("select",{onChange:function(e){return o(e.target.value)},style:{width:"100%"},value:r?r.value:"all"},s.a.createElement("option",{value:"all"},t("All")),a.map((function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.name)})),e.map((function(e,t){return s.a.createElement("option",{key:t+a.length,value:t},e)})))}},It=function(e){return[{Header:e("Time"),id:"time",accessor:function(e){return e.timestamp},width:70,Cell:function(e){var t=new Date(1e3*e.value),a=t.toLocaleDateString(gt.a.language,{month:"short"}),n=De(t.getDate()),o=De(t.getHours()),i=De(t.getMinutes()),l=De(t.getSeconds());return s.a.createElement(r.Fragment,null,a+", "+n,s.a.createElement("br",null),o+":"+i+":"+l)},filterable:!0,filterMethod:function(){return!0},Filter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){var a=t.filter,n=t.onChange;return s.a.createElement(_,{range:a?a.value:null,onSelect:function(t){n(t||kt(e))},showLabel:!1})}))},{Header:e("Type"),id:"queryType",accessor:function(e){return St[e.type]},width:50,filterable:!0,filterMethod:function(){return!0},Filter:xt(St,e)},{Header:e("Domain"),id:"domain",accessor:function(e){return e.domain},minWidth:150,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Client"),id:"client",accessor:function(e){return e.client},minWidth:120,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Status"),id:"status",accessor:function(e){return e.status},width:140,Cell:function(t){return wt(e)[t.value]},filterable:!0,filterMethod:function(){return!0},Filter:xt(wt(e),e,[{name:e("Allowed"),value:"allowed"},{name:e("Blocked"),value:"blocked"}])},{Header:"DNSSEC",id:"dnssec",accessor:function(e){return e.dnssec},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:jt[t.value]}},Ct(e)[t.value])},filterable:!0,filterMethod:function(){return!0},Filter:xt(Ct(e),e)},{Header:e("Reply"),id:"reply",accessor:function(e){return{type:e.reply,time:e.response_time}},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:"black"}},Nt(e)[t.value.type],s.a.createElement("br",null),"("+(t.value.time/10).toLocaleString()+"ms)")},filterable:!0,filterMethod:function(){return!0},Filter:xt(Nt(e),e)},{Header:e("Action"),width:100,filterable:!1,Cell:function(t){return[1,4,5].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-success btn-block",onClick:function(){return Q.addExactWhitelist(t.row.domain)}},e("Whitelist")):[2,3,6].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-danger btn-block",onClick:function(){return Q.addExactBlacklist(t.row.domain)}},e("Blacklist")):null}}]},Dt=Object(b.a)(["common","query-log","time-ranges"])(Ot),At=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={domain:"",isValid:!0},e.handleChange=function(t){e.setState({domain:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.domain;if(0!==a.length){var n=e.props.isValid(a);e.setState({isValid:n}),n?(e.props.onEnter(a),e.setState({domain:""})):e.props.onValidationError()}},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.placeholder,n=e.onRefresh;return s.a.createElement("form",{className:"form-group input-group",onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.isValid?"":"is-invalid"),placeholder:a,value:this.state.domain,onChange:this.handleChange,disabled:!Q.loggedIn}),s.a.createElement("span",{className:"btn-group input-group-append"},Q.loggedIn?s.a.createElement("button",{className:"btn border-secondary",type:"submit"},t("Add")):null,s.a.createElement("button",{onClick:n,className:"btn border-secondary",type:"button"},s.a.createElement("i",{className:"fa fa-sync"}))))}}]),a}(r.Component);At.defaultProps={placeholder:""};var Ht=Object(b.a)(["common","lists"])(At),Rt=function(e){var t=e.dismissible?"alert-dismissible":"";return s.a.createElement("div",{className:"alert alert-".concat(e.type," ").concat(t," fade show")},e.dismissible?s.a.createElement("button",{type:"button",className:"close",onClick:e.onClick},"\xd7"):null,e.message)};Rt.defaultProps={onClick:function(){},dismissible:!0};var _t=Rt,Tt=Object(b.a)(["common","lists"])((function(e){var t,a=e.domains,n=e.onRemove,r=e.t;return t=a.length>0?a.map((function(e){return s.a.createElement("li",{key:e,className:"list-group-item"},Q.loggedIn?(t=e,s.a.createElement(m.a,{color:"danger",size:"sm",className:"float-right",style:{marginTop:"2px"},onClick:function(){return n(t)}},s.a.createElement("span",{className:"far fa-trash-alt"}))):null,s.a.createElement("span",{className:"d-table-cell align-middle",style:{height:"32px"}},e));var t})):s.a.createElement(_t,{type:"info",message:r("There are no domains in this list"),dismissible:!1}),s.a.createElement("ul",{className:"list-group"},t)})),Pt=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={domains:[],message:"",messageType:"info"},e.addHandler=void 0,e.removeHandler=void 0,e.refreshHandler=void 0,e.onEnter=function(t){if(e.state.domains.includes(t))e.onAlreadyAdded(t);else{var a=e.state.domains.slice();e.addHandler=ne(e.props.onAdd(t)),e.addHandler.promise.then((function(){e.onAdded(t)})).catch(re).catch((function(){e.onAddFailed(t,a)})),e.onAdding(t)}},e.onAdding=function(t){return e.setState((function(e,a){return{message:a.t("Adding {{domain}}...",{domain:t}),messageType:"info"}}))},e.onAlreadyAdded=function(t){return e.setState((function(e,a){return{message:a.t("{{domain}} is already added",{domain:t}),messageType:"danger"}}))},e.onAdded=function(t){return e.setState((function(a){return{domains:[].concat(Object(ze.a)(a.domains),[t]),message:e.props.t("Successfully added {{domain}}",{domain:t}),messageType:"success"}}))},e.onAddFailed=function(t,a){return e.setState((function(e,n){return{domains:a,message:n.t("Failed to add {{domain}}",{domain:t}),messageType:"danger"}}))},e.onRemoved=function(t){return e.setState((function(e){return{domains:e.domains.filter((function(e){return e!==t}))}}))},e.onRemoveFailed=function(t,a){return e.setState((function(e,n){return{domains:a,message:n.t("Failed to remove {{domain}}",{domain:t}),messageType:"danger"}}))},e.onRemove=function(t){if(e.state.domains.includes(t)){var a=e.state.domains.slice();e.removeHandler=ne(e.props.onRemove(t)),e.removeHandler.promise.catch(re).catch((function(){e.onRemoveFailed(t,a)})),e.onRemoved(t)}},e.onRefresh=function(){e.refreshHandler=ne(e.props.onRefresh()),e.refreshHandler.promise.then((function(t){e.setState({domains:t})})).catch(re)},e.handleValidationError=function(){e.setState((function(e,t){return{message:t.validationErrorMsg,messageType:"danger"}}))},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.onRefresh()}},{key:"componentWillUnmount",value:function(){this.addHandler&&this.addHandler.cancel(),this.removeHandler&&this.removeHandler.cancel(),this.refreshHandler&&this.refreshHandler.cancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mb-4"},s.a.createElement("h2",{className:"text-center"},this.props.title),s.a.createElement("br",null),s.a.createElement(Ht,{placeholder:this.props.placeholder,onEnter:this.onEnter,onRefresh:this.onRefresh,isValid:this.props.isValid,onValidationError:this.handleValidationError}),this.props.note,this.state.message?s.a.createElement(_t,{message:this.state.message,type:this.state.messageType,onClick:function(){return e.setState({message:""})}}):null,s.a.createElement(Tt,{domains:this.state.domains,onRemove:this.onRemove}))}}]),a}(r.Component);Pt.defaultProps={note:""};var Ft=Object(b.a)(["common","lists"])(Pt);function Mt(e){if(e.length>253)return!1;var t=e.split(".");return!t.some((function(e){return e.length<1||e.length>63}))&&(!Lt(t.join(""))&&/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)+(\.([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*$/.test(e))}function Lt(e){return/^[0-9]+$/.test(e)}function Bt(e){try{new RegExp(e)}catch(t){return!1}return!0}function Ut(e){var t=e.split(".");return 4===t.length&&t.every((function(e){return Lt(e)&&parseInt(e)<256}))}var qt=Object(b.a)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Whitelist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:Q.addExactWhitelist,onRemove:Q.removeExactWhitelist,onRefresh:Q.getExactWhitelist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))})),zt=Object(b.a)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:Q.addExactBlacklist,onRemove:Q.removeExactBlacklist,onRefresh:Q.getExactBlacklist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))})),Qt=Object(b.a)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Whitelist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),onAdd:Q.addRegexWhitelist,onRemove:Q.removeRegexWhitelist,onRefresh:Q.getRegexWhitelist,isValid:Bt,validationErrorMsg:t("Not a valid regular expression")},e))})),Vt=Object(b.a)(["location","lists"])((function(e){var t=e.t;return s.a.createElement(Ft,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),onAdd:Q.addRegexBlacklist,onRemove:Q.removeRegexBlacklist,onRefresh:Q.getRegexBlacklist,isValid:Bt,validationErrorMsg:t("Not a valid regular expression")},e))})),Wt=a(653),Gt=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0},e}return Object($.a)(a,[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement("div",{className:"card border-0 bg-primary"},s.a.createElement("div",{className:"card-block"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:this.props.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,this.props.name),s.a.createElement("p",null,t("Version"),":"," ","master"===this.props.branch?this.props.tag:"vDev"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.setState((function(e){return{collapsed:!e.collapsed}}))}},t("Details")),s.a.createElement(Wt.a,{isOpen:!this.state.collapsed},s.a.createElement("table",{className:"table table-borderless table-sm table-condensed mt-3 mb-0"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t("Branch")),s.a.createElement("td",null,this.props.branch)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Tag")),s.a.createElement("td",null,this.props.tag)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Hash")),s.a.createElement("td",null,this.props.hash)))))))}}]),a}(r.Component),Jt=Object(b.a)(["common","settings"])(Gt),Yt=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("Core"),icon:"far fa-dot-circle fa-2x",branch:this.props.core.branch,hash:this.props.core.hash,tag:this.props.core.tag})),s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("FTL"),icon:"fa fa-industry fa-2x",branch:this.props.ftl.branch,hash:this.props.ftl.hash,tag:this.props.ftl.tag})),s.a.createElement("div",{className:"col-xl-4 col-md-4 col-xs-12"},s.a.createElement(Jt,{name:e("Web"),icon:"far fa-list-alt fa-2x",branch:this.props.web.branch,hash:this.props.web.hash,tag:this.props.web.tag})))}}]),a}(r.Component),Xt={core:{branch:"unknown",hash:"unknown",tag:"unknown"},ftl:{branch:"unknown",hash:"unknown",tag:"unknown"},web:{branch:"unknown",hash:"unknown",tag:"unknown"}},Zt=Object(b.a)(["common"])(Yt),Kt=function(e){return s.a.createElement(ie,{apiCall:Q.getVersion,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Zt,Object.assign({},Xt,e))},renderOk:function(t){return s.a.createElement(Zt,Object.assign({},t,e))},renderErr:function(){return s.a.createElement(Zt,Object.assign({},Xt,e))}})},$t=a(662),ea=a(663),ta=a(664),aa=a(654),na=a(655),ra=a(656),sa=a(657),oa=a(658),ia=a(659),la=a(670),ca=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,settings:{active:!1,ip_start:"",ip_end:"",router_ip:"",lease_time:0,domain:"",ipv6_support:!1,rapid_commit:!0}},e.loadHandler=void 0,e.updateHandler=void 0,e.loadDHCPInfo=function(){e.loadHandler=ne(Q.getDHCPInfo()),e.loadHandler.promise.then((function(t){e.setState({settings:t})})).catch(re)},e.onChange=function(t,a){return function(n){var r=n.target[a];e.setState((function(e){return{settings:Object(F.a)(Object(F.a)({},e.settings),{},Object(v.a)({},t,r))}}))}},e.saveSettings=function(t){t.preventDefault();var a=e.props.t;e.setState({alertMessage:a("Processing..."),alertType:"info",showAlert:!0,processing:!0}),e.updateHandler=ne(Q.updateDHCPInfo(e.state.settings)),e.updateHandler.promise.then((function(){e.setState({alertMessage:a("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})})).catch(re).catch((function(t){var n="";n=t instanceof Error?t.message:a("API Error: {{error}}",{error:a(t.key,t.data)}),e.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})}))},e.isSettingValid=function(t,a){return!e.state.settings.active&&0===t.length||a(t)},e.hideAlert=function(){e.setState({showAlert:!1})},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadDHCPInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.isSettingValid(this.state.settings.ip_start,Ut),n=this.isSettingValid(this.state.settings.ip_end,Ut),r=this.isSettingValid(this.state.settings.router_ip,Ut),o=this.state.settings.lease_time>=0,i=this.isSettingValid(this.state.settings.domain,Mt),l=this.state.showAlert?s.a.createElement(_t,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},l,s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:this.state.settings.active,onChange:this.onChange("active","checked")}),t("Enabled"))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"startIP",sm:2},t("Start IP")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"startIP",disabled:!this.state.settings.active,value:this.state.settings.ip_start,onChange:this.onChange("ip_start","value"),invalid:!a}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"endIP",sm:2},t("End IP")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"endIP",disabled:!this.state.settings.active,value:this.state.settings.ip_end,onChange:this.onChange("ip_end","value"),invalid:!n}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"routerIP",sm:2},t("Router IP")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"routerIP",disabled:!this.state.settings.active,value:this.state.settings.router_ip,onChange:this.onChange("router_ip","value"),invalid:!r}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"leaseTime",sm:2},t("Lease Time")),s.a.createElement(oa.a,{sm:10},s.a.createElement(ia.a,null,s.a.createElement(sa.a,{id:"leaseTime",disabled:!this.state.settings.active,value:this.state.settings.lease_time,onChange:function(t){return e.setState((function(e){return{settings:Object(F.a)(Object(F.a)({},e.settings),{},{lease_time:parseInt(t.target.value)})}}))},invalid:!o}),s.a.createElement(la.a,{addonType:"append"},"Hours")))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"domain",sm:2},t("Domain")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"domain",disabled:!this.state.settings.active,value:this.state.settings.domain,onChange:this.onChange("domain","value"),invalid:!i}))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.ipv6_support,onChange:this.onChange("ipv6_support","checked")}),t("IPv6 Support"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.rapid_commit,onChange:this.onChange("rapid_commit","checked")}),t("Rapid Commit"))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!a||!n||!r||!o||!i},t("Apply")))}}]),a}(r.Component),ua=Object(b.a)(["common","settings","api-errors"])(ca),da=a(661),ma=a(660),pa=function(e){var t=e.address,a=e.onRemove;return s.a.createElement(ma.a,null,t,s.a.createElement(m.a,{color:"danger",size:"sm",className:"float-right",onClick:a},s.a.createElement("span",{className:"far fa-trash-alt"})))},ha=a(306),fa=[{name:"OpenDNS (ECS)",primaryIpv4:"208.67.222.222",secondaryIpv4:"208.67.220.220",primaryIpv6:"2620:119:35::35",secondaryIpv6:"2620:119:53::53"},{name:"Google (ECS)",primaryIpv4:"8.8.8.8",secondaryIpv4:"8.8.4.4",primaryIpv6:"2001:4860:4860:0:0:0:0:8888",secondaryIpv6:"2001:4860:4860:0:0:0:0:8844"},{name:"Quad9 (filtered, DNSSEC)",primaryIpv4:"9.9.9.9",secondaryIpv4:"149.112.112.112",primaryIpv6:"2620:fe::fe",secondaryIpv6:"2620:fe::9"},{name:"Quad9 (unfiltered, no DNSSEC)",primaryIpv4:"9.9.9.10",secondaryIpv4:"149.112.112.10",primaryIpv6:"2620:fe::10",secondaryIpv6:"2620:fe::fe:10"},{name:"Quad9 (filtered + ECS)",primaryIpv4:"9.9.9.11",secondaryIpv4:"149.112.112.11",primaryIpv6:"2620:fe::11",secondaryIpv6:""},{name:"Cloudflare",primaryIpv4:"1.1.1.1",secondaryIpv4:"1.0.0.1",primaryIpv6:"2606:4700:4700::1111",secondaryIpv6:"2606:4700:4700::1001"},{name:"Level3",primaryIpv4:"4.2.2.1",secondaryIpv4:"4.2.2.2",primaryIpv6:"",secondaryIpv6:""},{name:"Comodo",primaryIpv4:"8.26.56.26",secondaryIpv4:"8.20.247.20",primaryIpv6:"",secondaryIpv6:""},{name:"DNS.WATCH",primaryIpv4:"84.200.69.80",secondaryIpv4:"84.200.70.40",primaryIpv6:"2001:1608:10:25:0:0:1c04:b12f",secondaryIpv6:"2001:1608:10:25:0:0:9249:d69b"}].flatMap((function(e){var t=function(t,a,n){return{label:e.name+" "+a+" "+n+" ("+t+")",address:t}},a=[];return e.primaryIpv4.length>0&&a.push(t(e.primaryIpv4,"Primary","IPv4")),e.secondaryIpv4.length>0&&a.push(t(e.secondaryIpv4,"Secondary","IPv4")),e.primaryIpv6.length>0&&a.push(t(e.primaryIpv6,"Primary","IPv6")),e.secondaryIpv6.length>0&&a.push(t(e.secondaryIpv6,"Secondary","IPv6")),a})),ga=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={address:"",selected:[]},n.typeahead=void 0,n.getAddress=function(){return 0===n.state.selected.length?n.state.address:n.state.selected[0].address},n.typeahead=s.a.createRef(),n}return Object($.a)(a,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.isValid(this.getAddress());return s.a.createElement(ma.a,null,s.a.createElement(ia.a,null,s.a.createElement(ha.a,{id:"dns-list-typeahead",onInputChange:function(t){return e.setState({address:t})},onChange:function(t){return e.setState({selected:t})},options:fa.filter((function(t){return!e.props.upstreams.includes(t.address)})),selected:this.state.selected,emptyLabel:t("Detected custom upstream server"),positionFixed:!0,ref:this.typeahead}),s.a.createElement(la.a,{addonType:"append"},s.a.createElement(m.a,{color:"success",size:"sm",onClick:function(){e.props.onAdd(e.getAddress()),e.setState({address:"",selected:[]}),e.typeahead.current.getInstance().clear()},disabled:!a},s.a.createElement("span",{className:"fa fa-plus"})))))}}]),a}(r.Component),ba=Object(b.a)("settings")(ga),va=function(e,t){return!t.includes(e)&&(function(e){var t=e.split(":");return!!Ut(t[0])&&(1===t.length||2===t.length&&Lt(t[1]))}(e)||function(e){return/^(\[[a-fA-F0-9:]+]:\d+|[a-fA-F0-9:]+)$/.test(e)}(e))},Ea=function(e){var t=e.upstreams,a=e.onAdd,n=e.onRemove;return s.a.createElement(da.a,{style:{overflowY:"scroll",maxHeight:"350px"}},t.map((function(e){return s.a.createElement(pa,{key:e,onRemove:function(){return n(e)},address:e})})),s.a.createElement(ba,{onAdd:a,isValid:function(e){return va(e,t)},upstreams:t}))},ya=function(e){var t=e.settings,a=e.onUpdate,n=e.isRouterIpValid,o=e.isCidrValid,i=e.isDomainValid,l=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.enabled,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{enabled:e.target.checked}))}}),l("Enabled"))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"routerIP",sm:5},l("Router IP")),s.a.createElement(oa.a,{sm:7},s.a.createElement(sa.a,{id:"routerIP",disabled:!t.enabled,value:t.ip,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{ip:e.target.value}))},invalid:!n}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"cidr",sm:5},l("Prefix length (CIDR)")),s.a.createElement(oa.a,{sm:7},s.a.createElement(sa.a,{id:"cidr",disabled:!t.enabled,value:-1===t.cidr?"":t.cidr,invalid:!o,onChange:function(e){var n=parseInt(e.target.value);if(0===e.target.value.length)n=-1;else if(isNaN(n))return;a(Object(F.a)(Object(F.a)({},t),{},{cidr:n}))}}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"localDomain",sm:5},l("Local Domain Name")),s.a.createElement(oa.a,{sm:7},s.a.createElement(sa.a,{id:"localDomain",disabled:!t.enabled,value:t.domain,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{domain:e.target.value}))},invalid:!i}))))},ka=function(e){var t=e.settings,a=e.onUpdate,n=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"listeningBehavior",sm:5},n("Interface listening behavior")),s.a.createElement(oa.a,{sm:7},s.a.createElement(sa.a,{id:"listeningBehavior",type:"select",value:t.listeningType,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{listeningType:e.target.value}))}},s.a.createElement("option",null,"all"),s.a.createElement("option",null,"local"),s.a.createElement("option",null,"single")))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.fqdnRequired,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{fqdnRequired:e.target.checked}))}}),n("Forward FQDNs only"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.bogusPriv,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{bogusPriv:e.target.checked}))}}),n("Only forward public reverse lookups"))),s.a.createElement(na.a,{check:!0},s.a.createElement(ra.a,{check:!0},s.a.createElement(sa.a,{type:"checkbox",checked:t.dnssec,onChange:function(e){return a(Object(F.a)(Object(F.a)({},t),{},{dnssec:e.target.checked}))}}),n("Use DNSSEC"))))},Oa=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,upstreamDns:[],conditionalForwarding:{enabled:!1,ip:"",domain:"",cidr:24},options:{fqdnRequired:!1,bogusPriv:!1,dnssec:!1,listeningType:"single"}},e.loadHandler=void 0,e.updateHandler=void 0,e.loadDNSInfo=function(){e.loadHandler=ne(Q.getDNSInfo()),e.loadHandler.promise.then((function(t){var a=t.conditional_forwarding.domain,n=0===a.length?"lan":a;e.setState({upstreamDns:t.upstream_dns,conditionalForwarding:Object(F.a)(Object(F.a)({},t.conditional_forwarding),{},{domain:n}),options:{fqdnRequired:t.options.fqdn_required,bogusPriv:t.options.bogus_priv,dnssec:t.options.dnssec,listeningType:t.options.listening_type}})})).catch(re)},e.handleUpstreamAdd=function(t){e.setState((function(e){return{upstreamDns:e.upstreamDns.concat(t)}}))},e.handleUpstreamRemove=function(t){e.setState((function(e){return{upstreamDns:e.upstreamDns.filter((function(e){return e!==t}))}}))},e.handleConditionalForwardingUpdate=function(t){e.setState({conditionalForwarding:t})},e.handleDnsOptionsUpdate=function(t){e.setState({options:t})},e.saveSettings=function(t){t.preventDefault();var a=e.props.t;e.setState({alertMessage:a("Processing..."),alertType:"info",showAlert:!0,processing:!0}),e.updateHandler=ne(Q.updateDNSInfo({upstream_dns:e.state.upstreamDns,conditional_forwarding:e.state.conditionalForwarding,options:{fqdn_required:e.state.options.fqdnRequired,bogus_priv:e.state.options.bogusPriv,dnssec:e.state.options.dnssec,listening_type:e.state.options.listeningType}})),e.updateHandler.promise.then((function(){e.setState({alertMessage:a("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})})).catch(re).catch((function(t){var n="";n=t instanceof Error?t.message:a("API Error: {{error}}",{error:a(t.key,t.data)}),e.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})}))},e.isCFSettingValid=function(t,a){return!e.state.conditionalForwarding.enabled&&0===t.length||a(t)},e.hideAlert=function(){e.setState({showAlert:!1})},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadDNSInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isCFSettingValid(this.state.conditionalForwarding.ip,(function(e){return Ut(e)||function(e){return/^[a-fA-F0-9:]+$/.test(e)}(e)})),a=this.isCFSettingValid(this.state.conditionalForwarding.cidr.toString(),(function(e){return function(e){return["8","16","24","32"].includes(e)}(e)||function(e){var t=parseInt(e);return!isNaN(t)&&t>0&&t<=128&&t%4===0}(e)})),n=this.isCFSettingValid(this.state.conditionalForwarding.domain,Mt),r=this.state.showAlert?s.a.createElement(_t,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},r,s.a.createElement(na.a,{row:!0},s.a.createElement(oa.a,{sm:6},s.a.createElement("h3",null,e("Upstream DNS Servers")),s.a.createElement(Ea,{onAdd:this.handleUpstreamAdd,onRemove:this.handleUpstreamRemove,upstreams:this.state.upstreamDns})),s.a.createElement(oa.a,{sm:6},s.a.createElement("h3",null,e("Conditional Forwarding")),s.a.createElement(ya,{settings:this.state.conditionalForwarding,onUpdate:this.handleConditionalForwardingUpdate,isRouterIpValid:t,isCidrValid:a,isDomainValid:n,t:e}),s.a.createElement("h3",null,e("DNS Options")),s.a.createElement(ka,{settings:this.state.options,onUpdate:this.handleDnsOptionsUpdate,t:e}))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!t||!a||!n},e("Apply")))}}]),a}(r.Component),wa=Object(b.a)(["common","settings"])(Oa),Ca=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={cache_size:0,cache_evicted:0,cache_inserted:0},e.loadHandler=void 0,e.loadCacheInfo=function(){e.loadHandler=ne(Q.getCacheInfo()),e.loadHandler.promise.then((function(t){e.setState({cache_size:t.cache_size,cache_evicted:t.cache_evicted,cache_inserted:t.cache_inserted})})).catch(re)},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadCacheInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_size",sm:4},e("DNS cache size")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_size",value:this.state.cache_size.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_evicted",sm:4},e("DNS cache evictions")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_evicted",value:this.state.cache_evicted.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"cache_inserted",sm:4},e("DNS cache insertions")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"cache_inserted",value:this.state.cache_inserted.toLocaleString()}))))}}]),a}(r.Component),ja=Object(b.a)(["settings"])(Ca),Na=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e.loadHandler=void 0,e.loadNetworkInfo=function(){e.loadHandler=ne(Q.getNetworkInfo()),e.loadHandler.promise.then((function(t){e.setState({interface:t.interface,ipv4Address:t.ipv4_address,ipv6Address:t.ipv6_address,hostname:t.hostname})})).catch(re)},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadNetworkInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"interface",sm:4},e("Interface")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"interface",value:this.state.interface}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"ipv4_address",sm:4},e("IPv4 address")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"ipv4_address",value:this.state.ipv4Address}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"ipv6_address",sm:4},e("IPv6 address")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"ipv6_address",value:this.state.ipv6Address}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"hostname",sm:4},e("Hostname")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"hostname",value:this.state.hostname}))))}}]),a}(r.Component),Sa=Object(b.a)(["common","settings"])(Na),xa=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={fileSize:0,queries:0,sqliteVersion:""},e.loadHandler=void 0,e.loadFTLInfo=function(){e.loadHandler=ne(Q.getFTLdb()),e.loadHandler.promise.then((function(t){e.setState({fileSize:t.filesize,queries:t.queries,sqliteVersion:t.sqlite_version})})).catch(re)},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){this.loadFTLInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t;return s.a.createElement(aa.a,null,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"queries",sm:4},e("Queries")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"queries",value:this.state.queries.toLocaleString()}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"filesize",sm:4},e("Filesize")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"filesize",value:"".concat(this.state.fileSize.toLocaleString()," B")}))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{className:"font-weight-bold",for:"sqliteversion",sm:4},e("SQLite version")),s.a.createElement(oa.a,{sm:8},s.a.createElement(sa.a,{plaintext:!0,readOnly:!0,id:"sqliteversion",value:this.state.sqliteVersion}))))}}]),a}(r.Component),Ia=Object(b.a)(["settings"])(xa),Da=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeTab:"network"},e.setTab=function(t){e.state.activeTab!==t&&e.setState({activeTab:t})},e.tab=function(t,a){return s.a.createElement(Y.a,null,s.a.createElement($t.a,{active:e.state.activeTab===t,onClick:function(){return e.setTab(t)}},a))},e.tabContent=function(e,t){return s.a.createElement(ea.a,{tabId:e},t)},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(X.a,{tabs:!0},this.tab("network",e("Network")),this.tab("dhcp",e("DHCP")),this.tab("dns",e("DNS")),this.tab("ftl",e("FTL")),this.tab("cache",e("Cache"))),s.a.createElement(ta.a,{activeTab:this.state.activeTab},this.tabContent("network",s.a.createElement(Sa,null)),this.tabContent("dhcp",s.a.createElement(ua,null)),this.tabContent("dns",s.a.createElement(wa,null)),this.tabContent("ftl",s.a.createElement(Ia,null)),this.tabContent("cache",s.a.createElement(ja,null))))}}]),a}(r.Component),Aa=Object(b.a)(["common","settings"])(Da),Ha=a(203),Ra=a.n(Ha),_a=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0},e.onClick=function(){e.setState((function(e){return{collapsed:!e.collapsed}}))},e.isExpanded=function(){return e.props.error||!e.state.collapsed},e}return Object($.a)(a,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"w-100"},s.a.createElement("div",{className:"card mb-0 "+(this.props.error?"border-danger":"border-white")},s.a.createElement("div",{className:this.props.error?"bg-danger":"bg-white pr-0"},s.a.createElement("span",{className:this.props.error?"float-left":"float-right"},s.a.createElement("button",{type:"button",className:"pr-0 "+(this.props.error?"btn disabled":"btn btn-link"),onClick:this.onClick},e("Forgot Password")))),s.a.createElement("div",{className:"card-body bg-white "+(this.isExpanded()?"":" collapse ")+(this.props.error?"p12":"p-0")},e("forgot_password_description"),s.a.createElement("pre",null,s.a.createElement("code",null,"sudo pihole -a -p")))))}}]),a}(r.Component),Ta=Object(b.a)("login")(_a),Pa=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={password:"",error:!1,cookiesEnabled:!1},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.authenticate=function(t){t&&t.preventDefault();var a=Ra()("sha256").update(e.state.password).digest("hex");a=Ra()("sha256").update(a).digest("hex"),e.setState({password:"",error:!1}),Q.authenticate(a).then((function(){Q.loggedIn=!0,z.fakeAPI&&(document.cookie="user_id=;");var t=e.props.location.state||{from:{pathname:"/"}};e.props.history.push(t.from.pathname)})).catch((function(){return e.setState({error:!0})}))},e}return Object($.a)(a,[{key:"componentDidMount",value:function(){navigator.cookieEnabled&&this.setState({cookiesEnabled:!0})}},{key:"render",value:function(){if(Q.loggedIn)return s.a.createElement(c.a,{to:"/"});var e=this.props.t;return s.a.createElement("div",{className:"mainbox col-md-8 offset-md-2 col-lg-6 offset-lg-3 float-none"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{src:K.a,alt:"Logo",width:"30%"})),s.a.createElement("br",null),s.a.createElement("div",{className:"card-title text-center mb-0"},s.a.createElement("span",{className:"logo-lg",style:{fontSize:"25px"}},"Pi-",s.a.createElement("b",null,"hole"))),s.a.createElement("div",{className:"m-0 text-center pt-0 pr-3 pb-3 pl-3"},e("Sign in to start your session"),this.props.location.state&&this.props.location.state.from.pathname in an(e)?s.a.createElement(r.Fragment,null,s.a.createElement("br",null),e('You will be transferred to the "{{page}}" page',{page:an(e)[this.props.location.state.from.pathname]})):null,this.state.cookiesEnabled?null:s.a.createElement("div",{className:"text-center text-danger"},e("Verify that cookies are allowed for {{host}}",{host:window.location.host}))),this.state.error?s.a.createElement("div",{className:"form-group has-error m-0 text-center pt-0 pr-3 pb-3 pl-3"},s.a.createElement("label",{className:"control-label"},s.a.createElement("i",{className:"fa fa-times-circle-o"})," ",e("Wrong Password!"))):null),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{id:"loginform",onSubmit:this.authenticate},s.a.createElement("div",{className:"input-group"+(this.state.error?" has-error":"")},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.handlePasswordChange,placeholder:e("Password"),autoFocus:!0})),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block"},e("Log in")),s.a.createElement("br",null),s.a.createElement(Ta,{error:this.state.error})))))}}]),a}(r.Component),Fa=Object(b.a)(["login","location"])(Pa),Ma=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object($.a)(a,[{key:"componentDidMount",value:function(){Q.loggedIn=!1,z.fakeAPI?document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;":Q.logout()}},{key:"render",value:function(){return s.a.createElement(c.a,{to:"/"})}}]),a}(r.Component),La=function(e){var t=e.name,a=e.icon,n=e.onClick;return s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n(e)},className:"nav-link"},s.a.createElement("i",{className:"nav-icon "+a}),t))};La.defaultProps={onClick:function(){}};var Ba=La,Ua=a(669),qa=a(665),za=a(666),Qa=a(667),Va=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={processing:!1,customModalShown:!1,customTime:60,customMultiplier:60},e.updateHandler=void 0,e.getStatusFromAction=function(e){switch(e){case"enable":return"enabled";case"disable":return"disabled"}},e.setStatus=function(t,a){e.state.processing||(e.toggleProcessing(),e.updateHandler=ne(e.props.onSetStatus(t,a)),e.updateHandler.promise.then((function(){return e.props.refresh({status:e.getStatusFromAction(t)})})).then(e.toggleProcessing).catch((function(t){t.isCanceled||e.toggleProcessing()})))},e.toggleModal=function(){e.setState((function(e){return{customModalShown:!e.customModalShown}}))},e.toggleProcessing=function(){e.setState((function(e){return{processing:!e.processing}}))},e.submitCustom=function(t){t.preventDefault(),e.setState({customModalShown:!1}),e.setStatus("disable",e.state.customTime*e.state.customMultiplier)},e.renderModal=function(){var t=e.props.t;return s.a.createElement(Ua.a,{isOpen:e.state.customModalShown,toggle:e.toggleModal,style:{maxWidth:"300px"}},s.a.createElement(aa.a,{onSubmit:e.submitCustom},s.a.createElement(qa.a,{toggle:e.toggleModal},t("Custom time")),s.a.createElement(za.a,null,s.a.createElement(ia.a,null,s.a.createElement(sa.a,{type:"number",value:e.state.customTime,onChange:function(t){return e.setState({customTime:parseInt(t.target.value)})}}),s.a.createElement(la.a,{addonType:"append"},s.a.createElement(sa.a,{type:"select",value:e.state.customMultiplier,onChange:function(t){return e.setState({customMultiplier:parseInt(t.target.value)})}},s.a.createElement("option",{value:1},t("Seconds")),s.a.createElement("option",{value:60},t("Minutes")))))),s.a.createElement(Qa.a,null,s.a.createElement(m.a,{type:"submit"},t("Apply")),s.a.createElement(m.a,{onClick:e.toggleModal},t("Cancel")))))},e}return Object($.a)(a,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props,a=t.t;switch(t.status){case"enabled":return s.a.createElement(he,{name:a("Disable"),icon:"fa fa-stop",isOpen:!1},s.a.createElement(Ba,{name:a("Permanently"),icon:"fa fa-stop",onClick:function(){return e.setStatus("disable")}}),s.a.createElement(Ba,{name:a("For {{time}} seconds",{time:10}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",10)}}),s.a.createElement(Ba,{name:a("For {{time}} seconds",{time:30}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",30)}}),s.a.createElement(Ba,{name:a("For {{time}} minutes",{time:5}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",300)}}),s.a.createElement(Ba,{name:a("Custom time"),icon:"fa fa-clock",onClick:this.toggleModal}),this.renderModal());case"disabled":return s.a.createElement(Ba,{name:a("Enable"),icon:"fa fa-play",onClick:function(){return e.setStatus("enable")}});case"unknown":default:return null}}}]),a}(r.Component),Wa=Object(b.a)("common")(Va),Ga=a(157),Ja=a(82),Ya=Object(Ja.b)("PREFERENCES_REQUEST"),Xa=Object(Ja.b)("PREFERENCES_SUCCESS"),Za=a(158),Ka=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,translateMessage:!0,error:null,settings:e.props.settings},e.updateHandler=void 0,e.onChange=function(t,a){return function(n){var r=n.target[a];e.setState((function(e){return{settings:Object(F.a)(Object(F.a)({},e.settings),{},Object(v.a)({},t,r))}}))}},e.saveSettings=function(t){t.preventDefault(),e.setState({alertMessage:"Processing...",error:null,alertType:"info",showAlert:!0,processing:!0,translateMessage:!0});var a=z.fakeAPI?Promise.resolve({status:"success"}):Q.updatePreferences(e.state.settings);e.updateHandler=ne(a),e.updateHandler.promise.then((function(){e.setState({alertMessage:"Successfully saved preferences",alertType:"success",showAlert:!0,processing:!1,translateMessage:!0}),e.props.onUpdate(e.state.settings)})).catch(re).catch((function(t){var a="",n=null,r=!0;t instanceof Error?(a=t.message,r=!1):(a="API Error: {{error}}",n=t),e.setState({alertMessage:a,error:n,alertType:"danger",showAlert:!0,processing:!1,translateMessage:r})}))},e.hideAlert=function(){e.setState({showAlert:!1})},e.getAlertMessage=function(){var t=e.props.t;return e.state.error?t(e.state.alertMessage,{error:t(e.state.error.key,e.state.error.data)}):e.state.translateMessage?t(e.state.alertMessage):e.state.alertMessage},e}return Object($.a)(a,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.state.showAlert?s.a.createElement(_t,{message:this.getAlertMessage(),type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(aa.a,{onSubmit:this.saveSettings},t,s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"layout",sm:2},e("Layout")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"layout",type:"select",value:this.state.settings.layout,onChange:this.onChange("layout","value")},s.a.createElement("option",{value:"boxed"},e("Boxed")),s.a.createElement("option",{value:"traditional"},e("Full"))))),s.a.createElement(na.a,{row:!0},s.a.createElement(ra.a,{for:"language",sm:2},e("Language")),s.a.createElement(oa.a,{sm:10},s.a.createElement(sa.a,{id:"language",type:"select",value:this.state.settings.language,onChange:this.onChange("language","value")},Ga.map((function(e){return s.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing},e("Apply")))}}]),a}(r.Component),$a=Object(b.a)(["common","settings","api-errors","preferences"])(Ka),en={onUpdate:Xa},tn=Object(Za.b)((function(e){return{settings:e.preferences}}),en)($a),an=function(e){return{"/dashboard":e("Dashboard"),"/query-log":e("Query Log"),"/whitelist/exact":"".concat(e("Whitelist")," (").concat(e("Exact"),")"),"/whitelist/regex":"".concat(e("Whitelist")," (").concat(e("Regex"),")"),"/blacklist/exact":"".concat(e("Blacklist")," (").concat(e("Exact"),")"),"/blacklist/regex":"".concat(e("Blacklist")," (").concat(e("Regex"),")"),"/settings/versions":e("Versions"),"/settings/networking":e("Networking"),"/settings/preferences":e("Preferences"),"/login":e("Login"),"/logout":e("Logout")}},nn=[{name:"Dashboard",url:"/dashboard",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},Q.loggedIn?s.a.createElement("div",{className:"dashboard-time-selector"},s.a.createElement(T,{size:"md"})):null,s.a.createElement("div",{className:"row"},s.a.createElement(Ie,null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(Pe,null))),Q.loggedIn?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(qe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Je,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Xe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(at,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ot,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ut,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ht,null)))):null)},icon:"fa fa-tachometer-alt",auth:!1},{name:"Query Log",url:"/query-log",component:Dt,icon:"fa fa-database",auth:!0},{name:"Whitelist",url:"/whitelist",icon:"far fa-check-circle",auth:!0,children:[{name:"Exact whitelist",url:"/whitelist/exact",component:qt,icon:"fa fa-check-circle",auth:!0},{name:"Regex whitelist",url:"/whitelist/regex",component:Qt,icon:"fa fa-check-circle",auth:!0}]},{name:"Blacklist",url:"/blacklist",icon:"fa fa-ban",auth:!0,children:[{name:"Exact blacklist",url:"/blacklist/exact",component:zt,icon:"fa fa-ban",auth:!0},{name:"Regex blacklist",url:"/blacklist/regex",component:Vt,icon:"fa fa-ban",auth:!0}]},{customComponent:function(){return s.a.createElement(ce.Consumer,null,(function(e){var t=e.status,a=e.refresh;return s.a.createElement(Wa,{status:t,refresh:a,onSetStatus:Q.setStatus})}))},fakeRoute:!0,auth:!0},{name:"Settings",url:"/settings",icon:"fa fa-wrench",auth:!0,children:[{name:"Versions",url:"/settings/versions",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"container-flex"},s.a.createElement(Kt,null)))},icon:"fa fa-download",auth:!0},{name:"Networking",url:"/settings/networking",component:Aa,icon:"fa fa-sitemap",auth:!0},{name:"Preferences",url:"/settings/preferences",component:function(){return s.a.createElement(tn,null)},icon:"fa fa-sliders-h",auth:!0}]},{name:"Login",url:"/login",component:Fa,icon:"fa fa-user",auth:!1,authStrict:!0},{name:"Logout",url:"/logout",component:Ma,icon:"fa fa-user-times",auth:!0,authStrict:!0}],rn=function(e){var t=e.children;return s.a.createElement(ue,null,s.a.createElement(g,null,t))},sn=function e(t){if(!t.fakeRoute){if(t.children)return t.children.map(e);var a=t;return a.auth?s.a.createElement(on,{key:a.url,path:a.url,component:a.component}):s.a.createElement(c.b,{key:a.url,path:a.url,component:a.component})}},on=function(e){var t=e.component;return s.a.createElement(c.b,{path:e.path,render:function(e){return Q.loggedIn?s.a.createElement(t,e):s.a.createElement(c.a,{to:{pathname:"/login",state:{from:e.location}}})}})},ln=a(304),cn=a(305),un=a(104);var dn=a(308),mn={layout:"boxed",language:"en"},pn={preferences:function(){var e=localStorage.getItem("webPreferences");if(null===e)return mn;try{return JSON.parse(e)}catch(t){return mn}}()},hn=Object(Ja.c)(pn,Object(v.a)({},Xa.type,(function(e,t){return e.preferences=t.payload,e}))),fn=a(38),gn=a.n(fn),bn=a(34),vn=gn.a.mark(En);function En(e){var t;return gn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload.language,gt.a.language===t){a.next=4;break}return a.next=4,Object(bn.a)([gt.a,"changeLanguage"],t);case 4:case"end":return a.stop()}}),vn)}var yn=gn.a.mark(kn);function kn(e){return gn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.payload.layout,t.next="boxed"===t.t0?3:"traditional"===t.t0?8:13;break;case 3:return t.next=5,Object(bn.a)([document.body.classList,"add"],"boxcontainer");case 5:return t.next=7,Object(bn.a)([document.body.classList,"add"],"background-image");case 7:return t.abrupt("break",13);case 8:return t.next=10,Object(bn.a)([document.body.classList,"remove"],"boxcontainer");case 10:return t.next=12,Object(bn.a)([document.body.classList,"remove"],"background-image");case 12:return t.abrupt("break",13);case 13:case"end":return t.stop()}}),yn)}var On=gn.a.mark(jn),wn=gn.a.mark(Nn),Cn=gn.a.mark(Sn);function jn(){return gn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bn.e)(Ya.type,Nn);case 2:return e.next=4,Object(bn.e)(Xa.type,Sn);case 4:return e.next=6,Object(bn.e)(Xa.type,En);case 6:return e.next=8,Object(bn.e)(Xa.type,kn);case 8:return e.next=10,Object(bn.b)(Ya());case 10:case"end":return e.stop()}}),On)}function Nn(){var e;return gn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z.fakeAPI){t.next=6;break}return t.next=3,Object(bn.c)((function(e){return e.preferences}));case 3:e=t.sent,t.next=9;break;case 6:return t.next=8,Object(bn.a)(Q.getPreferences);case 8:e=t.sent;case 9:return t.next=11,Object(bn.b)(Xa(e));case 11:case"end":return t.stop()}}),wn)}function Sn(e){return gn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(bn.a)([localStorage,"setItem"],"webPreferences",JSON.stringify(e.payload));case 2:case"end":return t.stop()}}),Cn)}var xn=gn.a.mark(In);function In(){return gn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(bn.a)(Q.checkAuthStatus);case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),"unauthorized"!==e.t0.key){e.next=9;break}return e.abrupt("return");case 9:throw e.t0;case 10:if(Q.loggedIn){e.next=14;break}return z.fakeAPI&&(document.cookie="user_id=;"),e.next=14,Object(bn.a)([window.location,"reload"]);case 14:case"end":return e.stop()}}),xn,null,[[0,5]])}var Dn=gn.a.mark(An);function An(){return gn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bn.d)(jn);case 2:return e.next=4,Object(bn.d)(In);case 4:case"end":return e.stop()}}),Dn)}var Hn=Object(dn.a)(),Rn=[Hn].concat(Object(ze.a)(Object(Ja.d)({thunk:!1}))),_n=Object(Ja.a)({reducer:hn,middleware:Rn});_n.runSaga=function(){Hn.run(An)};var Tn,Pn=_n;Q.loggedIn=document.cookie.includes("user_id="),gt.a.use(ln.a).use(cn.a).use(un.f).init({fallbackLng:"en",whitelist:Ga.map((function(e){return e.code})),ns:["common"],defaultNS:"common",fallbackNS:["dashboard","footer","lists","location","login","query-log","settings","api-errors","preferences","time-ranges"],nsSeparator:!1,keySeparator:!1,returnEmptyString:!1,debug:z.developmentMode,interpolation:{escapeValue:!1},backend:{loadPath:"/pihole-web/i18n/{{lng}}/{{ns}}.json",ajax:Tn}}),Pn.runSaga(),o.render(r.createElement(Za.a,{store:Pn},r.createElement(l.a,{basename:function(){var e=document.getElementsByTagName("base")[0];return e?new URL(e.href).pathname:"/pihole-web"}()},r.createElement(c.d,null,r.createElement(c.b,{path:"/",name:"Home",component:function(e){return s.a.createElement("div",{className:"app"},s.a.createElement(rn,null,s.a.createElement(J,null),s.a.createElement("div",{className:"app-body"},s.a.createElement(ye,Object.assign({items:nn},e)),s.a.createElement("main",{className:"main",onClick:G},s.a.createElement("div",{className:"container-fluid mt-4"},s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(c.d,null,s.a.createElement(c.a,{exact:!0,from:"/",to:"/dashboard"}),nn.map(sn)))))),s.a.createElement(Ce,null)))}})))),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.6ea2deed.chunk.js.map