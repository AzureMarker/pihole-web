(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){e.exports=a(368)},168:function(e,t,a){},368:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),l=a(21),i=a.n(l),o=a(27),c=a(33),u=(a(164),a(165),a(166),a(167),a(168),a(148)),d=a.n(u),m=a(369),p=a(71),h={range:null,update:function(){}},f=s.a.createContext(h),g=function(e){var t=e.children,a=Object(r.useState)(h.range),n=Object(p.a)(a,2),l=n[0],i=n[1];return s.a.createElement(f.Provider,{value:{range:l,update:i}},t)},b=(a(99),a(4)),v=a(19),E=a(13),y=a.n(E),k=y()(),O=y()().subtract(1,"day"),C=y()().startOf("day"),w=y()().subtract(1,"days").startOf("day"),j=y()().subtract(1,"days").endOf("day"),N=y()().subtract(7,"days"),S=y()().subtract(30,"days"),x=y()().startOf("month"),I=y()().subtract(1,"month").startOf("month"),A=y()().subtract(1,"month").endOf("month"),D=y()().startOf("year"),T=y()(0),H=function(e){var t;return t={},Object(v.a)(t,e("Last 24 Hours"),[O,k]),Object(v.a)(t,e("Today"),[C,k]),Object(v.a)(t,e("Yesterday"),[w,j]),Object(v.a)(t,e("Last 7 Days"),[N,k]),Object(v.a)(t,e("Last 30 Days"),[S,k]),Object(v.a)(t,e("This Month"),[x,k]),Object(v.a)(t,e("Last Month"),[I,A]),Object(v.a)(t,e("This Year"),[D,k]),Object(v.a)(t,e("All Time"),[T,k]),t},P=Object(b.b)("time-ranges")(function(e){var t=e.range,a=e.onSelect,n=e.t,l=H(n),i=n("Last 24 Hours"),o=n("Today"),c=function(e){var t=e.t;return e.showLabel?e.range?"Custom Range"===e.range.name?e.range.from.toDate().toLocaleString()+" - "+e.range.until.toDate().toLocaleString():e.range.name:t("Last 24 Hours"):null}(e),u=e.size?e.size:"sm";return s.a.createElement(d.a,{startDate:t?t.from:l[i][0],endDate:t?t.until:l[i][1],maxDate:l[o][1],onApply:function(e,t){t.startDate.isSame(l[i][0])&&t.endDate.isSame(l[i][1])?a(null):a({from:t.startDate,until:t.endDate,name:t.chosenLabel})},timePicker:!0,showDropdowns:!0,ranges:l},s.a.createElement(m.a,{color:"light",size:u},s.a.createElement("i",{className:"far fa-clock fa-lg"}),c?s.a.createElement(r.Fragment,null,"\xa0 \xa0",c):null))}),R=function(e){var t=e.size;return s.a.createElement(f.Consumer,null,function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(P,{range:e.range,onSelect:e.update,showLabel:!0,size:t}))})},_=a(5),M=a(14),F=function(e){return V.loggedIn&&401===e.status?(document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload(),Promise.reject({isCanceled:!0})):Promise.resolve(e)},L=function(e){return e.isCanceled||e instanceof Error?Promise.reject(e):e.json()},B=function(e){return e.error?Promise.reject(e.error):Promise.resolve(e)},q=function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},U=function(e){return q({from:e.from.unix(),until:e.until.unix()})};(n={developmentMode:!1,fakeAPI:!1,apiPath:"/api"}).fakeAPI=!0,n.apiPath="/fakeAPI";var Q=n,V=new function e(t){var a=this;Object(_.a)(this,e),this.http=t,this.loggedIn=!1,this.authenticate=function(e){return a.http.get("auth",{headers:{"X-Pi-hole-Authenticate":e}})},this.logout=function(){return a.http.delete("auth")},this.getSummary=function(){return a.http.get("stats/summary")},this.getSummaryDb=function(e){return a.http.get("stats/database/summary?"+U(e))},this.getHistoryGraph=function(){return a.http.get("stats/overTime/history")},this.getHistoryGraphDb=function(e,t){return a.http.get("stats/database/overTime/history?interval="+t+"&"+U(e))},this.getClientsGraph=function(){return a.http.get("stats/overTime/clients")},this.getClientsGraphDb=function(e,t){return a.http.get("stats/database/overTime/clients?interval="+t+"&"+U(e))},this.getQueryTypes=function(){return a.http.get("stats/query_types")},this.getQueryTypesDb=function(e){return a.http.get("stats/database/query_types?"+U(e))},this.getUpstreams=function(){return a.http.get("stats/upstreams")},this.getUpstreamsDb=function(e){return a.http.get("stats/database/upstreams?"+U(e))},this.getTopDomains=function(){return a.http.get("stats/top_domains")},this.getTopDomainsDb=function(e){return a.http.get("stats/database/top_domains?"+U(e))},this.getTopBlockedDomains=function(){var e=a.http.config.fakeAPI?"stats/top_blocked":"stats/top_domains?blocked=true";return a.http.get(e)},this.getTopBlockedDomainsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked?":"stats/database/top_domains?blocked=true&";return a.http.get(t+U(e))},this.getTopClients=function(){return a.http.get("stats/top_clients")},this.getTopClientsDb=function(e){return a.http.get("stats/database/top_clients?"+U(e))},this.getTopBlockedClients=function(){var e=a.http.config.fakeAPI?"stats/top_blocked_clients":"stats/top_clients?blocked=true";return a.http.get(e)},this.getTopBlockedClientsDb=function(e){var t=a.http.config.fakeAPI?"stats/database/top_blocked_clients?":"stats/database/top_clients?blocked=true&";return a.http.get(t+U(e))},this.getHistory=function(e){return a.http.get("stats/history?"+q(e))},this.getWhitelist=function(){return a.http.get("dns/whitelist")},this.getBlacklist=function(){return a.http.get("dns/blacklist")},this.getRegexlist=function(){return a.http.get("dns/regexlist")},this.addWhitelist=function(e){return a.http.post("dns/whitelist",{domain:e})},this.addBlacklist=function(e){return a.http.post("dns/blacklist",{domain:e})},this.addRegexlist=function(e){return a.http.post("dns/regexlist",{domain:e})},this.removeWhitelist=function(e){return a.http.delete("dns/whitelist/"+e)},this.removeBlacklist=function(e){return a.http.delete("dns/blacklist/"+e)},this.removeRegexlist=function(e){return a.http.delete("dns/regexlist/"+encodeURIComponent(e))},this.getStatus=function(){return a.http.get("dns/status")},this.setStatus=function(e,t){return a.http.post("dns/status",{action:e,time:t})},this.getNetworkInfo=function(){return a.http.get("settings/network")},this.getVersion=function(){return a.http.get("version")},this.getFTLdb=function(){return a.http.get("settings/ftldb")},this.getDNSInfo=function(){return a.http.get("settings/dns")},this.getDHCPInfo=function(){return a.http.get("settings/dhcp")},this.updateDHCPInfo=function(e){return a.http.put("settings/dhcp",e)},this.updateDNSInfo=function(e){return a.http.put("settings/dns",e)},this.getPreferences=function(){return a.http.get("settings/web")},this.updatePreferences=function(e){return a.http.put("settings/web",e)}}(new function e(t){var a=this;Object(_.a)(this,e),this.config=t,this.handleResponse=function(e){return F(e).then(L).then(B)},this.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(a.urlFor(e),Object(M.a)({method:"GET",credentials:a.credentialType()},t)).then(a.handleResponse)},this.post=function(e,t){return fetch(a.urlFor(e),{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.put=function(e,t){return fetch(a.urlFor(e),{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),credentials:a.credentialType()}).then(a.handleResponse)},this.delete=function(e){return fetch(a.urlFor(e),{method:"DELETE",credentials:a.credentialType()}).then(a.handleResponse)},this.urlFor=function(e){return a.config.apiPath+"/"+e},this.credentialType=function(){return a.config.developmentMode?"include":"same-origin"}}(Q)),z=function(e){e.preventDefault(),document.body.classList.toggle("sidebar-minimized"),document.body.classList.toggle("brand-minimized")},W=function(){document.body.classList.toggle("sidebar-show")},G=function(){document.body.classList.remove("sidebar-show")},J=function(){return s.a.createElement("header",{className:"app-header navbar"},s.a.createElement("button",{className:"navbar-toggler d-lg-none",style:{marginLeft:"16px"},onClick:W,type:"button"},"\u2630"),s.a.createElement(o.b,{to:"/dashboard",className:"navbar-brand",style:{textAlign:"center"}},s.a.createElement("span",{style:{color:"white",lineHeight:"40px"}},s.a.createElement("span",{className:"navbar-brand-full"},"Pi-",s.a.createElement("b",null,"hole")),s.a.createElement("span",{className:"navbar-brand-minimized"},"P",s.a.createElement("b",null,"h")))),s.a.createElement("ul",{className:"nav navbar-nav d-md-down-none mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("button",{className:"nav-link navbar-toggler sidebar-toggler",type:"button",onClick:z},"\u2630")),V.loggedIn&&window.location.pathname.endsWith("/dashboard")?s.a.createElement("li",null,s.a.createElement(R,null)):null))},Y=a(370),X=a(371),Z=a(66),$=a.n(Z),K=a(6),ee=a(8),te=a(7),ae=a(9),ne=a(18);function re(e,t){var a=!1,n=null,r=function(e,r,s,l){a?r({isCanceled:!0}):(l?r(s):e(s),t&&(n=setTimeout(t.repeat,t.interval)))};return{promise:new Promise(function(t,a){e.then(function(e){return r(t,a,e,!1)},function(e){return r(t,a,e,!0)})}),cancel:function(){null!==n&&clearTimeout(n),a=!0}}}var se=function(e){if(!e.isCanceled)throw e},le=function(){function e(t){Object(_.a)(this,e),this.value=t}return Object(K.a)(e,[{key:"isErr",value:function(){return!1}},{key:"isOk",value:function(){return!0}},{key:"unwrap",value:function(){return this.value}},{key:"unwrapErr",value:function(){throw Error("unwrapErr on a Result.Ok")}}]),e}(),ie=function(){function e(t){Object(_.a)(this,e),this.err=t}return Object(K.a)(e,[{key:"isErr",value:function(){return!0}},{key:"isOk",value:function(){return!1}},{key:"unwrap",value:function(){throw Error("unwrap on a Result.Err")}},{key:"unwrapErr",value:function(){return this.err}}]),e}(),oe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={apiResult:null},a.dataHandle=void 0,a.loadData=function(e){var t=0!==a.props.repeatOptions.interval?{repeat:a.loadData,interval:a.props.repeatOptions.interval}:void 0;if(a.dataHandle&&a.dataHandle.cancel(),e)return a.setState({apiResult:new le(e)}),void(t&&setTimeout(function(){return a.loadData()},t.interval));a.dataHandle=re(a.props.apiCall(),t),a.dataHandle.promise.then(function(e){a.setState({apiResult:new le(e)})}).catch(function(e){if(!a.props.repeatOptions.ignoreCancel)throw e;se(e)}).catch(function(e){a.setState({apiResult:new ie(e)})})},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.dataHandle&&this.dataHandle.cancel()}},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.props.flushOnUpdate&&(this.setState({apiResult:null}),this.loadData())}},{key:"render",value:function(){return this.state.apiResult?this.state.apiResult.isOk()?this.props.renderOk(this.state.apiResult.unwrap(),this.loadData):this.props.renderErr(this.state.apiResult.unwrapErr(),this.loadData):this.props.renderInitial()}}]),t}(r.Component);oe.defaultProps={repeatOptions:{ignoreCancel:!0,interval:0},flushOnUpdate:!0};var ce={status:"unknown",refresh:function(){}},ue=s.a.createContext(ce),de=function(e){var t=e.children,a=Object(ne.a)(e,["children"]);return s.a.createElement(oe,{apiCall:V.getStatus,repeatOptions:{interval:5e3,ignoreCancel:!0},flushOnUpdate:!1,renderInitial:function(){return s.a.createElement(ue.Provider,Object.assign({value:ce},a),t)},renderOk:function(e,n){return s.a.createElement(ue.Provider,Object.assign({value:{status:e.status,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(ue.Provider,Object.assign({value:{status:ce.status,refresh:n}},a),t)}})},me=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).isEnabled=function(){return"enabled"===a.props.status},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-"+(this.isEnabled()?"success":"danger")}),"\xa0",e(this.isEnabled()?"Enabled":"Disabled"))}}]),t}(r.Component),pe=Object(b.b)("common")(me),he=function(){return s.a.createElement(ue.Consumer,null,function(e){var t=e.status;return s.a.createElement(pe,{status:t})})},fe=function(e){var t=e.name,a=e.icon,n=e.isOpen,r=e.children;return s.a.createElement("li",{className:"nav-item nav-dropdown"+(n?" open":"")},s.a.createElement("button",{className:"nav-link nav-dropdown-toggle",onClick:ge},s.a.createElement("i",{className:"nav-icon "+a}),t),s.a.createElement("ul",{className:"nav-dropdown-items"},r))},ge=function(e){e.preventDefault(),e.target.parentElement.classList.toggle("open")},be=function(e){var t=e.item,a=e.t;return s.a.createElement(Y.a,null,s.a.createElement(o.c,{to:t.url,onClick:G,className:"nav-link",activeClassName:"active"},s.a.createElement("i",{className:"nav-icon "+t.icon}),a(t.name)))},ve=function(e){var t=e.item,a=e.t,n=e.location;return s.a.createElement(fe,{name:a(t.name),icon:t.icon,isOpen:n.pathname.startsWith(t.url)},s.a.createElement(Ee,{items:t.children,t:a,location:n}))},Ee=function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement(r.Fragment,null,t.map(function(e,t){if(e.auth&&!V.loggedIn)return null;if(e.authStrict&&e.auth!==V.loggedIn)return null;if(void 0!==e.customComponent){var r=e.customComponent;return s.a.createElement(r,{key:t})}return e.children?s.a.createElement(ve,{item:e,key:t,t:a,location:n}):s.a.createElement(be,{item:e,key:t,t:a})}))},ye=Object(b.b)(["common","location"])(function(e){var t=e.items,a=e.t,n=e.location;return s.a.createElement("div",{className:"sidebar"},s.a.createElement("nav",{className:"sidebar-nav"},s.a.createElement(X.a,null,s.a.createElement("li",{className:"nav-title"},s.a.createElement("img",{src:$.a,className:"img-responsive pull-left",style:{height:"67px"},alt:""}),s.a.createElement("p",{className:"pull-left",style:{paddingLeft:"15px",textTransform:"initial",fontSize:"14px",marginBottom:"initial",lineHeight:"14px",color:"white"}},a("Status")),s.a.createElement("br",null),s.a.createElement("span",{style:{textTransform:"initial",paddingLeft:"15px"}},s.a.createElement(he,null))),s.a.createElement(Ee,{items:t,t:a,location:n}))))}),ke=function(e){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(ye,e))},Oe=Object(b.b)("footer")(function(e){var t=e.updateAvailable,a=void 0!==t&&t,n=e.t;return a?s.a.createElement("div",{className:"ml-auto"},s.a.createElement(o.b,{to:"/settings/versions"},n("Update Available"))):null}),Ce=Object(b.b)(["common","footer"])(function(e){var t=e.t;return s.a.createElement("footer",{className:"app-footer"},s.a.createElement("div",null,s.a.createElement("i",{className:"fab fa-paypal"}),s.a.createElement("strong",null,s.a.createElement("a",{href:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=3J2L3Z4DHW9UY"},"\xa0",t("Donate")))," ",t("if you found this useful")),s.a.createElement(Oe,e))}),we=function(){return s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(Ce,null))},je=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-success stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-globe-americas fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.totalQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Total Queries ({{count}} clients)",{count:this.props.uniqueClients}))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-primary stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-hand-paper fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.blockedQueries),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Queries Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-warning stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"fa fa-chart-pie fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.percentBlocked),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Percent Blocked"))))),s.a.createElement("div",{className:"col-lg-3 col-xs-12"},s.a.createElement("div",{className:"card border-0 bg-danger stat-height-lock"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:"far fa-list-alt fa-2x"}))),s.a.createElement("div",{className:"card-img-overlay"},s.a.createElement("h3",null,this.props.gravityDomains),s.a.createElement("p",{style:{marginBottom:"0px"}},e("Domains On Blocklist"))))))}}]),t}(r.Component),Ne={totalQueries:"Lost",blockedQueries:"Connection",percentBlocked:"To",gravityDomains:"API",uniqueClients:0},Se={blockedQueries:"---",totalQueries:"---",percentBlocked:"---",gravityDomains:"---",uniqueClients:0},xe=Object(b.b)(["common","dashboard"])(je),Ie=function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(oe,{apiCall:function(){return t.range?V.getSummaryDb(t.range):V.getSummary()},repeatOptions:t.range?void 0:{interval:5e3,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(xe,Object.assign({},Se,e))},renderOk:function(t){return s.a.createElement(xe,Object.assign({},function(e){return{totalQueries:Object.keys(e.total_queries).reduce(function(t,a){return t+e.total_queries[a]},0).toLocaleString(),blockedQueries:e.blocked_queries.toLocaleString(),percentBlocked:e.percent_blocked.toFixed(2).toLocaleString()+"%",gravityDomains:e.gravity_size.toLocaleString(),uniqueClients:e.total_clients}}(t),e))},renderErr:function(){return s.a.createElement(xe,Object.assign({},Ne,e))}})})},Ae=function(e){return("00"+e).substr(-2,2)},De=function(e){return Math.ceil((e.until.unix()-e.from.unix())/144)},Te=a(47),He=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t,t={labels:this.props.labels,datasets:[{label:e("Total Queries"),data:this.props.domains_over_time,fill:!0,backgroundColor:"rgba(220,220,220,0.5)",borderColor:"rgba(0, 166, 90,.8)",pointBorderColor:"rgba(0, 166, 90,.8)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"},{label:e("Blocked Queries"),data:this.props.blocked_over_time,fill:!0,backgroundColor:"rgba(0,192,239,0.5)",borderColor:"rgba(0,192,239,1)",pointBorderColor:"rgba(0,192,239,1)",pointRadius:1,pointHoverRadius:5,pointHitRadius:5,cubicInterpolationMode:"monotone"}]},a={tooltips:{enabled:!0,mode:"x-axis",callbacks:{title:function(t){var a=t[0].xLabel.match(/(\d?\d):?(\d?\d?)/),n=parseInt(a[1],10),r=parseInt(a[2],10)||0,s=Ae(n)+":"+Ae(r-5)+":00",l=Ae(n)+":"+Ae(r+4)+":59";return e("Queries from {{from}} to {{to}}",{from:s,to:l})},label:function(e,t){if(1===e.datasetIndex){var a=0,n=t.datasets[0].data[e.index],r=t.datasets[1].data[e.index];return n>0&&(a=100*r/n),t.datasets[e.datasetIndex].label+": "+e.yLabel+" ("+a.toFixed(1)+"%)"}return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!1},n=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Queries Over {{range}}",{range:n})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Te.b,{width:970,height:170,data:t,options:a})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Pe={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",domains_over_time:[],blocked_over_time:[]},Re=Object(b.b)(["dashboard","time-ranges"])(He),_e=function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(oe,{apiCall:function(){return t.range?V.getHistoryGraphDb(t.range,De(t.range)):V.getHistoryGraph()},repeatOptions:t.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Re,Object.assign({},Pe,e))},renderOk:function(a){return s.a.createElement(Re,Object.assign({},function(e,t){var a="hour";t?t.until.diff(t.from,"day")>1&&(a="day"):e=e.slice(0,-1);var n=e.map(function(e){return new Date(1e3*e.timestamp)}),r=e.map(function(e){return e.total_queries}),s=e.map(function(e){return e.blocked_queries});return{loading:!1,labels:n,timeUnit:a,rangeName:t?t.name:void 0,domains_over_time:r,blocked_over_time:s}}(a,t.range),e))},renderErr:function(){return s.a.createElement(Re,Object.assign({},Pe,e))}})})},Me=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={tooltip:null},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.state.tooltip,a=Date.now();if(this.props.handler.custom=function(t){0===t.opacity&&e.setState({tooltip:t});var n=Date.now();n-a<50||(a=n,e.setState({tooltip:t}))},null===t||0===t.opacity||null===this.props.chart.current)return null;var n=this.props.chart.current.chartInstance.canvas.getBoundingClientRect(),r=t.caretX;document.offsetWidth-t.caretX<400&&(r=document.offsetWidth-400),t.caretX<100&&(r=100);var l={opacity:1,left:n.left+r+"px",top:n.top+t.caretY+window.scrollY+"px",fontFamily:t._bodyFontFamily,fontSize:t.bodyFontSize+"px",fontStyle:t._bodyFontStyle,padding:t.yPadding+"px "+t.xPadding+"px"},i=[];return t.body&&(i=t.body.map(function(e){return e.lines}).map(function(e,a){return{data:e[0],colors:t.labelColors[a]}})),i.sort(function(e,t){return e.data.split(": ")[0].localeCompare(t.data.split(": ")[0])}),s.a.createElement("div",{className:"chartjs-tooltip",style:l},s.a.createElement("table",null,s.a.createElement("thead",null,t.title.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("th",null,e))})),s.a.createElement("tbody",null,i.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"chartjs-tooltip-key",style:{background:e.colors.backgroundColor,borderColor:e.colors.borderColor,borderWidth:"2px"}}),e.data))}))))}}]),t}(r.Component),Fe=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).graphRef=void 0,a.graphRef=s.a.createRef(),a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t,t={tooltips:{enabled:!1,mode:"x-axis",callbacks:{title:function(t){var a=y()(t[0].xLabel,"HH:mm"),n=a.clone().subtract(5,"minutes"),r=a.clone().add(4,"minutes").add(59,"seconds"),s=n.format("HH:mm:ss"),l=r.format("HH:mm:ss");return e("Client activity from {{from}} to {{to}}",{from:s,to:l})},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.yLabel}}},legend:{display:!1},scales:{xAxes:[{type:"time",time:{unit:this.props.timeUnit,displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"}}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]},maintainAspectRatio:!1},a=this.props.rangeName?this.props.rangeName:e("Last 24 Hours");return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e("Clients Over {{range}}",{range:a})),s.a.createElement("div",{className:"card-body"},s.a.createElement(Te.b,{width:970,height:170,data:{labels:this.props.labels,datasets:this.props.datasets},options:t,ref:this.graphRef})),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null,i.a.createPortal(s.a.createElement(Me,{chart:this.graphRef,handler:t.tooltips}),document.body))}}]),t}(r.Component),Le={loading:!0,labels:[],timeUnit:"hour",rangeName:"---",datasets:[]},Be=Object(b.b)(["dashboard","time-ranges"])(Fe),qe=function(){return s.a.createElement(f.Consumer,null,function(e){return s.a.createElement(oe,{apiCall:function(){return e.range?V.getClientsGraphDb(e.range,De(e.range)):V.getClientsGraph()},repeatOptions:e.range?void 0:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Be,Le)},renderOk:function(t){return s.a.createElement(Be,function(e,t){var a="hour",n=e.over_time;t?t.until.diff(t.from,"day")>1&&(a="day"):n=e.over_time.slice(0,-1);var r=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],s=n.map(function(e){return new Date(1e3*e.timestamp).toISOString()}),l=[],i=0,o=!0,c=!1,u=void 0;try{for(var d,m=e.clients[Symbol.iterator]();!(o=(d=m.next()).done);o=!0){var p=d.value;l.push({label:0!==p.name.length?p.name:p.ip,backgroundColor:i<r.length?r[i]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0"),pointRadius:0,pointHitRadius:5,pointHoverRadius:5,cubicInterpolationMode:"monotone",data:[]}),i++}}catch(k){c=!0,u=k}finally{try{o||null==m.return||m.return()}finally{if(c)throw u}}var h=!0,f=!1,g=void 0;try{for(var b,v=n[Symbol.iterator]();!(h=(b=v.next()).done);h=!0){var E=b.value;for(var y in l)l.hasOwnProperty(y)&&l[y].data.push(E.data[y])}}catch(k){f=!0,g=k}finally{try{h||null==v.return||v.return()}finally{if(f)throw g}}return l.sort(function(e,t){return e.label.localeCompare(t.label)}),{labels:s,datasets:l,loading:!1,timeUnit:a,rangeName:t?t.name:void 0}}(t,e.range))},renderErr:function(){return s.a.createElement(Be,Le)}})})},Ue=a(70),Qe=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).chartRef=void 0,a.handleClick=function(e,t){var n=a.chartRef.current.chartInstance;n.legend.options.onClick.call(n,e,n.legend.legendItems[t]),a.forceUpdate()},a.chartRef=s.a.createRef(),a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t={legend:{display:!1},tooltips:{enabled:!0,callbacks:{title:function(){return e.props.title},label:function(e,t){var a=t.datasets[e.datasetIndex],n=t.labels[e.index];return n+": "+a.data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},a=null!==this.chartRef.current?this.chartRef.current.chartInstance.getDatasetMeta(0).data:this.props.data.map(function(){return{hidden:!1}});return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"float-left",style:{width:"67%"}},s.a.createElement(Te.a,{width:100,height:250,options:t,ref:this.chartRef,data:{datasets:[{data:Object(Ue.a)(this.props.data),backgroundColor:this.props.colors}],labels:this.props.labels}})),s.a.createElement("div",{className:"float-right",style:{width:"33%"}},s.a.createElement("ul",{className:"chart-legend"},this.props.labels.map(function(t,a){return[t,e.props.colors[a]]}).map(function(t,n){var r=Object(p.a)(t,2),l=r[0],i=r[1];return s.a.createElement("li",{key:n,className:a[n]&&a[n].hidden?"strike":"",onClick:function(t){return e.handleClick(t,n)}},s.a.createElement("span",{style:{backgroundColor:i}}),l)})))),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component),Ve={loading:!0,data:[],colors:[],labels:[]},ze=function(e){var t=e.apiCall,a=e.title,n=e.apiHandler,r=Object(ne.a)(e,["apiCall","title","apiHandler"]);return s.a.createElement(oe,{apiCall:t,renderInitial:function(){return s.a.createElement(Qe,Object.assign({title:a},Ve,r))},renderOk:function(e){return s.a.createElement(Qe,Object.assign({title:a},function(e){var t=["#20a8d8","#f86c6b","#4dbd74","#f8cb00","#263238","#63c2de","#b0bec5"],a=[],n=[],r=[],s=0,l=!0,i=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;a.push(d.percent),n.push(0!==d.name.length?d.name:d.ip),r.push(s<t.length?t[s]:"#"+parseInt(""+16777215*Math.random(),10).toString(16).padStart(6,"0")),s++}}catch(m){i=!0,o=m}finally{try{l||null==u.return||u.return()}finally{if(i)throw o}}return{loading:!1,data:a,colors:r,labels:n}}(n(e)),r))},renderErr:function(){return s.a.createElement(Qe,Object.assign({title:a},Ve,r))}})},We=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(ze,{title:t("Query Types"),apiCall:a,apiHandler:function(e){var t=e.reduce(function(e,t){return e+t.count},0);return e.map(function(e){return{name:e.name,percent:t>0?100*e.count/t:0}})}})},Ge=Object(b.b)("dashboard")(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(We,Object.assign({},e,{apiCall:function(){return t.range?V.getQueryTypesDb(t.range):V.getQueryTypes()}}))})}),Je=function(e){var t=e.t,a=e.apiCall;return s.a.createElement(ze,{title:t("Queries Answered By Destination"),apiCall:a,apiHandler:function(e){return e.upstreams.map(function(t){return{name:t.name,ip:t.ip,percent:100*t.count/e.total_queries}})}})},Ye=Object(b.b)("dashboard")(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(Je,Object.assign({},e,{apiCall:function(){return t.range?V.getUpstreamsDb(t.range):V.getUpstreams()}}))})}),Xe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).generateTable=function(){return a.props.isEmpty(a.props.data)?a.props.emptyMessage:s.a.createElement("table",{className:"table table-bordered"},s.a.createElement("tbody",null,s.a.createElement("tr",null,a.props.headers.map(function(e,t){return s.a.createElement("th",{key:t},e)})),a.props.generateRows(a.props.data)))},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},this.props.title),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{style:{overflowX:"auto"}},this.generateTable())),this.props.loading?s.a.createElement("div",{className:"card-img-overlay",style:{background:"rgba(255,255,255,0.7)"}},s.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{position:"absolute",top:"50%",left:"50%",fontSize:"30px"}})):null)}}]),t}(r.Component);Xe.defaultProps={loading:!0,title:"",data:{},headers:[],emptyMessage:"",isEmpty:function(){return!0},generateRows:function(){return null}};var Ze=function(e){var t=e.title,a=e.apiCall,n=e.initialData,r=e.headers,l=e.emptyMessage,i=e.isEmpty,o=e.apiHandler,c=e.generateRows,u=Object(ne.a)(e,["title","apiCall","initialData","headers","emptyMessage","isEmpty","apiHandler","generateRows"]);return s.a.createElement(oe,{apiCall:a,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Xe,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:i,generateRows:c,data:n,loading:!0},u))},renderOk:function(e){return s.a.createElement(Xe,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:i,generateRows:c,data:o(e),loading:!1},u))},renderErr:function(){return s.a.createElement(Xe,Object.assign({title:t,headers:r,emptyMessage:l,isEmpty:i,generateRows:c,data:n,loading:!0},u))}})},$e=function(e){return{totalQueries:e.total_queries,topDomains:e.top_domains}},Ke=function(e){return function(t){return t.topDomains.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-success",style:{width:n+"%"}}))))})}},et=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ze,Object.assign({},n,{title:a("Top Permitted Domains"),initialData:{totalQueries:0,topDomains:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topDomains.length},apiCall:t,apiHandler:$e,generateRows:Ke(a)}))},tt=Object(b.b)(["common","dashboard"])(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(et,Object.assign({},e,{apiCall:function(){return t.range?V.getTopDomainsDb(t.range):V.getTopDomains()}}))})}),at=function(e){return{totalBlocked:e.blocked_queries,topBlocked:e.top_domains}},nt=function(e){return function(t){return t.topBlocked.map(function(a){var n=a.count/t.totalBlocked*100;return s.a.createElement("tr",{key:a.domain},s.a.createElement("td",null,a.domain),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalBlocked.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-warning",style:{width:n+"%"}}))))})}},rt=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ze,Object.assign({},n,{title:a("Top Blocked Domains"),initialData:{totalBlocked:0,topBlocked:[]},headers:[a("Domain"),a("Hits"),a("Frequency")],emptyMessage:a("No Domains Found"),isEmpty:function(e){return 0===e.topBlocked.length},apiCall:t,apiHandler:at,generateRows:nt(a)}))},st=Object(b.b)(["common","dashboard"])(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(rt,Object.assign({},e,{apiCall:function(){return t.range?V.getTopBlockedDomainsDb(t.range):V.getTopBlockedDomains()}}))})}),lt=function(e){return{totalQueries:e.total_queries,topClients:e.top_clients}},it=function(e){return function(t){return t.topClients.map(function(a){var n=a.count/t.totalQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.totalQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-primary",style:{width:n+"%"}}))))})}},ot=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ze,Object.assign({},n,{title:a("Top Clients"),initialData:{totalQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:lt,generateRows:it(a)}))},ct=Object(b.b)(["common","dashboard"])(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(ot,Object.assign({},e,{apiCall:function(){return t.range?V.getTopClientsDb(t.range):V.getTopClients()}}))})}),ut=function(e){return{blockedQueries:e.blocked_queries,topClients:e.top_clients}},dt=function(e){return function(t){return t.topClients.map(function(a){var n=a.count/t.blockedQueries*100;return s.a.createElement("tr",{key:a.name+"|"+a.ip},s.a.createElement("td",null,""!==a.name?a.name:a.ip),s.a.createElement("td",null,a.count.toLocaleString()),s.a.createElement("td",{style:{verticalAlign:"middle"}},s.a.createElement("div",{className:"progress",title:e("{{percent}}% of {{total}}",{percent:n.toFixed(1),total:t.blockedQueries.toLocaleString()})},s.a.createElement("div",{className:"progress-bar bg-danger",style:{width:n+"%"}}))))})}},mt=function(e){var t=e.apiCall,a=e.t,n=Object(ne.a)(e,["apiCall","t"]);return s.a.createElement(Ze,Object.assign({},n,{title:a("Top Blocked Clients"),initialData:{blockedQueries:0,topClients:[]},headers:[a("Client"),a("Requests"),a("Frequency")],emptyMessage:a("No Clients Found"),isEmpty:function(e){return 0===e.topClients.length},apiCall:t,apiHandler:ut,generateRows:dt(a)}))},pt=Object(b.b)(["common","dashboard"])(function(e){return s.a.createElement(f.Consumer,null,function(t){return s.a.createElement(mt,Object.assign({},e,{apiCall:function(){return t.range?V.getTopBlockedClientsDb(t.range):V.getTopBlockedClients()}}))})}),ht=a(157),ft=a(41),gt=a(94),bt=a.n(gt),vt=a(95),Et=a.n(vt),yt=(a(264),function(e){var t=H(e),a=e("Last 24 Hours");return{from:t[a][0],until:t[a][1],name:a}}),kt=function(e){function t(e){var a;Object(_.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).updateHandler=null,a.state={history:[],cursor:null,loading:!1,atEnd:!1,filtersChanged:!1,filters:[]},a.getRowProps=function(e,t){return t&&0!==t.row.status?{style:{color:[1,4,5,6].includes(t.row.status)?"red":"green"}}:{}},a.parseFilters=function(e){var t={},a=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var i=s.value;switch(i.id){case"time":t.from=y()(i.value.from).unix(),t.until=y()(i.value.until).unix();break;case"queryType":if("all"===i.value)break;t.query_type=parseInt(i.value)+1;break;case"domain":if(0===i.value.length)break;t.domain=i.value;break;case"client":if(0===i.value.length)break;t.client=i.value;break;case"status":switch(i.value){case"all":break;case"allowed":t.blocked=!1;break;case"blocked":t.blocked=!0;break;default:t.status=i.value}break;case"dnssec":if("all"===i.value)break;t.dnssec=i.value;break;case"reply":if("all"===i.value)break;t.reply=i.value}}}catch(o){n=!0,r=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return t},a.fetchQueries=function(e){var t=e.page,n=e.pageSize;a.state.atEnd||a.state.loading||!a.state.filtersChanged&&a.state.history.length>=(t+2)*n||(a.setState({loading:!0}),a.updateHandler=re(V.getHistory(Object(M.a)({cursor:a.state.cursor},a.parseFilters(a.state.filters)))),a.updateHandler.promise.then(function(e){a.setState({loading:!1,atEnd:null===e.cursor,cursor:e.cursor,history:a.state.history.concat(e.history),filtersChanged:!1})}).catch(se))};var n=a.props.t;return a.state.filters=[{id:"time",value:yt(n)}],a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement(ht.a,{className:"-striped",style:{background:"white",marginBottom:"24px",lineHeight:1},columns:xt(t),showPaginationTop:!0,sortable:!1,filterable:!1,data:this.state.history,loading:this.state.loading,onFetchData:function(t){if(!Et()(t.filtered,e.state.filters))return bt()(e.fetchQueries,350)(t);e.fetchQueries(t)},onFilteredChange:bt()(function(t){Et()(t,e.state.filters)||e.setState({filters:t,filtersChanged:!0,cursor:null,atEnd:!1,loading:!1,history:[]})},300),defaultFiltered:[{id:"time",value:yt(t)}],getTrProps:this.getRowProps,ofText:this.state.atEnd?"of":"of at least",PadRowComponent:function(){return s.a.createElement("span",null,"\xa0",s.a.createElement("br",null),"\xa0")}})}}]),t}(r.Component),Ot=function(e){return[e("Unknown"),e("Blocked (gravity)"),e("Allowed (forwarded)"),e("Allowed (cached)"),e("Blocked (regex/wildcard)"),e("Blocked (blacklist)"),e("Blocked (external)")]},Ct=function(e){return["N/A",e("Secure"),e("Insecure"),e("Bogus"),e("Abandoned"),e("Unknown")]},wt=["","green","orange","red","red","orange"],jt=function(e){return[e("Unknown"),"NODATA","NXDOMAIN","CNAME","IP","DOMAIN","RRNAME"]},Nt=["A","AAAA","ANY","SRV","SOA","PTR","TXT"],St=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(n){var r=n.filter,l=n.onChange;return s.a.createElement("select",{onChange:function(e){return l(e.target.value)},style:{width:"100%"},value:r?r.value:"all"},s.a.createElement("option",{value:"all"},t("All")),a.map(function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.name)}),e.map(function(e,t){return s.a.createElement("option",{key:t+a.length,value:t},e)}))}},xt=function(e){return[{Header:e("Time"),id:"time",accessor:function(e){return e.timestamp},width:70,Cell:function(e){var t=new Date(1e3*e.value),a=t.toLocaleDateString(ft.a.language,{month:"short"}),n=Ae(t.getDate()),l=Ae(t.getHours()),i=Ae(t.getMinutes()),o=Ae(t.getSeconds());return s.a.createElement(r.Fragment,null,a+", "+n,s.a.createElement("br",null),l+":"+i+":"+o)},filterable:!0,filterMethod:function(){return!0},Filter:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var a=t.filter,n=t.onChange;return s.a.createElement(P,{range:a?a.value:null,onSelect:function(t){n(t||yt(e))},showLabel:!1})})},{Header:e("Type"),id:"queryType",accessor:function(e){return Nt[e.type-1]},width:50,filterable:!0,filterMethod:function(){return!0},Filter:St(Nt,e)},{Header:e("Domain"),id:"domain",accessor:function(e){return e.domain},minWidth:150,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Client"),id:"client",accessor:function(e){return e.client},minWidth:120,className:"horizontal-scroll",filterable:!0,filterMethod:function(){return!0}},{Header:e("Status"),id:"status",accessor:function(e){return e.status},width:140,Cell:function(t){return Ot(e)[t.value]},filterable:!0,filterMethod:function(){return!0},Filter:St(Ot(e),e,[{name:e("Allowed"),value:"allowed"},{name:e("Blocked"),value:"blocked"}])},{Header:"DNSSEC",id:"dnssec",accessor:function(e){return e.dnssec},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:wt[t.value]}},Ct(e)[t.value])},filterable:!0,filterMethod:function(){return!0},Filter:St(Ct(e),e)},{Header:e("Reply"),id:"reply",accessor:function(e){return{type:e.reply,time:e.response_time}},width:90,Cell:function(t){return s.a.createElement("div",{style:{color:"black"}},jt(e)[t.value.type],s.a.createElement("br",null),"("+(t.value.time/10).toLocaleString()+"ms)")},filterable:!0,filterMethod:function(){return!0},Filter:St(jt(e),e)},{Header:e("Action"),width:100,filterable:!1,Cell:function(t){return[1,4,5].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-success full-width",onClick:function(){return V.addWhitelist(t.row.domain)}},e("Whitelist")):[2,3,6].includes(t.row.status)?s.a.createElement("button",{type:"button",className:"btn btn-danger full-width",onClick:function(){return V.addBlacklist(t.row.domain)}},e("Blacklist")):null}}]},It=Object(b.b)(["common","query-log","time-ranges"])(kt),At=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={domain:"",isValid:!0},a.handleChange=function(e){a.setState({domain:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.domain;if(0!==t.length){var n=a.props.isValid(t);a.setState({isValid:n}),n?(a.props.onEnter(t),a.setState({domain:""})):a.props.onValidationError()}},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,a=e.placeholder,n=e.onRefresh;return s.a.createElement("form",{className:"form-group input-group",onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.isValid?"":"is-invalid"),placeholder:a,value:this.state.domain,onChange:this.handleChange,disabled:!V.loggedIn}),s.a.createElement("span",{className:"btn-group input-group-append"},V.loggedIn?s.a.createElement("button",{className:"btn border-secondary",type:"submit"},t("Add")):null,s.a.createElement("button",{onClick:n,className:"btn border-secondary",type:"button"},s.a.createElement("i",{className:"fa fa-sync"}))))}}]),t}(r.Component);At.defaultProps={placeholder:""};var Dt=Object(b.b)(["common","lists"])(At),Tt=function(e){var t=e.dismissible?"alert-dismissible":"";return s.a.createElement("div",{className:"alert alert-".concat(e.type," ").concat(t," fade show")},e.dismissible?s.a.createElement("button",{type:"button",className:"close",onClick:e.onClick},"\xd7"):null,e.message)};Tt.defaultProps={onClick:function(){},dismissible:!0};var Ht=Tt,Pt=Object(b.b)(["common","lists"])(function(e){var t,a=e.domains,n=e.onRemove,r=e.t;return t=a.length>0?a.map(function(e){return s.a.createElement("li",{key:e,className:"list-group-item"},V.loggedIn?(t=e,s.a.createElement(m.a,{color:"danger",size:"sm",className:"pull-right",style:{marginTop:"2px"},onClick:function(){return n(t)}},s.a.createElement("span",{className:"far fa-trash-alt"}))):null,s.a.createElement("span",{style:{display:"table-cell",verticalAlign:"middle",height:"32px"}},e));var t}):s.a.createElement(Ht,{type:"info",message:r("There are no domains in this list"),dismissible:!1}),s.a.createElement("ul",{className:"list-group"},t)}),Rt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={domains:[],message:"",messageType:"info"},a.addHandler=void 0,a.removeHandler=void 0,a.refreshHandler=void 0,a.onEnter=function(e){if(a.state.domains.includes(e))a.onAlreadyAdded(e);else{var t=a.state.domains.slice();a.addHandler=re(a.props.onAdd(e)),a.addHandler.promise.then(function(){a.onAdded(e)}).catch(se).catch(function(){a.onAddFailed(e,t)}),a.onAdding(e)}},a.onAdding=function(e){return a.setState({message:a.props.t("Adding {{domain}}...",{domain:e}),messageType:"info"})},a.onAlreadyAdded=function(e){return a.setState({message:a.props.t("{{domain}} is already added",{domain:e}),messageType:"danger"})},a.onAdded=function(e){return a.setState(function(t){return{domains:[].concat(Object(Ue.a)(t.domains),[e]),message:a.props.t("Successfully added {{domain}}",{domain:e}),messageType:"success"}})},a.onAddFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to add {{domain}}",{domain:e}),messageType:"danger"})},a.onRemoved=function(e){return a.setState(function(t){return{domains:t.domains.filter(function(t){return t!==e})}})},a.onRemoveFailed=function(e,t){return a.setState({domains:t,message:a.props.t("Failed to remove {{domain}}",{domain:e}),messageType:"danger"})},a.onRemove=function(e){if(a.state.domains.includes(e)){var t=a.state.domains.slice();a.removeHandler=re(a.props.onRemove(e)),a.removeHandler.promise.catch(se).catch(function(){a.onRemoveFailed(e,t)}),a.onRemoved(e)}},a.onRefresh=function(){a.refreshHandler=re(a.props.onRefresh()),a.refreshHandler.promise.then(function(e){a.setState({domains:e})}).catch(se)},a.handleValidationError=function(){a.setState({message:a.props.validationErrorMsg,messageType:"danger"})},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.onRefresh()}},{key:"componentWillUnmount",value:function(){this.addHandler&&this.addHandler.cancel(),this.removeHandler&&this.removeHandler.cancel(),this.refreshHandler&&this.refreshHandler.cancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{marginBottom:"24px"}},s.a.createElement("h2",{className:"text-center"},this.props.title),s.a.createElement("br",null),s.a.createElement(Dt,{placeholder:this.props.placeholder,onEnter:this.onEnter,onRefresh:this.onRefresh,isValid:this.props.isValid,onValidationError:this.handleValidationError}),this.props.note,this.state.message?s.a.createElement(Ht,{message:this.state.message,type:this.state.messageType,onClick:function(){return e.setState({message:""})}}):null,s.a.createElement(Pt,{domains:this.state.domains,onRemove:this.onRemove}))}}]),t}(r.Component);Rt.defaultProps={note:""};var _t=Object(b.b)(["common","lists"])(Rt);function Mt(e){if(e.length>253)return!1;var t=e.split(".");return!t.some(function(e){return e.length<1||e.length>63})&&(!Ft(t.join(""))&&/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)+(\.([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*$/.test(e))}function Ft(e){return/^[0-9]+$/.test(e)}function Lt(e){try{new RegExp(e)}catch(t){return!1}return!0}function Bt(e){var t=e.split(".");return 4===t.length&&t.every(function(e){return Ft(e)&&parseInt(e)<256})}var qt=Object(b.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:t("Whitelist"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:V.addWhitelist,onRemove:V.removeWhitelist,onRefresh:V.getWhitelist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))}),Ut=Object(b.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Exact"),")"),placeholder:t("Add a domain or hostname (example.com or example)"),onAdd:V.addBlacklist,onRemove:V.removeBlacklist,onRefresh:V.getBlacklist,isValid:Mt,validationErrorMsg:t("Not a valid hostname")},e))}),Qt=Object(b.b)(["location","lists"])(function(e){var t=e.t;return s.a.createElement(_t,Object.assign({title:"".concat(t("Blacklist")," (").concat(t("Regex"),")"),placeholder:t("Input a regular expression"),onAdd:V.addRegexlist,onRemove:V.removeRegexlist,onRefresh:V.getRegexlist,isValid:Lt,validationErrorMsg:t("Not a valid regular expression")},e))}),Vt=a(372),zt=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement("div",{className:"card border-0 bg-primary"},s.a.createElement("div",{className:"card-block"},s.a.createElement("div",{className:"card-icon"},s.a.createElement("i",{className:this.props.icon}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,this.props.name),s.a.createElement("p",null,t("Version"),":"," ","master"===this.props.branch?this.props.tag:"vDev"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},t("Details")),s.a.createElement(Vt.a,{isOpen:!this.state.collapsed},s.a.createElement("table",{className:"table table-borderless table-sm table-condensed",style:{marginTop:"1rem",marginBottom:"0"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,t("Branch")),s.a.createElement("td",null,this.props.branch)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Tag")),s.a.createElement("td",null,this.props.tag)),s.a.createElement("tr",null,s.a.createElement("td",null,t("Hash")),s.a.createElement("td",null,this.props.hash)))))))}}]),t}(r.Component),Wt=Object(b.b)(["common","settings"])(zt),Gt=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Wt,{name:e("Core"),icon:"far fa-dot-circle fa-2x",branch:this.props.core.branch,hash:this.props.core.hash,tag:this.props.core.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Wt,{name:e("FTL"),icon:"fa fa-industry fa-2x",branch:this.props.ftl.branch,hash:this.props.ftl.hash,tag:this.props.ftl.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Wt,{name:e("API"),icon:"fa fa-bullseye fa-2x",branch:this.props.api.branch,hash:this.props.api.hash,tag:this.props.api.tag})),s.a.createElement("div",{className:"col-xl-3 col-md-6 col-xs-12"},s.a.createElement(Wt,{name:e("Web"),icon:"far fa-list-alt fa-2x",branch:this.props.web.branch,hash:this.props.web.hash,tag:this.props.web.tag})))}}]),t}(r.Component),Jt={api:{branch:"unknown",hash:"unknown",tag:"unknown"},core:{branch:"unknown",hash:"unknown",tag:"unknown"},ftl:{branch:"unknown",hash:"unknown",tag:"unknown"},web:{branch:"unknown",hash:"unknown",tag:"unknown"}},Yt=Object(b.b)(["common"])(Gt),Xt=function(e){return s.a.createElement(oe,{apiCall:V.getVersion,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Yt,Object.assign({},Jt,e))},renderOk:function(t){return s.a.createElement(Yt,Object.assign({},t,e))},renderErr:function(){return s.a.createElement(Yt,Object.assign({},Jt,e))}})},Zt=a(381),$t=a(382),Kt=a(383),ea=a(373),ta=a(374),aa=a(375),na=a(376),ra=a(377),sa=a(378),la=a(388),ia=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,settings:{active:!1,ip_start:"",ip_end:"",router_ip:"",lease_time:0,domain:"",ipv6_support:!1,rapid_commit:!0}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDHCPInfo=function(){a.loadHandler=re(V.getDHCPInfo()),a.loadHandler.promise.then(function(e){a.setState({settings:e})}).catch(se)},a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState(function(t){return{settings:Object(M.a)({},t.settings,Object(v.a)({},e,r))}})}},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=re(V.updateDHCPInfo(a.state.settings)),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(se).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isSettingValid=function(e,t){return!a.state.settings.active&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.loadDHCPInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel(),this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.t,a=this.isSettingValid(this.state.settings.ip_start,Bt),n=this.isSettingValid(this.state.settings.ip_end,Bt),r=this.isSettingValid(this.state.settings.router_ip,Bt),l=this.state.settings.lease_time>=0,i=this.isSettingValid(this.state.settings.domain,Mt),o=this.state.showAlert?s.a.createElement(Ht,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ea.a,{onSubmit:this.saveSettings},o,s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",checked:this.state.settings.active,onChange:this.onChange("active","checked")}),t("Enabled"))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"startIP",sm:2},t("Start IP")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"startIP",disabled:!this.state.settings.active,value:this.state.settings.ip_start,onChange:this.onChange("ip_start","value"),invalid:!a}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"endIP",sm:2},t("End IP")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"endIP",disabled:!this.state.settings.active,value:this.state.settings.ip_end,onChange:this.onChange("ip_end","value"),invalid:!n}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"routerIP",sm:2},t("Router IP")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"routerIP",disabled:!this.state.settings.active,value:this.state.settings.router_ip,onChange:this.onChange("router_ip","value"),invalid:!r}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"leaseTime",sm:2},t("Lease Time")),s.a.createElement(ra.a,{sm:10},s.a.createElement(sa.a,null,s.a.createElement(na.a,{id:"leaseTime",disabled:!this.state.settings.active,value:this.state.settings.lease_time,onChange:function(t){return e.setState(function(e){return{settings:Object(M.a)({},e.settings,{lease_time:parseInt(t.target.value)})}})},invalid:!l}),s.a.createElement(la.a,{addonType:"append"},"Hours")))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"domain",sm:2},t("Domain")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"domain",disabled:!this.state.settings.active,value:this.state.settings.domain,onChange:this.onChange("domain","value"),invalid:!i}))),s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.ipv6_support,onChange:this.onChange("ipv6_support","checked")}),t("IPv6 Support"))),s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",disabled:!this.state.settings.active,checked:this.state.settings.rapid_commit,onChange:this.onChange("rapid_commit","checked")}),t("Rapid Commit"))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!a||!n||!r||!l||!i},t("Apply")))}}]),t}(r.Component),oa=Object(b.b)(["common","settings","api-errors"])(ia),ca=a(380),ua=a(379),da=function(e){var t=e.address,a=e.onRemove;return s.a.createElement(ua.a,null,t,s.a.createElement(m.a,{color:"danger",size:"sm",className:"pull-right",onClick:a},s.a.createElement("span",{className:"far fa-trash-alt"})))},ma=a(155),pa=[{name:"OpenDNS (ECS)",primaryIpv4:"208.67.222.222",secondaryIpv4:"208.67.220.220",primaryIpv6:"2620:119:35::35",secondaryIpv6:"2620:119:53::53"},{name:"Google (ECS)",primaryIpv4:"8.8.8.8",secondaryIpv4:"8.8.4.4",primaryIpv6:"2001:4860:4860:0:0:0:0:8888",secondaryIpv6:"2001:4860:4860:0:0:0:0:8844"},{name:"Quad9 (filtered, DNSSEC)",primaryIpv4:"9.9.9.9",secondaryIpv4:"149.112.112.112",primaryIpv6:"2620:fe::fe",secondaryIpv6:"2620:fe::9"},{name:"Quad9 (unfiltered, no DNSSEC)",primaryIpv4:"9.9.9.10",secondaryIpv4:"149.112.112.10",primaryIpv6:"2620:fe::10",secondaryIpv6:"2620:fe::fe:10"},{name:"Quad9 (filtered + ECS)",primaryIpv4:"9.9.9.11",secondaryIpv4:"149.112.112.11",primaryIpv6:"2620:fe::11",secondaryIpv6:""},{name:"Cloudflare",primaryIpv4:"1.1.1.1",secondaryIpv4:"1.0.0.1",primaryIpv6:"2606:4700:4700::1111",secondaryIpv6:"2606:4700:4700::1001"},{name:"Level3",primaryIpv4:"4.2.2.1",secondaryIpv4:"4.2.2.2",primaryIpv6:"",secondaryIpv6:""},{name:"Comodo",primaryIpv4:"8.26.56.26",secondaryIpv4:"8.20.247.20",primaryIpv6:"",secondaryIpv6:""},{name:"DNS.WATCH",primaryIpv4:"84.200.69.80",secondaryIpv4:"84.200.70.40",primaryIpv6:"2001:1608:10:25:0:0:1c04:b12f",secondaryIpv6:"2001:1608:10:25:0:0:9249:d69b"}].flatMap(function(e){var t=function(t,a,n){return{label:e.name+" "+a+" "+n+" ("+t+")",address:t}},a=[];return e.primaryIpv4.length>0&&a.push(t(e.primaryIpv4,"Primary","IPv4")),e.secondaryIpv4.length>0&&a.push(t(e.secondaryIpv4,"Secondary","IPv4")),e.primaryIpv6.length>0&&a.push(t(e.primaryIpv6,"Primary","IPv6")),e.secondaryIpv6.length>0&&a.push(t(e.secondaryIpv6,"Secondary","IPv6")),a}),ha=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(ee.a)(this,Object(te.a)(t).call(this,e))).state={address:"",selected:[]},a.typeahead=void 0,a.getAddress=function(){return 0===a.state.selected.length?a.state.address:a.state.selected[0].address},a.typeahead=s.a.createRef(),a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props.t,a=this.props.isValid(this.getAddress());return s.a.createElement(ua.a,null,s.a.createElement(sa.a,null,s.a.createElement(ma.Typeahead,{id:"dns-list-typeahead",onInputChange:function(t){return e.setState({address:t})},onChange:function(t){return e.setState({selected:t})},options:pa.filter(function(t){return!e.props.upstreams.includes(t.address)}),selected:this.state.selected,emptyLabel:t("Detected custom upstream server"),positionFixed:!0,ref:this.typeahead}),s.a.createElement(la.a,{addonType:"append"},s.a.createElement(m.a,{color:"success",size:"sm",onClick:function(){e.props.onAdd(e.getAddress()),e.setState({address:"",selected:[]}),e.typeahead.current.getInstance().clear()},disabled:!a},s.a.createElement("span",{className:"fa fa-plus"})))))}}]),t}(r.Component),fa=Object(b.b)("settings")(ha),ga=function(e,t){return!t.includes(e)&&(function(e){var t=e.split(":");return!!Bt(t[0])&&(1===t.length||2===t.length&&Ft(t[1]))}(e)||function(e){return/^(\[[a-fA-F0-9:]+]:\d+|[a-fA-F0-9:]+)$/.test(e)}(e))},ba=function(e){var t=e.upstreams,a=e.onAdd,n=e.onRemove;return s.a.createElement(ca.a,{style:{overflowY:"scroll",maxHeight:"350px"}},t.map(function(e){return s.a.createElement(da,{key:e,onRemove:function(){return n(e)},address:e})}),s.a.createElement(fa,{onAdd:a,isValid:function(e){return ga(e,t)},upstreams:t}))},va=function(e){var t=e.settings,a=e.onUpdate,n=e.isRouterIpValid,l=e.isDomainValid,i=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",checked:t.enabled,onChange:function(e){return a(Object(M.a)({},t,{enabled:e.target.checked}))}}),i("Enabled"))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"routerIP",sm:5},i("Router IP")),s.a.createElement(ra.a,{sm:7},s.a.createElement(na.a,{id:"routerIP",disabled:!t.enabled,value:t.routerIp,onChange:function(e){return a(Object(M.a)({},t,{routerIp:e.target.value}))},invalid:!n}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"localDomain",sm:5},i("Local Domain Name")),s.a.createElement(ra.a,{sm:7},s.a.createElement(na.a,{id:"localDomain",disabled:!t.enabled,value:t.domain,onChange:function(e){return a(Object(M.a)({},t,{domain:e.target.value}))},invalid:!l}))))},Ea=function(e){var t=e.settings,a=e.onUpdate,n=e.t;return s.a.createElement(r.Fragment,null,s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"listeningBehavior",sm:5},n("Interface listening behavior")),s.a.createElement(ra.a,{sm:7},s.a.createElement(na.a,{id:"listeningBehavior",type:"select",value:t.listeningType,onChange:function(e){return a(Object(M.a)({},t,{listeningType:e.target.value}))}},s.a.createElement("option",null,"all"),s.a.createElement("option",null,"local"),s.a.createElement("option",null,"single")))),s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",checked:t.fqdnRequired,onChange:function(e){return a(Object(M.a)({},t,{fqdnRequired:e.target.checked}))}}),n("Forward FQDNs only"))),s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",checked:t.bogusPriv,onChange:function(e){return a(Object(M.a)({},t,{bogusPriv:e.target.checked}))}}),n("Only forward public reverse lookups"))),s.a.createElement(ta.a,{check:!0},s.a.createElement(aa.a,{check:!0},s.a.createElement(na.a,{type:"checkbox",checked:t.dnssec,onChange:function(e){return a(Object(M.a)({},t,{dnssec:e.target.checked}))}}),n("Use DNSSEC"))))},ya=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,upstreamDns:[],conditionalForwarding:{enabled:!1,routerIp:"",domain:""},options:{fqdnRequired:!1,bogusPriv:!1,dnssec:!1,listeningType:"single"}},a.loadHandler=void 0,a.updateHandler=void 0,a.loadDNSInfo=function(){a.loadHandler=re(V.getDNSInfo()),a.loadHandler.promise.then(function(e){var t=e.conditional_forwarding.domain,n=0===t.length?"lan":t;a.setState({upstreamDns:e.upstream_dns,conditionalForwarding:{enabled:e.conditional_forwarding.enabled,routerIp:e.conditional_forwarding.router_ip,domain:n},options:{fqdnRequired:e.options.fqdn_required,bogusPriv:e.options.bogus_priv,dnssec:e.options.dnssec,listeningType:e.options.listening_type}})}).catch(se)},a.handleUpstreamAdd=function(e){a.setState({upstreamDns:a.state.upstreamDns.concat(e)})},a.handleUpstreamRemove=function(e){a.setState({upstreamDns:a.state.upstreamDns.filter(function(t){return t!==e})})},a.handleConditionalForwardingUpdate=function(e){a.setState({conditionalForwarding:e})},a.handleDnsOptionsUpdate=function(e){a.setState({options:e})},a.saveSettings=function(e){e.preventDefault();var t=a.props.t;a.setState({alertMessage:t("Processing..."),alertType:"info",showAlert:!0,processing:!0}),a.updateHandler=re(V.updateDNSInfo({upstream_dns:a.state.upstreamDns,conditional_forwarding:{enabled:a.state.conditionalForwarding.enabled,router_ip:a.state.conditionalForwarding.routerIp,domain:a.state.conditionalForwarding.domain},options:{fqdn_required:a.state.options.fqdnRequired,bogus_priv:a.state.options.bogusPriv,dnssec:a.state.options.dnssec,listening_type:a.state.options.listeningType}})),a.updateHandler.promise.then(function(){a.setState({alertMessage:t("Successfully saved settings"),alertType:"success",showAlert:!0,processing:!1})}).catch(se).catch(function(e){var n="";n=e instanceof Error?e.message:t("API Error: {{error}}",{error:t(e.key,e.data)}),a.setState({alertMessage:n,alertType:"danger",showAlert:!0,processing:!1})})},a.isCFSettingValid=function(e,t){return!a.state.conditionalForwarding.enabled&&0===e.length||t(e)},a.hideAlert=function(){a.setState({showAlert:!1})},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.loadDNSInfo()}},{key:"componentWillUnmount",value:function(){this.loadHandler&&this.loadHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.isCFSettingValid(this.state.conditionalForwarding.routerIp,Bt),a=this.isCFSettingValid(this.state.conditionalForwarding.domain,Mt),n=this.state.showAlert?s.a.createElement(Ht,{message:this.state.alertMessage,type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ea.a,{onSubmit:this.saveSettings},n,s.a.createElement(ta.a,{row:!0},s.a.createElement(ra.a,{sm:6},s.a.createElement("h3",null,e("Upstream DNS Servers")),s.a.createElement(ba,{onAdd:this.handleUpstreamAdd,onRemove:this.handleUpstreamRemove,upstreams:this.state.upstreamDns})),s.a.createElement(ra.a,{sm:6},s.a.createElement("h3",null,e("Conditional Forwarding")),s.a.createElement(va,{settings:this.state.conditionalForwarding,onUpdate:this.handleConditionalForwardingUpdate,isRouterIpValid:t,isDomainValid:a,t:e}),s.a.createElement("h3",null,e("DNS Options")),s.a.createElement(Ea,{settings:this.state.options,onUpdate:this.handleDnsOptionsUpdate,t:e}))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing||!t||!a},e("Apply")))}}]),t}(r.Component),ka=Object(b.b)(["common","settings"])(ya),Oa=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(ea.a,null,s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"interface",sm:4},e("Interface")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"interface",value:this.props.interface}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"ipv4_address",sm:4},e("IPv4 address")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"ipv4_address",value:this.props.ipv4Address}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"ipv6_address",sm:4},e("IPv6 address")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"ipv6_address",value:this.props.ipv6Address}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"hostname",sm:4},e("Hostname")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"hostname",value:this.props.hostname}))))}}]),t}(r.Component),Ca=Object(b.b)(["common","settings"])(Oa),wa=function(e){return s.a.createElement(oe,{apiCall:V.getNetworkInfo,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Ca,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))},renderOk:function(t){return s.a.createElement(Ca,Object.assign({},function(e){return{interface:e.interface,ipv4Address:e.ipv4_address,ipv6Address:e.ipv6_address,hostname:e.hostname}}(t),e))},renderErr:function(){return s.a.createElement(Ca,Object.assign({},{interface:"",ipv4Address:"",ipv6Address:"",hostname:""},e))}})},ja=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement(ea.a,null,s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"queries",sm:4},e("Queries")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"queries",value:this.props.queries.toLocaleString()}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"filesize",sm:4},e("Filesize")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"filesize",value:"".concat(this.props.fileSize.toLocaleString()," B")}))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{className:"bold",for:"sqliteversion",sm:4},e("SQLite version")),s.a.createElement(ra.a,{sm:8},s.a.createElement(na.a,{plaintext:!0,readOnly:!0,id:"sqliteversion",value:this.props.sqliteVersion}))))}}]),t}(r.Component),Na={fileSize:0,queries:0,sqliteVersion:""},Sa=Object(b.b)(["settings"])(ja),xa=function(e){return s.a.createElement(oe,{apiCall:V.getFTLdb,repeatOptions:{interval:6e5,ignoreCancel:!0},renderInitial:function(){return s.a.createElement(Sa,Object.assign({},Na,e))},renderOk:function(t){return s.a.createElement(Sa,Object.assign({},function(e){return{fileSize:e.filesize,queries:e.queries,sqliteVersion:e.sqlite_version}}(t),e))},renderErr:function(){return s.a.createElement(Sa,Object.assign({},Na,e))}})},Ia=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"network"},a.setTab=function(e){a.state.activeTab!==e&&a.setState({activeTab:e})},a.tab=function(e,t){return s.a.createElement(Y.a,null,s.a.createElement(Zt.a,{active:a.state.activeTab===e,onClick:function(){return a.setTab(e)}},t))},a.tabContent=function(e,t){return s.a.createElement($t.a,{tabId:e},t)},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(X.a,{tabs:!0},this.tab("network",e("Network")),this.tab("dhcp",e("DHCP")),this.tab("dns",e("DNS")),this.tab("ftl",e("FTL"))),s.a.createElement(Kt.a,{activeTab:this.state.activeTab},this.tabContent("network",s.a.createElement(wa,null)),this.tabContent("dhcp",s.a.createElement(oa,null)),this.tabContent("dns",s.a.createElement(ka,null)),this.tabContent("ftl",s.a.createElement(xa,null))))}}]),t}(r.Component),Aa=Object(b.b)(["common","settings"])(Ia),Da=a(96),Ta=a.n(Da),Ha=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0},a.onClick=function(){a.setState({collapsed:!a.state.collapsed})},a.isExpanded=function(){return a.props.error||!a.state.collapsed},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.t;return s.a.createElement("div",{className:"full-width"},s.a.createElement("div",{className:"card mb0 "+(this.props.error?"border-danger":"border-white")},s.a.createElement("div",{className:this.props.error?"bg-danger":"bg-white pr0"},s.a.createElement("span",{className:this.props.error?"pull-left":"pull-right"},s.a.createElement("button",{type:"button",className:"pr0 "+(this.props.error?"btn disabled":"btn btn-link"),onClick:this.onClick},e("Forgot Password")))),s.a.createElement("div",{className:"card-body bg-white "+(this.isExpanded()?"":" collapse ")+(this.props.error?"p12":"p0")},e("forgot_password_description"),s.a.createElement("pre",null,s.a.createElement("code",null,"sudo pihole -a -p")))))}}]),t}(r.Component),Pa=Object(b.b)("login")(Ha),Ra=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",error:!1,cookiesEnabled:!1},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.authenticate=function(e){e&&e.preventDefault();var t=Ta()("sha256").update(a.state.password).digest("hex");t=Ta()("sha256").update(t).digest("hex"),a.setState({password:"",error:!1}),V.authenticate(t).then(function(){V.loggedIn=!0,Q.fakeAPI&&(document.cookie="user_id=;");var e=a.props.location.state||{from:{pathname:"/"}};a.props.history.push(e.from.pathname)}).catch(function(){return a.setState({error:!0})})},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentWillMount",value:function(){navigator.cookieEnabled&&this.setState({cookiesEnabled:!0})}},{key:"render",value:function(){if(V.loggedIn)return s.a.createElement(c.a,{to:"/"});var e=this.props.t;return s.a.createElement("div",{className:"mainbox col-md-8 offset-md-2 col-lg-6 offset-lg-3",style:{float:"none"}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("img",{src:$.a,alt:"Logo",width:"30%"})),s.a.createElement("br",null),s.a.createElement("div",{className:"card-title text-center",style:{marginBottom:0}},s.a.createElement("span",{className:"logo-lg",style:{fontSize:"25px"}},"Pi-",s.a.createElement("b",null,"hole"))),s.a.createElement("div",{className:"login-box-msg"},e("Sign in to start your session"),this.props.location.state&&this.props.location.state.from.pathname in tn(e)?s.a.createElement(r.Fragment,null,s.a.createElement("br",null),e('You will be transferred to the "{{page}}" page',{page:tn(e)[this.props.location.state.from.pathname]})):null,this.state.cookiesEnabled?null:s.a.createElement("div",{className:"text-center",style:{color:"#F00"}},e("Verify that cookies are allowed for {{host}}",{host:window.location.host}))),this.state.error?s.a.createElement("div",{className:"form-group has-error login-box-msg"},s.a.createElement("label",{className:"control-label"},s.a.createElement("i",{className:"fa fa-times-circle-o"})," ",e("Wrong Password!"))):null),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{id:"loginform",onSubmit:this.authenticate},s.a.createElement("div",{className:"input-group"+(this.state.error?" has-error":"")},s.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.handlePasswordChange,placeholder:e("Password"),autoFocus:!0})),s.a.createElement("br",null),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block"},e("Log in")),s.a.createElement("br",null),s.a.createElement(Pa,{error:this.state.error})))))}}]),t}(r.Component),_a=Object(b.b)(["login","location"])(Ra),Ma=function(e){function t(){return Object(_.a)(this,t),Object(ee.a)(this,Object(te.a)(t).apply(this,arguments))}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentWillMount",value:function(){V.loggedIn=!1,Q.fakeAPI?document.cookie="user_id=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;":V.logout()}},{key:"render",value:function(){return s.a.createElement(c.a,{to:"/"})}}]),t}(r.Component),Fa=function(e){var t=e.name,a=e.icon,n=e.onClick;return s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n(e)},className:"nav-link"},s.a.createElement("i",{className:"nav-icon "+a}),t))};Fa.defaultProps={onClick:function(){}};var La=Fa,Ba=a(387),qa=a(384),Ua=a(385),Qa=a(386),Va=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={processing:!1,customModalShown:!1,customTime:60,customMultiplier:60},a.updateHandler=void 0,a.getStatusFromAction=function(e){switch(e){case"enable":return"enabled";case"disable":return"disabled"}},a.setStatus=function(e,t){a.state.processing||(a.toggleProcessing(),a.updateHandler=re(a.props.onSetStatus(e,t)),a.updateHandler.promise.then(function(){return a.props.refresh({status:a.getStatusFromAction(e)})}).then(a.toggleProcessing).catch(function(e){e.isCanceled||a.toggleProcessing()}))},a.toggleModal=function(){a.setState({customModalShown:!a.state.customModalShown})},a.toggleProcessing=function(){a.setState(function(e){return{processing:!e.processing}})},a.submitCustom=function(e){e.preventDefault(),a.setState({customModalShown:!1}),a.setStatus("disable",a.state.customTime*a.state.customMultiplier)},a.renderModal=function(){var e=a.props.t;return s.a.createElement(Ba.a,{isOpen:a.state.customModalShown,toggle:a.toggleModal,style:{maxWidth:"300px"}},s.a.createElement(ea.a,{onSubmit:a.submitCustom},s.a.createElement(qa.a,{toggle:a.toggleModal},e("Custom time")),s.a.createElement(Ua.a,null,s.a.createElement(sa.a,null,s.a.createElement(na.a,{type:"number",value:a.state.customTime,onChange:function(e){return a.setState({customTime:parseInt(e.target.value)})}}),s.a.createElement(la.a,{addonType:"append"},s.a.createElement(na.a,{type:"select",value:a.state.customMultiplier,onChange:function(e){return a.setState({customMultiplier:parseInt(e.target.value)})}},s.a.createElement("option",{value:1},e("Seconds")),s.a.createElement("option",{value:60},e("Minutes")))))),s.a.createElement(Qa.a,null,s.a.createElement(m.a,{type:"submit"},e("Apply")),s.a.createElement(m.a,{onClick:a.toggleModal},e("Cancel")))))},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props,a=t.t;switch(t.status){case"enabled":return s.a.createElement(fe,{name:a("Disable"),icon:"fa fa-stop",isOpen:!1},s.a.createElement(La,{name:a("Permanently"),icon:"fa fa-stop",onClick:function(){return e.setStatus("disable")}}),s.a.createElement(La,{name:a("For {{time}} seconds",{time:10}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",10)}}),s.a.createElement(La,{name:a("For {{time}} seconds",{time:30}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",30)}}),s.a.createElement(La,{name:a("For {{time}} minutes",{time:5}),icon:"fa fa-clock",onClick:function(){return e.setStatus("disable",300)}}),s.a.createElement(La,{name:a("Custom time"),icon:"fa fa-clock",onClick:this.toggleModal}),this.renderModal());case"disabled":return s.a.createElement(La,{name:a("Enable"),icon:"fa fa-play",onClick:function(){return e.setStatus("enable")}});case"unknown":default:return null}}}]),t}(r.Component),za=Object(b.b)("common")(Va),Wa={layout:"boxed",language:"en"},Ga=function(){var e=localStorage.getItem("webPreferences");if(null===e)return Wa;try{return JSON.parse(e)}catch(t){return Wa}},Ja=function(){return{settings:Ga(),refresh:function(){}}},Ya=s.a.createContext(Ja()),Xa=function(e){var t=e.children,a=Object(ne.a)(e,["children"]);return s.a.createElement(oe,{apiCall:Q.fakeAPI?function(){return Promise.resolve(Ga())}:V.getPreferences,renderInitial:function(){return s.a.createElement(Ya.Provider,Object.assign({value:Ja()},a),t)},renderOk:function(e,n){return localStorage.setItem("webPreferences",JSON.stringify(e)),s.a.createElement(Ya.Provider,Object.assign({value:{settings:e,refresh:n}},a),t)},renderErr:function(e,n){return s.a.createElement(Ya.Provider,Object.assign({value:{settings:Ga(),refresh:n}},a),t)}})},Za=a(69),$a=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={alertMessage:"",alertType:"info",showAlert:!1,processing:!1,translateMessage:!0,error:null,settings:a.props.settings},a.updateHandler=void 0,a.onChange=function(e,t){return function(n){var r=n.target[t];a.setState(function(t){return{settings:Object(M.a)({},t.settings,Object(v.a)({},e,r))}})}},a.saveSettings=function(e){e.preventDefault(),a.setState({alertMessage:"Processing...",error:null,alertType:"info",showAlert:!0,processing:!0,translateMessage:!0});var t=Q.fakeAPI?Promise.resolve({status:"success"}):V.updatePreferences(a.state.settings);a.updateHandler=re(t),a.updateHandler.promise.then(function(){a.setState({alertMessage:"Successfully saved preferences",alertType:"success",showAlert:!0,processing:!1,translateMessage:!0}),a.props.refresh(a.state.settings)}).catch(se).catch(function(e){var t="",n=null,r=!0;e instanceof Error?(t=e.message,r=!1):(t="API Error: {{error}}",n=e),a.setState({alertMessage:t,error:n,alertType:"danger",showAlert:!0,processing:!1,translateMessage:r})})},a.hideAlert=function(){a.setState({showAlert:!1})},a.getAlertMessage=function(){var e=a.props.t;return a.state.error?e(a.state.alertMessage,{error:e(a.state.error.key,a.state.error.data)}):a.state.translateMessage?e(a.state.alertMessage):a.state.alertMessage},a}return Object(ae.a)(t,e),Object(K.a)(t,[{key:"componentWillUnmount",value:function(){this.updateHandler&&this.updateHandler.cancel()}},{key:"render",value:function(){var e=this.props.t,t=this.state.showAlert?s.a.createElement(Ht,{message:this.getAlertMessage(),type:this.state.alertType,onClick:this.hideAlert}):null;return s.a.createElement(ea.a,{onSubmit:this.saveSettings},t,s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"layout",sm:2},e("Layout")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"layout",type:"select",value:this.state.settings.layout,onChange:this.onChange("layout","value")},s.a.createElement("option",{value:"boxed"},e("Boxed")),s.a.createElement("option",{value:"traditional"},e("Full"))))),s.a.createElement(ta.a,{row:!0},s.a.createElement(aa.a,{for:"language",sm:2},e("Language")),s.a.createElement(ra.a,{sm:10},s.a.createElement(na.a,{id:"language",type:"select",value:this.state.settings.language,onChange:this.onChange("language","value")},Za.map(function(e){return s.a.createElement("option",{key:e,value:e},e)})))),s.a.createElement(m.a,{type:"submit",disabled:this.state.processing},e("Apply")))}}]),t}(r.Component),Ka=Object(b.b)(["common","settings","api-errors","preferences"])($a),en=function(){return s.a.createElement(Ya.Consumer,null,function(e){var t=e.settings,a=e.refresh;return s.a.createElement(Ka,{settings:t,refresh:a})})},tn=function(e){return{"/dashboard":e("Dashboard"),"/query-log":e("Query Log"),"/whitelist":e("Whitelist"),"/blacklist/exact":"".concat(e("Blacklist")," (").concat(e("Exact"),")"),"/blacklist/regex":"".concat(e("Blacklist")," (").concat(e("Regex"),")"),"/settings/versions":e("Versions"),"/settings/networking":e("Networking"),"/settings/preferences":e("Preferences"),"/login":e("Login"),"/logout":e("Logout")}},an=[{name:"Dashboard",url:"/dashboard",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},V.loggedIn?s.a.createElement("div",{className:"dashboard-time-selector"},s.a.createElement(R,{size:"md"})):null,s.a.createElement("div",{className:"row"},s.a.createElement(Ie,null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(_e,null))),V.loggedIn?s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(qe,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Ge,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(Ye,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(tt,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(st,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(ct,null)),s.a.createElement("div",{className:"col-lg-6 col-md-12"},s.a.createElement(pt,null)))):null)},icon:"fa fa-tachometer-alt",auth:!1},{name:"Query Log",url:"/query-log",component:It,icon:"fa fa-database",auth:!0},{name:"Whitelist",url:"/whitelist",component:qt,icon:"far fa-check-circle",auth:!1},{name:"Blacklist",url:"/blacklist",icon:"fa fa-ban",auth:!1,children:[{name:"Exact",url:"/blacklist/exact",component:Ut,icon:"fa fa-ban",auth:!1},{name:"Regex",url:"/blacklist/regex",component:Qt,icon:"fa fa-ban",auth:!1}]},{customComponent:function(){return s.a.createElement(ue.Consumer,null,function(e){var t=e.status,a=e.refresh;return s.a.createElement(za,{status:t,refresh:a,onSetStatus:V.setStatus})})},fakeRoute:!0,auth:!0},{name:"Settings",url:"/settings",icon:"fa fa-wrench",auth:!0,children:[{name:"Versions",url:"/settings/versions",component:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"container-flex"},s.a.createElement(Xt,null)))},icon:"fa fa-download",auth:!0},{name:"Networking",url:"/settings/networking",component:Aa,icon:"fa fa-sitemap",auth:!0},{name:"Preferences",url:"/settings/preferences",component:function(){return s.a.createElement(en,null)},icon:"fa fa-sliders-h",auth:!0}]},{name:"Login",url:"/login",component:_a,icon:"fa fa-user",auth:!1,authStrict:!0},{name:"Logout",url:"/logout",component:Ma,icon:"fa fa-user-times",auth:!0,authStrict:!0}],nn=function(e){var t=e.children;return s.a.createElement(de,null,s.a.createElement(Xa,null,s.a.createElement(g,null,t)))},rn=function(){return s.a.createElement(Ya.Consumer,null,function(e){return function(e){switch(e){case"boxed":document.body.classList.add("boxcontainer"),document.body.classList.add("background-image");break;case"traditional":document.body.classList.remove("boxcontainer"),document.body.classList.remove("background-image")}}(e.settings.layout),null})},sn=function(){return s.a.createElement(Ya.Consumer,null,function(e){var t,a=e.settings;return t=a.language,ft.a.language!==t&&ft.a.changeLanguage(t),null})},ln=function e(t){if(!t.fakeRoute){if(t.children)return t.children.map(e);var a=t;return a.auth?s.a.createElement(on,{key:a.url,path:a.url,component:a.component}):s.a.createElement(c.b,{key:a.url,path:a.url,component:a.component})}},on=function(e){var t=e.component;return s.a.createElement(c.b,{path:e.path,render:function(e){return V.loggedIn?s.a.createElement(t,e):s.a.createElement(c.a,{to:{pathname:"/login",state:{from:e.location}}})}})},cn=a(158),un=a(156),dn=a.n(un);var mn;V.loggedIn=document.cookie.includes("user_id="),ft.a.use(cn.a).use(dn.a).use(b.a).init({fallbackLng:"en",whitelist:Za,ns:["common"],defaultNS:"common",fallbackNS:["dashboard","footer","lists","location","login","query-log","settings","api-errors","preferences","time-ranges"],nsSeparator:!1,keySeparator:!1,returnEmptyString:!1,debug:Q.developmentMode,interpolation:{escapeValue:!1},backend:{loadPath:"/i18n/{{lng}}/{{ns}}.json",ajax:mn}}),l.render(r.createElement(o.a,{basename:function(){var e=document.getElementsByTagName("base")[0];return e?new URL(e.href).pathname:""}()},r.createElement(c.d,null,r.createElement(c.b,{path:"/",name:"Home",component:function(e){return s.a.createElement("div",{className:"app"},s.a.createElement(nn,null,s.a.createElement(rn,null),s.a.createElement(sn,null),s.a.createElement(J,null),s.a.createElement("div",{className:"app-body"},s.a.createElement(ke,Object.assign({items:an},e)),s.a.createElement("main",{className:"main",onClick:G},s.a.createElement("div",{className:"container-fluid",style:{marginTop:"1.5rem"}},s.a.createElement(r.Suspense,{fallback:null},s.a.createElement(c.d,null,s.a.createElement(c.a,{exact:!0,from:"/",to:"/dashboard"}),an.map(ln)))))),s.a.createElement(we,null)))}}))),document.getElementById("root"))},66:function(e,t,a){e.exports=a.p+"static/media/logo.00d87c43.svg"},69:function(e){e.exports=["ar","bg","ca","cs","da","de","el","en","es","fr","he","hr","hu","it","nl","pl","pt","ro","sk","sl","sv","tr","vi","zh"]}},[[159,1,2]]]);
//# sourceMappingURL=main.7796338a.chunk.js.map